{"version": 3,"file": "",
"sourceroot": "",
"sources": ["pages/diy/index.js","pages/diy/template/index.js","pages/foxui/index.js","pages/goods/detail/poster/poster.js","pages/integral/order/detail/index.js","pages/order/logistics/index.js","pages/order/pay/sharecoupon/index.js","pages/quickbuy/2.js","pages/sale/coupon/my/index.js","utils/base64.js","utils/biz/area.js","utils/biz/cart.js","utils/biz/diyform.js","utils/biz/diypage.js","utils/biz/goodspicker.js","utils/biz/group_order.js","utils/biz/order.js","utils/biz/selectdate.js","utils/core.js","utils/foxui.js","utils/icons.js","utils/jquery.js","utils/util.js","utils/wxParse/html2json.js","utils/wxParse/htmlparser.js","utils/wxParse/showdown.js","utils/wxParse/wxDiscode.js","utils/wxParse/wxParse.js","app.js","pages/index/index.js","pages/custom/index.js","pages/creditshop/detail/index.js","pages/creditshop/comment/index.js","pages/creditshop/express/index.js","pages/shop/notice/index/index.js","pages/shop/notice/detail/detail.js","pages/shop/caregory/index.js","pages/goods/index/index.js","pages/goods/region/index.js","pages/goods/detail/index.js","pages/goods/package/index.js","pages/goods/package/detail/index.js","pages/goods/poster/poster.js","pages/order/index.js","pages/order/detail/index.js","pages/order/express/index.js","pages/order/comment/index.js","pages/order/refund/index.js","pages/order/singlerefund/index.js","pages/order/create/index.js","pages/order/store/index.js","pages/order/store/map.js","pages/order/pay/index.js","pages/member/index/index.js","pages/member/info/index.js","pages/member/bind/index.js","pages/member/favorite/index.js","pages/member/history/index.js","pages/member/recharge/index.js","pages/member/withdraw/index.js","pages/member/log/index.js","pages/member/address/index.js","pages/member/address/post.js","pages/member/address/select.js","pages/member/cart/index.js","pages/verifygoods/index.js","pages/verifygoods/detail/index.js","pages/sale/coupon/index/index.js","pages/sale/coupon/detail/index.js","pages/sale/coupon/my/detail/index.js","pages/sale/coupon/my/index/index.js","pages/sale/coupon/my/showcoupons2/index.js","pages/public/coupon/index.js","pages/message/auth/index.js","pages/web/index.js","pages/map/index.js","pages/order/pay/share/share.js","pages/order/pay/coupons/coupons.js","pages/creditshop/log/index.js","pages/creditshop/log/detail/index.js","pages/creditshop/lists/index.js","pages/creditshop/creditlog/index.js","pages/creditshop/create/index.js","pages/creditshop/verify/index.js","pages/creditshop/index.js","pages/order/cycle/index.js","pages/order/cycle/address.js","pages/order/cycle/order.js","pages/order/express/number.js","pages/member/membercard/index.js","pages/member/membercard/detail/index.js","pages/member/membercard/pay/index.js","pages/transfer/groups/index.js","pages/transfer/bargain/index.js","pages/transfer/seckill/index.js","pages/quickbuy/index.js","friendcoupon/index.js","pages/transfer/commission/index.js","pages/auth/index.js"],
"names": ["app","getApp","core","requirejs","Page","data","route","indicatorDots","autoplay","interval","duration","circular","hotimg","saleout1","saleout2","saleout3","icons","diypage","onReady","onShow","$this","this","get","result","loading","setData","onHide","onUnload","onLoad","options","foxui","accredit","errMsg","Image","previewImage","wx","current","urls","savePicture","getSetting","success","res","authSetting","showLoading","title","setTimeout","hideLoading","downloadFile","url","saveImageToPhotosAlbum","filePath","tempFilePath","toast","fail","ret","authorize","scope","getmsg","onPullDownRefresh","onReachBottom","onShareAppMessage","goodspicker","diyform","arrLabel","num","clickCar","_defineProperty","_data","pageid","id","undefined","pages","getCurrentPages","url_arr","length","split","that","systemInfo","getStorageSync","busPos","globalData","hh","goodsH","windowHeight","arrLab","i","push","arr","style","shopstyle","logostyle","main","group","goodsArr","arrCart","cartdata","advs","goodslength","type","arrscroll","quickid","numtotal","simple_list","setNavigationBarTitle","pagetitle","menunavigage","e","currentTarget","dataset","navigateTo","switchTab","gobigimg","link","clickLab","shopCarList","cartcartArr","showPicker","cartList","tempcartid","list","goodsid","shopCarHid","selectPicker","selectpicker","cover","showvideo","modelShow","specsTap","event","emptyActive","active","slider","tempname","specsTitle","buyNow","getCart","select","inputNumber","number","onChange","DiyFormHandler","selectArea","bindChange","onCancel","onConfirm","getIndex","str","areas","closespecs","onPageScroll","addCartquick","a","b","numbers","optionid","update","total","addtype","typevalue","diyformdata","formdataval","error","cantclick","message","isSelected","totalprice","goodstotal","clearcart","addGoodToCartFn","checkAuth","modeltakeout","canadd","morechose","more","add","mouse","min","diyformtype","cycledate","storenum","store","maxnum","animate","finger","topPoint","touches","clientX","clientY","Math","abs","linePos","bezier","startAnimation","pots","amount","pot","lines","points","slice","shift","rate","pointA","pointB","pointDistance","xDistance","yDistance","tan","radian","tmpPointDistance","x","y","pow","atan","cos","sin","pointLine","bezier_points","index","hide_good_box","bus_x","bus_y","len","timer","setInterval","clearInterval","clearShopCartFn","Number","closemulti","gopay","fromquick","gotocart","cartaddcart","opid","carttype","goodsOptionTotal","scrollfn","arrtemp","detail","scrollTop","_keyStr","_utf8_encode","string","replace","utftext","n","c","charCodeAt","String","fromCharCode","_utf8_decode","c2","c3","module","exports","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","isNaN","charAt","decode","indexOf","getAreas","callback","provinces","province","citys","j","city","countys","k","county","hasOwnProperty","county_name","city_name","province_name","$","trim","isArray","name","ii","iii","area","val","pval","field","bindAreaField","isEmptyObject","f_data","areaKey","areaObj","areaDetail","noArea","diyform.f_data","value","pdata","postData","oldValue","pvalOld","newValue","hasarea","areakey","obj","target","data_type","datatype","_typeof","fields","diy_type","tp_text","upload","file","images","filename","count","newdata","verify","tp_must","tp_name","name1","name2","tp_name2","JSON","stringify","test","items","topmenu","customData","customer","phone","phonecolor","phonenumber","customercolor","page","usediypage","startadv","diytitle","each","item","showtype","topmenuheight","ceil","istopmenu","linkurl","dataurl","goods","diypages","topmenuDataType","showmore","tabbarDataType","tabbarData","setNavigationBarColor","frontColor","titlebarcolor","backgroundColor","titlebarbg","max","action","parseInt","stock","maxbuy","minbuy","chooseGift","giftid","hasOption","hasoption","diydata","selectDate","checkedDate","post","isgift","redirectTo","gdid","giftinfo","gifts","quickbuy","goods.carttotal","carttotal","tempdata","home","specsData","goods.member_discount","show","presellstartstatus","ispresell","presellendstatus","pickerOption","canbuy","buyType","buytype","minpicker","goods.thistime","thistime","specs","lastdata","pagepicker","presellstatustitle","sortNumber","idx","optionTitle","optionids","forEach","newOptionids","sort","join","thumb","goods.thumb","goods.total","goods.maxprice","marketprice","goods.minprice","goods.marketprice","member_discount","goods.seecommission","seecommission","goods.presellprice","presellprice","optionCommission","canBuy","cancelArray","order","cancel","remark","cancel_reason","delete","userdeleted","self","confirm","get_list","finish","refundcancel","codeshow","orderid","json","code","qrcode","alert","codehidden","doDay","currentObj","Y","getFullYear","m","getMonth","d","getDate","key","Date","week","currentDate","getDay","currentYear","currentMonth","setSchedule","getCurrentDayString","initDate","objDate","date","currentDayNum","getUTCDay","firstKey","currentDayList","f","currentdate","isdelay","unit_date","periodic","cycelbuy_periodic","period_index","period_rest","maxday","week_index","no_optional","checked","f1","parse","selectDay","day","create","currentDay","currentDa","receipttime","require","toQueryPair","encodeURIComponent","getUrl","routes","params","full","getConfig","api","param","args","hasloading","ispost","session","userinfo_openid","getCache","usermid","authkey","comefrom","openid","mid","merchid","op","method","header","Content-type","Cookie","setCache","sysset","isclose","closetext","request","getDistanceByLnglat","lng1","lat1","lng2","lat2","rad","PI","rad1","rad2","s","asin","sqrt","round","msg","showModal","content","showCancel","confirm_callback","cancel_callback","showToast","icon","hideToast","uploadCallback","chooseImage","tempFilePaths","uploadFile","files","makePhoneCall","phoneNumber","pay","succalback","requestPayment","cartcount","customtitle","share","userinfo_id","shopname","desc","description","path","str2Obj","oldArr","countDown","timePoint","time","now","leftTime","floor","hour","minute","second","text","FoxUIToast","notify","FoxUINotify","voice","mute","home_red","cate","cate_red","cart","cart_red","people","people_red","shop","cartWhite","like","likeactive","likefill","footprint","notice","location","setting","paying48","deliver48","box48","refund48","storeWhite","search","money","coupon","card","car48","cry220","mobile","labelGreen","labelRed","back","nopic","dingdan","tianjia","service","service2","my","buildParams","prefix","traditional","jQuery","v","rbracket","isArraylike","isWindow","nodeType","class2type","core_deletedIds","core_push","core_indexOf","core_toString","toString","core_hasOwn","core_trim","r20","isFunction","Array","window","isNumeric","parseFloat","isFinite","call","isPlainObject","constructor","prototype","support","ownLast","apply","rtrim","makeArray","results","Object","merge","inArray","elem","first","l","isMobile","toFixed","RangeError","substring","extend","src","copy","copyIsArray","clone","arguments","deep","jquery","formatNumber","formatTime","year","month","getHours","getMinutes","getSeconds","map","makeMap","removeDOCTYPE","html","trimHtml","transEmojiStr","emojiObjs","__emojisReg","__emojis","emojiObj","node","array","eReg","RegExp","ele","tag","baseSrc","__emojisBaseSrc","__placeImgeUrlHttps","wxDiscode","HTMLParser","block","inline","closeSelf","html2json","bindName","strDiscode","bufArray","nodes","imageUrls","start","attrs","unary","parent","tagType","attr","reduce","pre","classStr","styleStr","match","imgIndex","imgUrl","splice","urlToHttpUrl","from","fontSize","styleAttrs","color","face","size","source","unshift","end","console","chars","textArray","comment","emojisInit","reg","emojis","startTag","endTag","empty","fillAttrs","special","handler","parseEndTag","tagName","toLowerCase","pos","stack","last","all","rest","escaped","getDefaultOpts","simple","defaultOptions","omitExtraWLInCodeBlocks","defaultValue","describe","noHeaderId","prefixHeaderId","headerLevelStart","parseImgDimensions","simplifiedAutoLink","literalMidWordUnderscores","strikethrough","tables","tablesHeaderId","ghCodeBlocks","tasklists","smoothLivePreview","smartIndentationFix","opt","validate","extension","valid","showdown","helper","baseMsg","ext","isString","isUndefined","listeners","filter","regex","ln","escapeCharactersCallback","wholeMatch","m1","parsers","extensions","globalOptions","flavor","github","vanilla","setOption","getOption","getOptions","resetOptions","setFlavor","preset","option","getDefaultOptions","subParser","func","Error","stdExtName","validExtension","getAllExtensions","removeExtension","resetExtensions","validateExtension","warn","getType","escapeCharacters","charsToEscape","afterBackslash","regexString","rgxFindMatchPos","left","right","flags","t","g","exec","lastIndex","matchRecursiveRegExp","matchPos","replaceRecursiveRegExp","replacement","repStr","finalStr","lng","bits","log","Converter","converterOptions","_parseExtension","legacyExtensionLoading","validExt","langExtensions","outputModifiers","listen","rTrimInputText","rsp","rgx","gOpt","_constructor","_dispatch","evtName","globals","ei","nText","makeHtml","gHtmlBlocks","gHtmlMdBlocks","gHtmlSpans","gUrls","gTitles","gDimensions","gListLevel","hashLinkCounts","converter","addExtension","useExtension","extensionName","language","writeAnchorTag","m2","m3","m4","m5","m6","m7","linkText","linkId","replaceLink","wm","lnkTxt","replaceMail","unescapedStr","simpleURLRegex","delimUrlRegex","simpleMailRegex","delimMailRegex","bq","pattern","codeblock","nextChar","leadingText","numSpaces","addr","ch","random","r","blockText","blockTags","txt","config","matches","headerId","escapedId","prefixHeader","setextRegexH1","setextRegexH2","spanGamut","hID","hLevel","hashBlock","matchFound","span","writeImageTag","altText","width","height","gDims","inlineRegExp","referenceRegExp","processListItems","listStr","trimTrailing","isParagraphed","taskbtn","bulletStyle","otp","parseConsecutiveLists","listType","counterRxg","subLists","parseCL","wholeList","grafs","grafsOut","grafsOutIt","codeFlag","delim","$1","$2","re","blankLines","parseStyles","sLine","parseHeaders","tableHeaderId","parseCells","cell","buildTable","headers","cells","tb","tblLgn","tableRgx","rawTable","tableLines","rawHeaders","rawStyles","rawCells","styles","row","charCodeToReplace","strNumDiscode","strGreeceDiscode","strcharacterDiscode","strOtherDiscode","strMoreDiscode","rep","wxParseImgTap","nowImgUrl","tagFrom","wxParseImgLoad","calMoreImageInfo","_that$setData","temData","temImages","recal","wxAutoImageCal","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","keyW","keyH","imageWidth","imageheight","originalWidth","originalHeight","windowWidth","autoWidth","autoHeight","padding","view","imagePadding","realWindowWidth","realWindowHeight","getSystemInfo","wxParse","transData","HtmlToJson","bindData","wxParseTemArray","temArrayName","bindNameReg","simArr","App","onLaunch","model","setStorageSync","ww","currentPages","currentPage","routeData","paramsArr","decodeURIComponent","scene","userinfo","settings","jsname","approot","appid","getExtConfigSync","expire","removeCache","rt","removeStorageSync","close","globalDataClose","flag","reLaunch","getSet","cacheset","version","arg","user","impower","limit","confirmText","openSetting","userInfo","parser","getDiypage","stopPullDownRefresh","imgUrls","indicatorDotss","autoplays","intervals","durations","circulars","adveradmin","clock","storeRecommand","loaded","indicatorDotsHot","autoplayHot","intervalHot","durationHOt","circularHot","notification","play","getShop","copyright","getRecommand","concat","pagesize","hideTabBar","isblack","sceneObj","diypageGet","response","force_auth","swiperheight","showTabBar","status","get_nopayorder","autoclose","count_down","countdown","showtime","startadvtime","nowtime","unpaid","getSystemInfoSync","get_hasnewcoupon","get_cpinfos","limits","screenWidth","goodsicon","iconheight","iconwidth","endtime","starttime","initSeckill","imagesHeight","bindInput","inputValue","t1","fixedsearch","startplay","videoContext","createVideoContext","unpaidcolse","unpaidcolse2","unpaidhide","hasinfo","nopaygoods","nopaygoodstotal","nopayorder","hasnewcoupon","showcoupontips","hascpinfos","showcoupon","cpinfos","adverclose","indexChangebtn","_Page","sound","soundpic","appurl","navigateToMiniProgram","appId","topmenuindex","lastIndexOf","itemid","paramsType","seckillinfo","lasttime","currenttime","setTimer","setTimerInterval","times","formatSeconds","sec","theTime","theTime1","theTime2","pauseOther","item_id","audiosObj","pause","audios","innerAudioContext","createInnerAudioContext","onPlay","Time","currentTime","seconds","audiowidth","audiotime","audio","pausestop","loopplay","onEnded","paused","loop","seek","tabinfo","tabreplay","tablog","goodsoptions","logmore","logpage","replays","replaysmore","replaypage","stores","goodsrec","selectspecs","optionselect","optionbtn","onTab","tab","getlog","getreply","getDetail","navigateBack","goodsdetail","subdetail","noticedetail","usedetail","replys","replymore","istime","timestart","timeend","leftsecond","optionclick","optiongoods","buymsg","specselect","specid","specsitem","class","optiongoods.thumb","optiongoods.total","goods.credit","credit","goods.money","optiongoods.credit","optiongoods.money","goods.canbuy","goods.buymsg","closepicker","openActionSheet","isIpx","iphonexnavbar","stars_class","stars_text","normalSrc","selectedSrc","imgs","is_openmerch","change","submit","logid","comments","level","getList","createtime","category","selector","advimg","advurl","recommands","child","tabCategory","cateChild","backParent","getCategory","set","isFilterShow","listmode","listsort","allcategory","catlevel","opencategory","category_child","category_third","filterBtns","isfilter","defaults","keywords","isrecommand","ishot","isnew","isdiscount","issendfree","by","lastcat","fromsearch","searchRecords","initCategory","getRecord","setFocus","category_parent","changeMode","bindSort","listorder","sort_selected","showFilter","btnFilterBtns","bindFilterCancel","cateogry_parent_selected","category_child_selected","category_third_selected","bindFilterSubmit","bindCategoryEvents","category_parent_selected","bindSearch","setRecord","bindFocus","bindback","bindnav","records","newArr","delRecord","focusin","cancelclick","confirmclick","region","onlysent","selectdate","info","preselltimeend","presellsendstatrttime","advWidth","dispatchpriceObj","discountTitle","istimeTitle","commentObj","commentObjTab","commentEmpty","commentPage","commentTotal","commentLevel","commentList","closeBtn","animationData","uid","stararr","nav_mask","nav_mask2","nav","showgoods","imageLoad","h","w","advHeight","favorite","isfavorite","goods.isfavorite","goodsTab","tap","para","retlist","commentType","objType","comentTap","preview","nowTime","coupons","MaxHeight","thumbMaxHeight","thumbMaxWidth","coupon_l","packagegoods","packagegoodsid","credittext","activity","bottomFixedImageUrls","showDate","show_goods","package","buycontent","minprice","maxprice","labelstyle","navbar","labels","dispatchprice","isdiscount_time","preselltimestart","presellisstart","getComments","fullbackgoods","maxfullbackratio","maxallfullbackallratio","nowDate","show_cycelbuydate","cityPicker","giftPicker","gift","couponPicker","couponrecived","timeType","timeOut","timeout","goods_hint_show","goodslist","packageList","getStorage","removeStorage","pageScrollTo","showpic","bindfullscreenchange","fullScreen","sharePoster","showshade","nav2","changevoice","radioChange","giftgoodsid","gift_title","activityPicker","fadein","actOutPicker","hintclick","sendclick","syclecancle","sycleconfirm","editdate","option_mask","pid","packgoods","good","setStorage","choose","option_title","packageprice","sum","option_active","optionname","buy","getImage","loadImg","cancelindex","selected","consume","diyshow","city_express_state","paddingb","nogift","fullbackratio","ordervirtualtype","ordervirtual","invoice","invoicename","membercard_info","toggle","rtypeArr","rtypeArrText","rtypeIndex","reasonArr","reasonIndex","rtype","reason","price","edit","order.refundstate","sendtime","order.single_refundstate","fefundreceive","single_refundid","refund","dispatchtype","realname","street","address","streetIndex","showaddressview","dayList","cycelbuy_showdate","bargainid","selectcard","ispackage","getGoodsList","comboprice","originalprice","goodsprice","card_info","cardid","cardname","carddiscountprice","iscycel","hasinvoice","merchs","getQuickAddressDetail","list.address","caculate","list.carrierInfo","list.storeInfo","data.couponid","data.couponname","couponid","discountprice","isdiscountprice","$goodsarr","kk","vv","data.dispatchtype","dflag","addressid","packageid","bargain_id","dispatch_price","enoughdeduct","deductenough_money","enoughmoney","deductenough_enough","taskdiscountprice","seckill_price","deductcredit2","deductmoney","deductcredit","deduct","realprice","deduct2","deductprice","coupon.deductprice","coupon_deductprice","card_free_dispatch","goods.gifts","carrierInfo","subdata","fromcart","carrierid","carriers","isvirtual","isverify","carrier_realname","member","carrier_mobile","storename","storeInfo","set_realname","set_mobile","isforceverifystore","isonlyverifygoods","dataChange","listChange","datavalue","getStreet","areaDetail.detail","onChange2","vname","bindtype","streetdatavalue","openstreet","areaDetail.detail.street","submitaddress","posting","clearform","new_fdata","showinvoicepicker","invoice_type","invoice_info","entity","invoicepicker","noinvoicepicker","clearinvoice","chaninvoice","changeType","company","invoicetitle","invoicenumber","confirminvoice","str1","str2","str3","selectCard","cancalCard","changecard","carddiscount_rate","card_obj","closeCardModal","show_distance","ids","getLocation","lat","latitude","longitude","old_list","new_list","storeid","markers","getInfo","successData","wechat","payinfo","check_json","complete","pay_json","closecoupon","iscycelbuy","bargain","navigate","openbind","template_flag","weixin","birthday","memberdata","binded","subtext","smsimgcode","verifycode_img","password","password1","endTime","inputChange","getCode","verifyImg","verifyImgCode","ret2","postData.confirm","imageChange","isedit","isCheckAll","checkObj","checkNum","itemClick","btnClick","checkAllClick","disabled","coupon.id","coupon.name","minimumcharge","js","objectArray","checkedIndex","bankChecked","chargeShow","realInfo","isSubmit","last_data","alipay","alipay1","bankcard","bankcard1","bankname","type_array","bankCheckedIndex","lastbankindex","withdrawmoney","moneyChange","bankChange","moneytext","bindAll","allow","withdrawcharge","deductionmoney","withdrawbegin","withdrawend","realmoney","typeChange","banklist","realinfo","bank","applytype","confirm_msg","isopen","myTab","setDefault","deleteItem","fui","detail.street","merch_list","edit_list","get_cart","ismerch","ischeckall","allgoods","checked_allgoods","checkall","check","editcheckall","editischecked","verifygoods","get_detail","canverify","canverify_message","verifygoodlogs","verifynum","limitdatestr","verifycode","cates","cateid","getCate","setSpeed","lastratio","angle","context","createContext","beginPath","arc","setFillStyle","setStrokeStyle","setLineWidth","stroke","setLineCap","canvasId","drawCanvas","actions","getActions","bindTab","jump","receive","buying","canget","gettypestr","payResult","getstr","coupontype","confirm_text","dataid","closecenter","goodsinfo","couponname","bindBtn","bind","bindGetUserInfo","keys","redirectUrl","login","login_res","encryptedData","iv","sessionKey","session_key","auth_res","openId","uniacid","domain","scale","tel1","tel2","logo","iconPath","label","borderRadius","bgColor","display","textAlign","circles","fillColor","radius","strokeWidth","regionchange","markertap","controltap","cityexpress","zoom","markers[0].longitude","markers[0].latitude","markers[0].label.content","circles[0].longitude","circles[0].latitude","circles[0].radius","range","listout","listin","calldown","callup","tel","paperplane","transmit","hidepaperplane","showcode","load","notgoods","sm","onpage","next_page","datas","replyset","ordercredit","ordermoney","carrier","allmoney","togglestore","togglecode","iswechat","paymentmodal","_$this$setData","dispatch","allprice","lenght","paydispatch","paytype","showNavigationBarLoading","hideNavigationBarLoading","focus","showbtn","doinput","showmodal","successmodal","iscredit","successmessage","successstatus","goodstype","payClick","lottery","eno","swiperCurrent","links","lotterydraws","exchanges","balances","hidden","get_index","changeTo","gid","redbags","cycelData","cycelid","refundstate","cycle","newDate","isall","is_all","notStart","confirm_receipt","applyid","updateAll","express","expresscom","express_number","singlerefund","inputPrickChange","express_list","refundid","hasmembercard","all_total","my_total","startbuy","order_id","modal","getlist","swiperchange","issend","month_coupon","isget_month_coupon","isget_month_point","pay_type","pay_fee","fee","orderno","pay_msg","startPullDownRefresh","activity_setting","shareid","share_id","listlength","pindex","getCoupon","isGet","form_id","formId","isLogin","invalidMessage","carve","mycoupon","currentActivityInfo","activity_id","headerid","activitySetting","activityList","enough","activityData","mylink","overTime","shop_logo","shop_name","_this","sysSet","shoplogo","delta"],
"mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
"sourcesContent": ["// pages/diy/index.js\r\nvar app = getApp();\r\nvar icons = app.requirejs('icons');\r\nvar core = app.requirejs('core');\r\nvar Base64 = app.requirejs('base64');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nPage({\r\n  data: {\r\n        route: 'home',\r\n        indicatorDots: true,\r\n        autoplay: true,\r\n        interval: 5000,\r\n        duration: 500,\r\n        circular: true,\r\n        hotimg: \"/static/images/hotdot.jpg\",\r\n        saleout1: \"/static/images/saleout-1.png\",\r\n        saleout2: \"/static/images/saleout-2.png\",\r\n        saleout3: \"/static/images/saleout-3.png\",\r\n        icons: app.requirejs('icons'),\r\n        diypage:''\r\n       },\r\n    onReady:function(){\r\n      // 页面渲染完成\r\n      \r\n    },\r\n    onShow:function(){\r\n      var $this = this;\r\n      core.get('diypage&id=1', {}, function (result) {\r\n        var data = { loading: false, diypage: result.diypage};\r\n        $this.setData(data);\r\n      });\r\n    },\r\n    onHide:function(){\r\n      // 页面隐藏\r\n    },\r\n    onUnload:function(){\r\n      // 页面关闭\r\n    }\r\n  })","// pages/diy/template/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","// pages/foxui/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n  \taccredit: '',\r\n  \terrMsg: '',\r\n  \tImage: 'https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg'\r\n  },\r\n  \r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\t/*图片预览*/\r\n\tpreviewImage: function(){\r\n\t\twx.previewImage({\r\n\t\t  current: 'https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg', // 当前显示图片的http链接\r\n\t\t  urls: ['https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg'] // 需要预览的图片http链接列表\r\n\t\t})\r\n\t},\r\n\t/*点击保存图片*/\r\n  savePicture: function(){\r\n  \tvar $this = this;\r\n  \twx.getSetting({\r\n\t\t  success: function(res){\r\n\t\t  \tvar accredit = res.authSetting['scope.writePhotosAlbum']\r\n\t\t  \tif(accredit){\r\n\t\t  \t\twx.showLoading({\r\n\t\t\t\t\t  title: '图片下载中...',\r\n\t\t\t\t\t})\r\n\t\t  \t\tsetTimeout(function(){\r\n\t\t\t\t\t  wx.hideLoading()\r\n\t\t\t\t\t},1000)\r\n\t\t  \t\twx.downloadFile({\r\n\t\t  \t\t\turl: 'https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg',\r\n\t\t  \t\t\tsuccess: function(res) {\r\n  \t\t\t\t\t\twx.saveImageToPhotosAlbum({\r\n\t\t\t\t  \t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t    \tsuccess(result) {\r\n\t\t\t\t\t    \t\tfoxui.toast($this, \"保存图片成功\");\r\n\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t    \tfail:function(ret){\r\n\t\t\t\t\t    \t\t$this.setData({errMsg: ret.errMsg})\r\n\t\t\t\t\t    \t\tfoxui.toast($this, \"保存图片失败\");\r\n\t\t\t\t\t    \t}\r\n\t\t\t\t\t\t\t})\r\n\t\t  \t\t\t}\r\n\t\t  \t\t})\r\n\t\t  \t}else{\r\n\t\t  \t\twx.authorize({\r\n\t          scope: 'scope.writePhotosAlbum',\r\n\t\t\t  \t\tfail: function(){\r\n              app.getmsg('writePhotosAlbum', '使用保存图片功能');\r\n\t\t  \t\t\t}\r\n\t\t  \t\t})\r\n\t\t  \t}\r\n\t\t\t}\r\n\t\t})\t\r\n  }\r\n\r\n})","// pages/integral/order/detail/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","// pages/order/logistics/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","// pages/order/pay/sharecoupon/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","// pages/mall_index/mall_index.js\r\nvar app = getApp()\r\nvar core = app.requirejs('core');\r\nvar goodspicker = app.requirejs('biz/goodspicker'), foxui = app.requirejs('foxui'), diyform = app.requirejs('biz/diyform');\r\n\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    arrLabel: [],\r\n    num: [],  // 购物车商品数量\r\n    clickCar: false, // 点击出现购物车列表\r\n    num: 0,\r\n    change: false,\r\n    div: false,\r\n    numtotal: {},\r\n    clearcart: true,\r\n    canBuy: '',\r\n    // 购物车\r\n    specs: [],\r\n    options: [],\r\n    diyform: {},\r\n    specsTitle: '',\r\n    total: 1,\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    buyType: '',\r\n    areas: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n    closespecs: false,\r\n    buyType: 'cart',\r\n    quickbuy: true,\r\n    formdataval: {},\r\n    showPicker: false\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    wx.showLoading({\r\n      title: '加载中...',\r\n    })\r\n    var pageid = options.id;\r\n\r\n    if (pageid==undefined){\r\n        var pages = getCurrentPages(); //获取页面栈\r\n        var url_arr = pages[pages.length - 1].route.split(\"/\");//当前页面路径/分割后的数组\r\n        pageid = url_arr[url_arr.length - 1];\r\n    }\r\n\r\n\r\n\r\n    var that = this;\r\n    let systemInfo = wx.getStorageSync('systemInfo');\r\n\r\n    this.busPos = {};\r\n    this.busPos['x'] = 45;//购物车的位置\r\n    this.busPos['y'] = app.globalData.hh - 80;\r\n\r\n    this.setData({\r\n      goodsH: systemInfo.windowHeight - 245 - 48,\r\n      pageid: pageid\r\n    });\r\n    // 左边选项卡切换控制数组\r\n    var arrLab = [1];\r\n    for (var i = 1; i < that.data.arrLabel.length; i++) {\r\n      arrLab.push(0);\r\n    }\r\n    that.setData({\r\n      arrLab: arrLab,\r\n    })\r\n\r\n\r\n    core.get('quick/index/main', { id: this.data.pageid }, function (ret) {\r\n     \r\n      var arr = []; // 商品在购物车中的数量 \r\n\r\n      var style = ''; // 样式\r\n      style = ret.style.shopstyle == 1 ? 'changeCss2' : (ret.style.shopstyle == 2 ? 'changeCss3' : '')\r\n\r\n      style += ' ' + ret.style.logostyle\r\n\r\n      that.setData({\r\n        main: ret,\r\n        group: ret.group,\r\n        goodsArr: ret.goodsArr,\r\n        arrCart: arr,\r\n        style: style\r\n      })\r\n\r\n\r\n\r\n\r\n\r\n\r\n      var id = that.data.main.cartdata == 1 ? that.data.pageid : '';\r\n      var numtotal = {};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      // 计算高度\r\n      if (that.data.main.advs) {\r\n        if (that.data.main.advs.length > 0) {\r\n          var arr = [198];\r\n          var goodslength = 198;\r\n        }\r\n      } else {\r\n        var arr = [18];\r\n        var goodslength = 18;\r\n      }\r\n   \r\n      for (var i = 0; i < that.data.main.group.length; i++) {\r\n        if (that.data.main.goodsArr[that.data.main.group[i].type]) {\r\n          var templength = that.data.main.goodsArr[that.data.main.group[i].type].length ? that.data.main.goodsArr[that.data.main.group[i].type].length : 0.6;\r\n          goodslength = goodslength + templength * 106 + 66;\r\n          arr.push(goodslength)\r\n          that.setData({\r\n            arrscroll: arr\r\n          })\r\n\r\n        }\r\n\r\n   \r\n      }\r\n\r\n\r\n\r\n      var id = that.data.main.cartdata == 1 ? that.data.pageid : '';\r\n      core.get('quick/index/getCart', { quickid: id }, function (ret) {\r\n      \r\n        var numtotal = {};\r\n        for (var i in ret.simple_list) {\r\n         \r\n          numtotal[i] = ret.simple_list[i];\r\n        }\r\n        that.setData({\r\n          numtotal: numtotal\r\n        })\r\n      })\r\n\r\n      wx.hideLoading();\r\n      wx.setNavigationBarTitle({\r\n        title: ret.pagetitle\r\n      })\r\n    })\r\n  },\r\n\r\n  // 导航菜单跳转\r\n  menunavigage: function (e) {\r\n      const url = e.currentTarget.dataset.url\r\n      wx.navigateTo({\r\n          url: url,\r\n          fail: function () {\r\n              wx.switchTab({\r\n                  url: url,\r\n              })\r\n          }\r\n      })\r\n  },\r\n\r\n  // 幻灯片跳转\r\n  gobigimg: function (e) {\r\n    wx.navigateTo({\r\n      url: e.currentTarget.dataset.link,\r\n    })\r\n  },\r\n\r\n  // 左边选项卡切换方法\r\n  clickLab: function (e) {\r\n    var id = e.currentTarget.dataset.id; //左侧点击跳转id\r\n  \r\n    var arr = this.data.arrLab;\r\n    for (var i = 0; i < arr.length; i++) {\r\n      arr[i] = 0;\r\n    }\r\n    arr[id] = 1;\r\n\r\n    this.setData({\r\n      arrLab: arr,\r\n      id: e.currentTarget.dataset.id\r\n    })\r\n  },\r\n  // 查看购物车列表\r\n  shopCarList: function () {\r\n    var that = this;\r\n    this.setData({\r\n      clickCar: true,\r\n      cartcartArr: [],\r\n      showPicker: true\r\n    })\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n \r\n    core.get('quick/index/getCart', { quickid: id }, function (ret) {\r\n    \r\n      var main = that.data.main;\r\n      main.cartList = ret\r\n      that.setData({\r\n        main: main\r\n      })\r\n\r\n      var tempcartid = [];\r\n      for (var i = 0; i < ret.list.length; i++) {\r\n        tempcartid[i] = ret.list[i].goodsid;\r\n      }\r\n      that.setData({\r\n        tempcartid: tempcartid\r\n      })\r\n    \r\n    })\r\n  },\r\n  shopCarHid: function () {\r\n    this.setData({\r\n      clickCar: false,\r\n      showPicker: false\r\n    })\r\n  },\r\n\r\n\r\n\r\n\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    var $this = this;\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        if (limits) {\r\n          var goodslist = 'goodslist';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          $this.setData({\r\n            cover: '',\r\n            showvideo: false\r\n          });\r\n        } else {\r\n          $this.setData({ modelShow: true })\r\n          return\r\n        }\r\n      }\r\n    })\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', specsTitle: '', showPicker: false\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this)\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this\r\n    goodspicker.select($this)\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n\r\n  closespecs: function () {\r\n    this.setData({\r\n      closespecs: false\r\n    })\r\n  },\r\n\r\n\r\n  /**\r\n   * 生命周期函数--监听页面滚动\r\n   */\r\n  onPageScroll: function (e) {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n\r\n  },\r\n\r\n  // 弹窗picker点击确定按钮或单规格商品加入购物车\r\n  addCartquick: function (a, b) {\r\n    var that = this;\r\n\r\n    var numbers = that.data.numtotal;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n\r\n\r\n    // 加入购物车\r\n    core.get('quick/index/update', {\r\n      quickid: id,\r\n      goodsid: that.data.goodsid,\r\n      optionid: a ? a : '',\r\n      update: '',\r\n      total: '',\r\n      type: that.data.addtype,\r\n      typevalue: b ? b : '',\r\n      diyformdata: that.data.formdataval ? that.data.formdataval : ''\r\n    }, function (ret) {\r\n    \r\n\r\n\r\n      // 如果达到最大购买数量或者超出库存，提示错误信息\r\n      if (ret.error != 0) {\r\n        that.setData({\r\n          cantclick: true\r\n        })\r\n        foxui.toast(that, ret.message);\r\n        that.setData({\r\n          active: '', slider: 'out', isSelected: true, tempname: '', showPicker: false\r\n        })\r\n      } else {\r\n        // 修改底部购物车的数据\r\n        var main = that.data.main;\r\n        main.cartList.total = ret.total;\r\n        main.cartList.totalprice = ret.totalprice;\r\n        main.cartList.list = [1];\r\n\r\n        numbers[that.data.goodsid] = ret.goodstotal;\r\n    \r\n        that.setData({\r\n          numtotal: numbers,\r\n          main: main,\r\n          clearcart: true,\r\n          active: '', slider: 'out', isSelected: true, tempname: '', showPicker: false,\r\n          formdataval: {}\r\n        })\r\n        if (that.data.addtype == 'value') {\r\n          // that.animate(that.data.mouse)\r\n        }\r\n      }\r\n\r\n\r\n      // $this.setData({  });\r\n\r\n\r\n    })\r\n  },\r\n\r\n  //添加商品到购物车\r\n  addGoodToCartFn: function (e) {\r\n    app.checkAuth();\r\n    var that = this;\r\n    var modeltakeout = this.data.main.cartdata == 1 ? 'takeoutmodel' : 'shopmodel';\r\n    if (!e.currentTarget.dataset.canadd) {\r\n      modeltakeout = 'cantaddcart'\r\n    }\r\n  \r\n    that.setData({\r\n      morechose: e.currentTarget.dataset.more\r\n    })\r\n    // if(e.currentTarget.dataset.color!='#ccc') {\r\n    that.setData({\r\n      addtype: e.currentTarget.dataset.add,\r\n      goodsid: e.currentTarget.dataset.id,\r\n      mouse: e\r\n    })\r\n    if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n      that.setData({\r\n        addtype: 'delete'\r\n      })\r\n    }\r\n    // 如果有多规格减号\r\n    if (e.currentTarget.dataset.more == '1' && that.data.addtype == 'reduce') {\r\n      //如果点击减号且为多规格，提示在购物车中修改数量\r\n      foxui.toast(that, \"请在购物车中修改多规格商品\");\r\n    }\r\n    else if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n      foxui.toast(that, \"不能少于\" + e.currentTarget.dataset.min + \"件商品\");\r\n    }\r\n    // 如果是多规格或有自定义表单 加号\r\n    else if (e.currentTarget.dataset.more == '1' || e.currentTarget.dataset.diyformtype != '0' || !e.currentTarget.dataset.canadd) {\r\n      if (that.data.addtype != 'reduce' && that.data.addtype != 'delete') {\r\n        var goodslist = 'quickbuy';\r\n        that.setData({\r\n          showPicker: true,\r\n          cycledate: false\r\n        })\r\n        goodspicker.selectpicker(e, that, goodslist, modeltakeout);\r\n       \r\n\r\n      } else {\r\n        that.setData({\r\n          storenum: e.currentTarget.dataset.store,\r\n          maxnum: e.currentTarget.dataset.maxnum\r\n        })\r\n        that.addCartquick('', 1);\r\n      }\r\n    }\r\n\r\n    // 如果是单规格\r\n    if (e.currentTarget.dataset.more != '1' && e.currentTarget.dataset.diyformtype == '0' && e.currentTarget.dataset.canadd) {\r\n      that.setData({\r\n        storenum: e.currentTarget.dataset.store,\r\n        maxnum: e.currentTarget.dataset.maxnum\r\n      })\r\n      // 减号且不能再少\r\n      if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n        foxui.toast(that, \"不能少于\" + e.currentTarget.dataset.min + \"件商品\");\r\n      } else {\r\n        that.addCartquick('', 1);\r\n      }\r\n\r\n    }\r\n    // }\r\n  },\r\n\r\n  // 加购物车动画\r\n  animate: function (e) {\r\n    var that = this;\r\n\r\n    that.finger = {}; var topPoint = {};\r\n    that.finger['x'] = e.touches[\"0\"].clientX;//点击的位置\r\n    that.finger['y'] = e.touches[\"0\"].clientY;\r\n\r\n    if (that.finger['y'] < that.busPos['y']) {\r\n      topPoint['y'] = that.finger['y'] - 150;\r\n    } else {\r\n      topPoint['y'] = that.busPos['y'] - 150;\r\n    }\r\n    topPoint['x'] = Math.abs(that.finger['x'] - that.busPos['x']) / 2;\r\n\r\n    if (that.finger['x'] > that.busPos['x']) {\r\n      topPoint['x'] = (that.finger['x'] - that.busPos['x']) / 2 + that.busPos['x'];\r\n    } else {//\r\n      topPoint['x'] = (that.busPos['x'] - that.finger['x']) / 2 + that.finger['x'];\r\n    }\r\n\r\n    //topPoint['x'] = that.busPos['x'] + 80\r\n    //that.linePos = app.bezier([that.finger, topPoint, that.busPos], 30);\r\n    that.linePos = that.bezier([that.busPos, topPoint, that.finger], 30);\r\n    that.startAnimation(e);\r\n  },\r\n  bezier: function (pots, amount) {\r\n    var pot;\r\n    var lines;\r\n    var ret = [];\r\n    var points;\r\n    for (var i = 0; i <= amount; i++) {\r\n      points = pots.slice(0);\r\n      lines = [];\r\n      while (pot = points.shift()) {\r\n        if (points.length) {\r\n          lines.push(pointLine([pot, points[0]], i / amount));\r\n        } else if (lines.length > 1) {\r\n          points = lines;\r\n          lines = [];\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      ret.push(lines[0]);\r\n    }\r\n    function pointLine(points, rate) {\r\n      var pointA, pointB, pointDistance, xDistance, yDistance, tan, radian, tmpPointDistance;\r\n      var ret = [];\r\n      pointA = points[0];//点击\r\n      pointB = points[1];//中间\r\n      xDistance = pointB.x - pointA.x;\r\n      yDistance = pointB.y - pointA.y;\r\n      pointDistance = Math.pow(Math.pow(xDistance, 2) + Math.pow(yDistance, 2), 1 / 2);\r\n      tan = yDistance / xDistance;\r\n      radian = Math.atan(tan);\r\n      tmpPointDistance = pointDistance * rate;\r\n      ret = {\r\n        x: pointA.x + tmpPointDistance * Math.cos(radian),\r\n        y: pointA.y + tmpPointDistance * Math.sin(radian)\r\n      };\r\n      return ret;\r\n    }\r\n    return {\r\n      'bezier_points': ret\r\n    };\r\n  },\r\n  startAnimation: function (e) {\r\n    var index = 0, that = this,\r\n      bezier_points = that.linePos['bezier_points'];\r\n\r\n    this.setData({\r\n      hide_good_box: false,\r\n      bus_x: that.finger['x'],\r\n      bus_y: that.finger['y']\r\n    })\r\n    var len = bezier_points.length;\r\n    index = len\r\n    this.timer = setInterval(function () {\r\n      index--;\r\n      that.setData({\r\n        bus_x: bezier_points[index]['x'],\r\n        bus_y: bezier_points[index]['y']\r\n      })\r\n      if (index < 1) {\r\n        clearInterval(that.timer);\r\n        // that.addGoodToCartFn(e);\r\n        that.setData({\r\n          hide_good_box: true\r\n        })\r\n      }\r\n    }, 13);\r\n  },\r\n\r\n  //清空购物车\r\n  clearShopCartFn: function (e) {\r\n    var that = this;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    core.get('quick/index/clearCart', { quickid: id }, function (ret) {\r\n     \r\n      var main = that.data.main;\r\n      main.cartList = {\r\n        list: [],\r\n        total: 0,\r\n        totalprice: 0\r\n      };\r\n      var tempcartid = that.data.tempcartid\r\n      var arr = [];\r\n      // 这里有bug，清空购物车的时候遍历id数组，比当前有的id大的商品不在数组里所以要找到最大的id值将数组置为0\r\n      for (var i = 0; i < tempcartid.length; i++) {\r\n      \r\n        arr[Number(tempcartid[i])] = -1\r\n      \r\n      }\r\n      that.setData({\r\n        main: main,\r\n        clickCar: false,\r\n        numtotal: arr,\r\n        clearcart: false,\r\n        showPicker: false\r\n      })\r\n      \r\n    })\r\n  },\r\n\r\n  // 关闭多规格弹窗\r\n  closemulti: function () {\r\n    this.setData({\r\n      showPicker: false,\r\n      clickCar: false,\r\n      cycledate: true\r\n    })\r\n  },\r\n\r\n  // 结算\r\n  gopay: function () {\r\n    \r\n    var fromquick = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    if (!this.data.main.cartList.list.length) {\r\n      // 如果购物车中没有商品\r\n      foxui.toast(this, \"请先添加商品到购物车\");\r\n    } else {\r\n      wx.navigateTo({\r\n        url: '/pages/order/create/index?fromquick=' + fromquick\r\n      })\r\n    }\r\n  },\r\n  // 跳转到购物车\r\n  gotocart: function () {\r\n    const url = '/pages/member/cart/index'\r\n    wx.navigateTo({\r\n        url: url,\r\n        fail: function () {\r\n            wx.switchTab({\r\n              url: url,\r\n            })\r\n        }\r\n    })\r\n  },\r\n\r\n  // 购物车弹层加减商品\r\n  cartaddcart: function (e) {\r\n    var that = this;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    var opid = e.currentTarget.dataset.id == '0' ? e.currentTarget.dataset.goodsid : e.currentTarget.dataset.id;\r\n\r\n    var carttype = e.currentTarget.dataset.add;\r\n    var value = 1;\r\n    if (e.currentTarget.dataset.min == e.currentTarget.dataset.num && carttype == 'reduce') {\r\n      carttype = 'delete'\r\n    }\r\n\r\n    // 加入购物车\r\n    core.get('quick/index/update', {\r\n      quickid: id,\r\n      goodsid: e.currentTarget.dataset.goodsid,\r\n      optionid: e.currentTarget.dataset.id == '0' ? '' : e.currentTarget.dataset.id,\r\n      update: '',\r\n      total: '',\r\n      type: carttype,\r\n      typevalue: value,\r\n      // diyformdata: ''\r\n    }, function (ret) {\r\n      \r\n      if (ret.error == 0) {\r\n        var arr = that.data.cartcartArr;\r\n        arr[opid] = ret.goodsOptionTotal || ret.goodsOptionTotal == 0 ? ret.goodsOptionTotal : ret.goodstotal;\r\n\r\n        var main = that.data.main;\r\n        main.cartList.total = ret.total;\r\n        main.cartList.totalprice = ret.totalprice;\r\n\r\n        var numbers = that.data.numtotal;\r\n        numbers[e.currentTarget.dataset.goodsid] = ret.goodstotal;\r\n\r\n        that.setData({\r\n          cartcartArr: arr,\r\n          main: main,\r\n          numtotal: numbers\r\n        })\r\n      } else {\r\n        foxui.toast(that, ret.message);\r\n      }\r\n    })\r\n  },\r\n\r\n  // 右侧主体滚动事件\r\n  scrollfn: function (e) {\r\n  \r\n    var that = this;\r\n    var arrtemp = this.data.arrLab;\r\n    for (var i = 0; i < that.data.arrscroll.length; i++) {\r\n      arrtemp[i] = 0;\r\n      if (Math.abs(e.detail.scrollTop - that.data.arrscroll[i]) < 26) {\r\n\r\n        arrtemp[i] = 1;\r\n        this.setData({\r\n          arrLab: arrtemp\r\n        })\r\n        break;\r\n      }\r\n\r\n    }\r\n  },\r\n  onShareAppMessage: function (res) {\r\n\r\n  }\r\n})","// pages/sale/coupon/my/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","\r\n// private property  \r\nvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n\r\n// private method for UTF-8 encoding  \r\nvar _utf8_encode = function (string) {\r\n\tstring = string.replace(/\\r\\n/g, \"\\n\");\r\n\tvar utftext = \"\";\r\n\tfor (var n = 0; n < string.length; n++) {\r\n\t\tvar c = string.charCodeAt(n);\r\n\t\tif (c < 128) {\r\n\t\t\tutftext += String.fromCharCode(c);\r\n\t\t} else if ((c > 127) && (c < 2048)) {\r\n\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\r\n\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t} else {\r\n\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\r\n\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t}\r\n\r\n\t}\r\n\treturn utftext;\r\n}\r\n\r\n// private method for UTF-8 decoding  \r\nvar _utf8_decode = function (utftext) {\r\n\tvar string = \"\";\r\n\tvar i = 0,c = 0,c1 = 0,c2 = 0,c3 = 0;\r\n\twhile (i < utftext.length) {\r\n\t\tc = utftext.charCodeAt(i);\r\n\t\tif (c < 128) {\r\n\t\t\tstring += String.fromCharCode(c);\r\n\t\t\ti++;\r\n\t\t} else if ((c > 191) && (c < 224)) {\r\n\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\ti += 2;\r\n\t\t} else {\r\n\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\tc3 = utftext.charCodeAt(i + 2);\r\n\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\ti += 3;\r\n\t\t}\r\n\t}\r\n\treturn string;\r\n}\r\n\r\n// public method for encoding  \r\nmodule.exports.encode = function (input) {\r\n\tvar output = \"\";\r\n\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n\tvar i = 0;\r\n\tinput = _utf8_encode(input);\r\n\twhile (i < input.length) {\r\n\t\tchr1 = input.charCodeAt(i++);\r\n\t\tchr2 = input.charCodeAt(i++);\r\n\t\tchr3 = input.charCodeAt(i++);\r\n\t\tenc1 = chr1 >> 2;\r\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n\t\tenc4 = chr3 & 63;\r\n\t\tif (isNaN(chr2)) {\r\n\t\t\tenc3 = enc4 = 64;\r\n\t\t} else if (isNaN(chr3)) {\r\n\t\t\tenc4 = 64;\r\n\t\t}\r\n\t\toutput = output +\r\n\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\r\n\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\r\n\t}\r\n\treturn output;\r\n}\r\n\r\n// public method for decoding  \r\nmodule.exports.decode = function (input) {\r\n\tvar output = \"\";\r\n\tvar chr1, chr2, chr3;\r\n\tvar enc1, enc2, enc3, enc4;\r\n\tvar i = 0;\r\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\twhile (i < input.length) {\r\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\r\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\r\n\t\toutput = output + String.fromCharCode(chr1);\r\n\t\tif (enc3 != 64) {\r\n\t\t\toutput = output + String.fromCharCode(chr2);\r\n\t\t}\r\n\t\tif (enc4 != 64) {\r\n\t\t\toutput = output + String.fromCharCode(chr3);\r\n\t\t}\r\n\t}\r\n\toutput = _utf8_decode(output);\r\n\treturn output;\r\n}  ","var app = getApp();\r\nvar core = app.requirejs('core');\r\nmodule.exports.getAreas = function(callback){\r\n\r\n    core.get('shop/get_areas',{}, function(ret){\r\n \r\n\r\n        var provinces =[];\r\n        \r\n        for(var i in  ret.areas.province){\r\n            if(i==0){\r\n                continue;\r\n            }\r\n            var province_name =ret.areas.province[i]['@attributes']['name'];\r\n            //provinces.push( province_name);\r\n            \r\n            var citys = [];\r\n            for(var j in ret.areas.province[i].city){\r\n               if(j==0){\r\n                 continue;\r\n               }\r\n               var countys = [];\r\n               var city_name =ret.areas.province[i].city[j]['name'];\r\n               for(var k in ret.areas.province[i].city[j].county){\r\n                     if( ret.areas.province[i].city[j].county[k].hasOwnProperty('@attributes')){\r\n                          var county_name =ret.areas.province[i].city[j].county[k]['@attributes']['name'];\r\n                      } else{\r\n                          var county_name =ret.areas.province[i].city[j].county[k]['name'];\r\n                      }\r\n                      countys.push(county_name );\r\n               }\r\n               citys.push( { city_name : countys });\r\n            }\r\n\r\n            provinces.push({ province_name : citys});\r\n \r\n\r\n        }\r\n        if(typeof(callback)==='function'){\r\n            callback(ret.areas);\r\n        }\r\n\r\n    })\r\n\r\n}","//购物车\r\nmodule.exports.add = function (id) {\r\n    \r\n};","var app=getApp(),$ = app.requirejs('jquery'),core = app.requirejs('core'),foxui = app.requirejs('foxui');\r\nmodule.exports = {\r\n    getIndex: function (str, areas) {\r\n        if($.trim(str)=='' || !$.isArray(areas)){\r\n            return [0,0,0];\r\n        }\r\n        var arr = str.split(\" \");\r\n        var index = [0,0,0];\r\n        for (var i in areas){\r\n            if(areas[i].name==arr[0]){\r\n                index[0] = Number(i);\r\n                for (var ii in areas[i].city){\r\n                    if(areas[i].city[ii].name==arr[1]){\r\n                        index[1] = Number(ii);\r\n                        for (var iii in areas[i].city[ii].area){\r\n                            if(areas[i].city[ii].area[iii].name==arr[2]){\r\n                                index[2] = Number(iii);\r\n                                break;\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return index;\r\n    },\r\n    onConfirm: function ($this, e) {\r\n        var val = $this.data.pval;\r\n        var field = $this.data.bindAreaField;\r\n        var data = $.isEmptyObject($this.data.diyform.f_data)?{}:$this.data.diyform.f_data;\r\n        var areas = $this.data.areas;\r\n        data[field] = data[field] || {};\r\n        data[field].province = areas[val[0]].name;\r\n        data[field].city = areas[val[0]].city[val[1]].name;\r\n\r\n        // if ($this.data.areaKey){\r\n        //   var areaObj = {\r\n        //     province: areas[val[0]].name,\r\n        //     city: areas[val[0]].city[val[1]].name\r\n        //   };\r\n        // }\r\n\r\n        if ($this.data.areaKey) {\r\n          var areaObj = $this.data.areaDetail[$this.data.areaKey]\r\n          areaObj.province = areas[val[0]].name;\r\n          areaObj.city = areas[val[0]].city[val[1]].name;\r\n        }\r\n\r\n        if(!$this.data.noArea){\r\n            data[field].area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n            if ($this.data.areaKey){\r\n              areaObj.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n            }\r\n        }\r\n        \r\n        $this.setData({\"diyform.f_data\": data, showPicker: false, bindAreaField: false});\r\n\r\n        if ($this.data.areaKey){\r\n          var areaDetail = $this.data.areaDetail || {};\r\n          areaDetail[$this.data.areaKey] = areaObj;\r\n          $this.setData({areaDetail: areaDetail});\r\n\r\n\r\n        }\r\n    },\r\n    onCancel: function ($this, e) {\r\n        $this.setData({showPicker: false});\r\n    },\r\n    onChange: function ($this, e) {\r\n        var value = e.detail.value;\r\n        var type = core.pdata(e).type;\r\n        var postData = $this.data.postData;\r\n        postData[type] = $.trim(value);\r\n        $this.setData({postData: postData});\r\n    },\r\n    bindChange: function($this, e) {\r\n        var oldValue = $this.data.pvalOld;\r\n        var newValue = e.detail.value;\r\n        if(oldValue[0]!=newValue[0]){\r\n            newValue[1] = 0;\r\n        }\r\n        if(oldValue[1]!=newValue[1]){\r\n            newValue[2] = 0;\r\n        }\r\n        $this.setData({pval: newValue, pvalOld: newValue});\r\n    },\r\n    selectArea: function ($this, e) {\r\n        var area = e.currentTarget.dataset.area;\r\n        var field = e.currentTarget.dataset.field;\r\n        var noArea = e.currentTarget.dataset.hasarea==1?false:true;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        // 自定义区域key\r\n        var areaKey = e.currentTarget.dataset.areakey;\r\n        var obj = {pval: index, pvalOld: index, showPicker: true, noArea: noArea, bindAreaField: field};\r\n        if (areaKey){\r\n          obj.areaKey = areaKey;\r\n        }\r\n        $this.setData(obj);\r\n    },\r\n    DiyFormHandler: function($this, e){\r\n        var dataset = e.target.dataset;\r\n        var type = dataset.type;\r\n        var field = dataset.field;\r\n        var data_type = dataset.datatype;\r\n        var data = $this.data.diyform.f_data;\r\n\r\n        if($.isArray(data) || typeof(data) !='object'){\r\n            data = {};\r\n        }\r\n        var fields =$this.data.diyform.fields;\r\n        if(type=='input' || type=='textarea' || type=='checkbox' || type=='date' || type=='datestart' || type=='dateend' || type=='time' || type=='timestart' || type=='timeend' || type=='radio'){\r\n            if(type=='datestart' || type=='timestart'){\r\n                if(!$.isArray(data[field])){\r\n                    data[field] = [];\r\n                }\r\n                data[field][0] = e.detail.value;\r\n            }else if(type=='dateend' || type=='timeend'){\r\n                if(!$.isArray(data[field])){\r\n                    data[field] = [];\r\n                }\r\n                data[field][1] = e.detail.value;\r\n            }else if(type=='checkbox'){\r\n                data[field] = {};\r\n                for (var ii in e.detail.value){\r\n                    var  val = e.detail.value[ii];\r\n                    data[field][val] = 1\r\n                }\r\n            }else if(type=='radio'){\r\n                data[field] = e.detail.value;\r\n            }else{\r\n                if(data_type==10){\r\n                    if ($.isEmptyObject(data[field])){\r\n                        data[field] = {};\r\n                    }\r\n                    data[field][dataset.name] = e.detail.value;\r\n                }else{\r\n                    data[field] = e.detail.value;\r\n                }\r\n            }\r\n        }else if(type=='picker'){\r\n            for(var i in data){\r\n                if( i== field){\r\n                    for(var j in  fields){\r\n                        if( fields[j].diy_type==field ){\r\n                            data[field] = [ e.detail.value, fields[j].tp_text[e.detail.value] ]\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }else if(type=='image'){\r\n            core.upload(function(file){\r\n                for(var i in data){\r\n                    if( i == field){\r\n                        if(!data[field]){\r\n                            data[field] = {};\r\n                        }\r\n                        if(!data[field].images){\r\n                            data[field].images = [];\r\n                        }\r\n                        data[field].images.push({'url': file.url ,'filename': file.filename});\r\n                        break;\r\n                    }\r\n                }\r\n                data[field].count = data[field].images.length;\r\n                $this.setData({\"diyform.f_data\": data});\r\n            });\r\n        }else if(type=='image-remove'){\r\n            for(var i in data){\r\n                if( i == field){\r\n                    var newdata = { images:[] };\r\n                    for(var j in data[field].images){\r\n                        if( data[field].images[j].filename!= dataset.filename ){\r\n                            newdata.images.push( data[field].images[j] );\r\n                        }\r\n                    }\r\n                    newdata.count = newdata.images.length;\r\n                    data[field] =newdata;\r\n                    break;\r\n                }\r\n            }\r\n        }else if(type=='image-preview'){\r\n            for(var i in data){\r\n                if( i == field){\r\n                    var images = [];\r\n                    for(var j in data[field].images){\r\n                        images.push( data[field].images[j].url);\r\n                    }\r\n                    wx.previewImage({\r\n                        current: images[dataset.index],\r\n                        urls: images\r\n                    })\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        $this.setData({\"diyform.f_data\": data});\r\n    },\r\n    verify: function ($this, diyform) {\r\n        for (var index in diyform.fields){\r\n            var field = diyform.fields[index];\r\n            var type = field.diy_type;\r\n            if(field.tp_must==1){\r\n                if(field.data_type==5){\r\n                    if(!diyform.f_data[type] || diyform.f_data[type].count<1){\r\n                        foxui.toast($this, \"请选择\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                }\r\n                else if(field.data_type==9){\r\n                    if($.isEmptyObject(diyform.f_data[type])||!diyform.f_data[type].province||!diyform.f_data[type].city){\r\n                        foxui.toast($this, \"请选择\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                }\r\n                else if(field.data_type==10){\r\n                    if($.isEmptyObject(diyform.f_data[type]) || !diyform.f_data[type].name1){\r\n                        foxui.toast($this, \"请填写\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                    if(!diyform.f_data[type].name2 || diyform.f_data[type].name2==''){\r\n                        foxui.toast($this, \"请填写\"+field.tp_name2)\r\n                        return false;\r\n                    }\r\n                } else if (field.data_type == 11){\r\n                  if (!diyform.f_data[type]) {\r\n                    foxui.toast($this, \"请填写\" + field.tp_name);\r\n                    return false;\r\n                  }\r\n                } else if (field.data_type == 3){\r\n                  if (!diyform.f_data[type] || JSON.stringify(diyform.f_data[type]) == '{}') {\r\n                    foxui.toast($this, \"请填写\" + field.tp_name);\r\n                    return false;\r\n                  }\r\n                }\r\n                else{\r\n                    if(!diyform.f_data[type]){\r\n                        foxui.toast($this, \"请填写\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            if(field.data_type==6){\r\n                var reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\r\n                if (!reg.test(diyform.f_data[type])) {\r\n                    foxui.toast($this, \"请填写正确的\"+field.tp_name);\r\n                    return false;\r\n                }\r\n            }\r\n            if(field.data_type==10){\r\n                if($.isEmptyObject(diyform.f_data[type]) || diyform.f_data[type].name1 != diyform.f_data[type].name2){\r\n                    foxui.toast($this, field.tp_name+\"与\"+field.tp_name2+\"不一致\")\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n};","var app = getApp(), $ = app.requirejs('jquery'), core = app.requirejs('core'), foxui = app.requirejs('foxui');\r\nmodule.exports = {  \r\n  get:function($this, type, callback){\r\n    var self = this;\r\n    core.get('diypage', {type: type}, function (result) {\r\n     \r\n      result.diypage = result.diypage || {};\r\n      for (var i in result.diypage.items){\r\n        if (result.diypage.items[i].id == 'topmenu'){\r\n          $this.setData({ topmenu: result.diypage.items[i]})\r\n        } \r\n      }\r\n      // $this.setData({\r\n      //   customer: result.customer,\r\n      //   phone: result.phone,\r\n      //   phonecolor: result.phonecolor,\r\n      //   phonenumber: result.phonenumber,\r\n      //   customercolor: result.customercolor\r\n      // })\r\n      var customData = {};\r\n      if (result.customer){\r\n        customData.customer = result.customer\r\n      }\r\n      if (result.phone) {\r\n        customData.phone = result.phone\r\n      }\r\n      if (result.phonecolor) {\r\n        customData.phonecolor = result.phonecolor\r\n      }\r\n      if (result.phonenumber) {\r\n        customData.phonenumber = result.phonenumber\r\n      }\r\n      if (result.customercolor) {\r\n        customData.customercolor = result.customercolor\r\n      }\r\n      if (customData){\r\n        $this.setData(customData)\r\n      }\r\n      // var data = {loading: false,diypages: result.diypage, pages: result.diypage.page, usediypage: true,startadv: result.startadv};\r\n      var data = { loading: false, pages: result.diypage.page, usediypage: true, startadv: result.startadv }\r\n  \r\n      if (result.diypage.page){\r\n        $this.setData({\r\n          diytitle: result.diypage.page.title,\r\n        });\r\n      }\r\n      if (result.error!=0){\r\n        $this.setData({\r\n          diypages:false,\r\n          loading: false\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (result.diypage.items != undefined) {\r\n        var arr = [];\r\n        $.each(result.diypage.items, function (id, item) {\r\n          arr.push(item.id);\r\n          if (item.id == 'topmenu') {\r\n            if (item.style.showtype == 2){\r\n              var l = Math.ceil(item.data.length / 4);\r\n              var topmenuheight = 78 * l;\r\n              $this.setData({ topmenuheight: topmenuheight });\r\n            }else{\r\n              var topmenuheight = 78 ;\r\n              $this.setData({ topmenuheight: topmenuheight });\r\n            }\r\n            $this.setData({ topmenu: item, istopmenu: true});\r\n            if (item.data[0] == undefined){\r\n              var linkurl = '';\r\n            }else{\r\n              var linkurl = item.data[0].linkurl;\r\n              core.get('diypage/getInfo', { dataurl: linkurl }, function (ret) {\r\n                item.data[0].data = ret.goods.list;\r\n                data.diypages = result.diypage;\r\n                data.topmenuDataType = ret.type;\r\n                $this.setData(data);\r\n              });\r\n            }\r\n            \r\n          \r\n          } else if (item.id == 'tabbar') {\r\n            if (item.data[0] == undefined) {\r\n              var linkurl = '';\r\n            } else { \r\n              var linkurl = item.data[0].linkurl;  \r\n                core.get('diypage/getInfo', { dataurl: linkurl }, function (ret) {\r\n                  item.data[0].data = ret.goods.list\r\n                  item.type = ret.type;\r\n                  // var diypages = item; \r\n                  if (item.data[0].data !== undefined){\r\n                    if (item.data[0].data.length == ret.goods.count) {\r\n                      item.data[0].showmore = true;\r\n                    }\r\n                  }else{\r\n                    item.data[0].showmore = false;\r\n                  }\r\n                  data.diypages = result.diypage;\r\n                  data.tabbarDataType = ret.type;\r\n                  data.tabbarData = ret.goods;\r\n                  $this.setData(data);\r\n                });\r\n               \r\n            }\r\n          }\r\n        });\r\n   \r\n        wx.setNavigationBarTitle({\r\n          title: data.pages.title\r\n        });\r\n        wx.setNavigationBarColor({\r\n          frontColor: data.pages.titlebarcolor,\r\n          backgroundColor: data.pages.titlebarbg\r\n        });\r\n  \r\n        if (callback) {\r\n          callback(result);\r\n        }\r\n        if(arr.indexOf('topmenu') != -1 || arr.indexOf('tabbar') != -1){\r\n          return\r\n        }\r\n        data.diypages = result.diypage;\r\n        $this.setData(data);\r\n      }\r\n      wx.setNavigationBarTitle({\r\n        title:data.pages.title\r\n      });\r\n      wx.setNavigationBarColor({\r\n        frontColor: data.pages.titlebarcolor,\r\n        backgroundColor: data.pages.titlebarbg\r\n      });\r\n      if (callback){\r\n        callback(result);\r\n      }\r\n    });\r\n  }\r\n \r\n}","var app = getApp(), $ = app.requirejs('jquery'), core = app.requirejs('core'), foxui = app.requirejs('foxui'),diyform = app.requirejs('biz/diyform');\r\nmodule.exports = {\r\n  number: function (e,$this) {\r\n    var dataset = core.pdata(e), val = foxui.number($this, e), id = dataset.id, optionid = dataset.optionid, min = dataset.min, max = dataset.max;\r\n    if ((val == 1 && dataset.value == 1 && e.target.dataset.action == 'minus') || (val < min && e.target.dataset.action == 'minus')){\r\n      foxui.toast($this, \"单次最少购买\" + dataset.value + '件');\r\n      return;\r\n    }\r\n    if (dataset.value == dataset.max && e.target.dataset.action == 'plus'){\r\n      return;\r\n    }\r\n    if (parseInt($this.data.stock) < parseInt(val)) {\r\n      foxui.toast($this, \"库存不足\");\r\n      return;\r\n      }\r\n    $this.setData({ total:val});\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e,$this) {\r\n    var maxbuy = $this.data.goods.maxbuy;\r\n    var minbuy = $this.data.goods.minbuy;\r\n    var total = e.detail.value;\r\n    if (total > 0) {\r\n      if (maxbuy > 0 && maxbuy <= parseInt(e.detail.value)) {\r\n        total = maxbuy;\r\n        foxui.toast($this, \"单次最多购买\" + maxbuy + '件');\r\n      }\r\n      if (minbuy > 0 && minbuy > parseInt(e.detail.value)) {\r\n        total = minbuy;\r\n        foxui.toast($this, \"单次最少购买\" + minbuy + '件');\r\n      }\r\n      if (parseInt($this.data.stock) < parseInt(total)) {\r\n        foxui.toast($this, \"库存不足\");\r\n        return;\r\n      }\r\n    } else {\r\n      if (minbuy > 0) {\r\n        total = minbuy;\r\n      } else {\r\n        total = 1;\r\n      }\r\n    }\r\n    $this.setData({ total: total });\r\n  },\r\n  chooseGift(e,$this) {\r\n    \r\n    $this.setData({ giftid: e.currentTarget.dataset.id })\r\n  },\r\n  //立即购买\r\n  buyNow: function (event,$this,page) {\r\n    if (event.currentTarget.dataset.type) {\r\n      page = event.currentTarget.dataset.type\r\n    }\r\n    var optionid = $this.data.optionid;\r\n    var hasOption = $this.data.goods.hasoption;\r\n    var diydata = $this.data.diyform;\r\n    var giftid = $this.data.giftid;\r\n    \r\n    //判断周期购\r\n    if($this.data.goods.type == 9){\r\n      var selectDate = $this.data.checkedDate / 1000;\r\n    }\r\n\r\n    //是否有规格\r\n    if (hasOption > 0 && !optionid) {\r\n      foxui.toast($this, \"请选择规格\");\r\n      return;\r\n    }\r\n    //是否存在自定义表单\r\n    if (diydata && diydata.fields.length > 0) {\r\n  \r\n      var verify = diyform.verify($this,diydata);\r\n      if (!verify){\r\n        return;\r\n      } else {\r\n      \r\n        core.post('order/create/diyform',{\r\n          id: $this.data.id,\r\n          diyformdata: diydata.f_data\r\n        },function (ret) {\r\n          if ($this.data.goods.isgift == 0 || page!='goods_detail') {\r\n            wx.redirectTo({\r\n              url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&gdid=' + ret.gdid + '&selectDate=' + selectDate,\r\n            });\r\n          } else {\r\n            if (giftid) {\r\n              wx.redirectTo({\r\n                url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&gdid=' + ret.gdid + '&giftid=' + giftid,\r\n              });\r\n            }\r\n             else if (giftid != \"\") {//如果选择了赠品或者赠品只有一个\r\n              if ($this.data.goods.giftinfo && $this.data.goods.giftinfo.length == 1) {\r\n                giftid = $this.data.goods.giftinfo[0].id\r\n              }\r\n              if ($this.data.goods.gifts && $this.data.goods.gifts.length == 1) {\r\n                  giftid = $this.data.goods.gifts[0].id//如果赠品只有一个  赋值giftid\r\n                }\r\n                wx.redirectTo({\r\n                  url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&gdid=' + ret.gdid + '&giftid=' + giftid,\r\n                });\r\n              }else{\r\n                foxui.toast($this, \"请选择赠品\");\r\n              }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      if (giftid) {\r\n        wx.navigateTo({\r\n          url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&giftid=' + giftid,\r\n        });\r\n      }\r\n      else if ($this.data.goods.isgift == 0 || page != 'goods_detail'){\r\n        wx.navigateTo({\r\n          url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&selectDate=' + selectDate,\r\n        });\r\n      }else{\r\n        if (giftid != \"\") {\r\n          if ($this.data.goods.giftinfo && $this.data.goods.giftinfo.length == 1) {\r\n            giftid = $this.data.goods.giftinfo[0].id\r\n          }\r\n          if ($this.data.goods.gifts && $this.data.goods.gifts.length == 1) {\r\n            giftid = $this.data.goods.gifts[0].id;\r\n          }\r\n          wx.navigateTo({\r\n            url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&giftid=' + giftid,\r\n          });\r\n        } else {\r\n          foxui.toast($this, \"请选择赠品\");\r\n        }\r\n      }\r\n    }\r\n  },\r\n  // //加入购物车\r\n  getCart: function (event,$this){\r\n    var optionid = $this.data.optionid;\r\n    \r\n    \r\n    var hasOption = $this.data.goods.hasoption;\r\n    var diydata = $this.data.diyform;\r\n\r\n\r\n    //是否有规格\r\n    if (hasOption > 0 && !optionid) {\r\n      foxui.toast($this, \"请选择规格\");\r\n      return;\r\n    }\r\n    if ($this.data.quickbuy) {\r\n     \r\n      \r\n      \r\n      //是否存在自定义表单\r\n      if (diydata && diydata.fields.length > 0) {\r\n        var verify = diyform.verify($this, diydata);\r\n        if (!verify) {\r\n          return;\r\n        } else {\r\n          // 设置值存储自定义表单\r\n          $this.setData({\r\n            formdataval: {\r\n              diyformdata: diydata.f_data\r\n            }\r\n          })\r\n         \r\n        }\r\n      }\r\n\r\n\r\n      $this.addCartquick(optionid, $this.data.total)\r\n      \r\n    } else {\r\n      \r\n      //是否存在自定义表单\r\n      if (diydata && diydata.fields.length > 0) {\r\n        var verify = diyform.verify($this, diydata);\r\n        if (!verify) {\r\n          return;\r\n        } else {\r\n          // 先提交至diyform_temp\r\n          core.post('order/create/diyform', {\r\n            id: $this.data.id,\r\n            diyformdata: diydata.f_data\r\n          }, function (ret) {\r\n            \r\n            core.post('member/cart/add', {\r\n              id: $this.data.id,\r\n              total: $this.data.total,\r\n              optionid: optionid,\r\n              diyformdata: diydata.f_data\r\n            }, function (ret) {\r\n              if (ret.error == 0) {\r\n                $this.setData({\r\n                  'goods.carttotal': ret.carttotal,\r\n                  active: '',\r\n                  slider: 'out',\r\n                  isSelected: true,\r\n                  tempname: ''\r\n                });\r\n                foxui.toast($this, \"添加成功\");\r\n              }else{\r\n                foxui.toast($this, ret.message);\r\n                return;\r\n              }\r\n            });\r\n          });\r\n        }\r\n      } else {\r\n        core.post('member/cart/add', {\r\n          id: $this.data.id,\r\n          total: $this.data.total,\r\n          optionid: optionid\r\n        }, function (ret) {\r\n          if (ret.error == 0) {\r\n            foxui.toast($this, \"添加成功\");\r\n            var tempdata = $this.data.goods;\r\n            $this.setData({ 'goods.carttotal': ret.carttotal, active: '', slider: 'out', isSelected: true, tempname: '',goods: tempdata });\r\n          }else{\r\n            foxui.toast($this, ret.message);\r\n            return;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    \r\n\r\n\r\n\r\n    \r\n  },\r\n  selectpicker: function (e, $this, page, modeltakeout) {\r\n    if(e.currentTarget.dataset.home==1) {\r\n      $this.setData({ giftid: '', })\r\n    }\r\n    app.checkAuth();\r\n     \r\n    $this.setData({ optionid: '', specsData: '', specsTitle: '', 'goods.member_discount':''}); \r\n    var active = $this.data.active\r\n    var id = e.currentTarget.dataset.id\r\n    if (active =='') {\r\n      $this.setData({slider:'in', show:true})\r\n    }\r\n   \r\n    core.get('goods/get_picker', {id:id }, function (result) {\r\n      if (!result.goods.presellstartstatus && result.goods.presellstartstatus != undefined && result.goods.ispresell == '1'){\r\n        foxui.toast($this, result.goods.presellstatustitle);\r\n        return;\r\n      }\r\n      if (!result.goods.presellendstatus && result.goods.presellstartstatus != undefined && result.goods.ispresell == '1') {\r\n        foxui.toast($this, result.goods.presellstatustitle);\r\n        return;\r\n      }\r\n      if (result.goods && result.goods.giftinfo) {\r\n      \r\n        if (result.goods.giftinfo.length ==1) {\r\n          $this.setData({ giftid: result.goods.giftinfo[0].id })\r\n        }\r\n      }\r\n      var options = result.options;  \r\n      if(page=='goodsdetail'){\r\n        $this.setData({\r\n          pickerOption: result,\r\n          canbuy: $this.data.goods.canbuy,\r\n          buyType: e.currentTarget.dataset.buytype,\r\n          options: options,\r\n          minpicker: page,\r\n          \"goods.thistime\": result.goods.thistime,\r\n        });\r\n        if (result.goods.minbuy != 0 && $this.data.total < result.goods.minbuy) {\r\n          var total = result.goods.minbuy\r\n        } else {\r\n          var total = $this.data.total\r\n        }    \r\n      }else{\r\n        $this.setData({\r\n          pickerOption: result,\r\n          goods: result.goods,\r\n          options: options,\r\n          minpicker: page,\r\n        });\r\n        // var tempdata = $this.data.goods;\r\n        // tempdata.optionid = false;\r\n        // var goods = $this.data.goods;\r\n       \r\n        $this.setData({\r\n          optionid: false,\r\n          specsData: [],\r\n          specs: []\r\n        })\r\n        \r\n        if (result.goods.minbuy != 0 && $this.data.total < result.goods.minbuy) {\r\n          var total = result.goods.minbuy\r\n        } else {\r\n          var total = 1\r\n        }\r\n      } \r\n      \r\n      if (result.diyform) {\r\n        $this.setData({\r\n          diyform: { fields: result.diyform.fields, f_data: result.diyform.lastdata }\r\n        });\r\n      }\r\n      $this.setData({\r\n        id: id,\r\n        pagepicker: page,\r\n        total: total,\r\n        tempname: 'select-picker',\r\n        active: 'active',\r\n        show: true,\r\n        modeltakeout: modeltakeout\r\n      })\r\n    });\r\n  },\r\n  //此方法处理sort方法判断的时候,根据第一个数字的大小来排序导致错误.例如 1456<945; author by sunc;\r\n  sortNumber:function(a,b){\r\n    return (a - b);\r\n  },\r\n  //选规格\r\n  specsTap:function (event, $this){ \r\n    var specs = $this.data.specs;\r\n    var idx = event.target.dataset.idx;\r\n    specs[idx] ={id: event.target.dataset.id, title: event.target.dataset.title };\r\n    var title ='';\r\n    var optionTitle = '';\r\n    var optionids = [];\r\n    specs.forEach(function (e){\r\n      title += e.title + ';';\r\n      // optionTitle += e.id + '_';\r\n      optionids.push(e.id);\r\n    });\r\n    // var newOptionids = optionids.sort();\r\n    var newOptionids = optionids.sort(this.sortNumber);\r\n    optionTitle = newOptionids.join('_');\r\n    // optionTitle = optionTitle.substring(0, optionTitle.length - 1);\r\n    var options = $this.data.options;\r\n    if (event.target.dataset.thumb != '') {\r\n      $this.setData({\r\n        'goods.thumb': event.target.dataset.thumb,\r\n      })\r\n    }\r\n  \r\n    options.forEach(function (e){\r\n    \r\n      if (e.specs == optionTitle) {\r\n        $this.setData({\r\n          optionid: e.id,\r\n          'goods.total': e.stock,\r\n          'goods.maxprice': e.marketprice,\r\n          'goods.minprice': e.marketprice,\r\n          'goods.marketprice': e.marketprice,\r\n          'goods.member_discount': e.member_discount,\r\n          'goods.seecommission': e.seecommission,\r\n          'goods.presellprice': $this.data.goods.ispresell > 0 ? e.presellprice : $this.data.goods.presellprice,\r\n          optionCommission:true\r\n        });\r\n      \r\n        if (parseInt(e.stock) < parseInt($this.data.total)) {\r\n          $this.setData({\r\n            canBuy: '库存不足',\r\n            stock: e.stock\r\n          })\r\n          foxui.toast($this, \"库存不足\");\r\n        } else {\r\n          $this.setData({\r\n            canBuy:'',\r\n            stock: e.stock\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n    $this.setData({\r\n      specsData:specs,\r\n      specsTitle: title,\r\n    });\r\n  },\r\n\r\n}\r\n\r\n","/**\r\n *\r\n * order.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-15\r\n *\r\n */\r\nvar app = getApp(), core = app.requirejs('core');\r\nmodule.exports = {\r\n    url:function (url) {\r\n        wx.redirectTo({\r\n            url: url\r\n        })\r\n    },\r\n    cancelArray: ['我不想买了', '信息填写错误，重新拍', '同城见面交易', '其他原因'],\r\n    order: [\r\n        '确认要取消该订单吗?',\r\n        '确认要删除该订单吗?',\r\n        '确认要彻底删除该订单吗?',\r\n        '确认要恢复该订单吗?',\r\n        '确认已收到货了吗?',\r\n        '确定您要取消申请?'\r\n    ],\r\n    cancel: function (id, index,url) {\r\n        var $this=this,remark = this.cancelArray[index];\r\n        core.post('groups/order/cancel', { id: id, cancel_reason: remark}, function (data) {\r\n            if (data.error == 0) {\r\n                $this.url(url);\r\n            }\r\n        }, true);\r\n    },\r\n    delete: function (id, userdeleted,url,self) {\r\n        var $this=this;\r\n        core.confirm(userdeleted==0?this.order[3]:this.order[userdeleted],function () {\r\n            core.post('order/op/delete', {id: id, userdeleted: userdeleted}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof self != 'undefined'){\r\n                        self.setData({\r\n                            page:1,\r\n                            list:[]\r\n                        });\r\n                        self.get_list()\r\n                    }else{\r\n                        $this.url(url);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    finish: function (id,url) {\r\n        var $this=this;\r\n        core.confirm(this.order[4],function () {\r\n            core.post('order/op/finish', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    $this.url(url);\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    refundcancel:function (id,callback) {\r\n        var $this=this;\r\n        core.confirm(this.order[5],function () {\r\n            core.post('order/refund/cancel', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof callback == 'function'){\r\n                        callback();\r\n                    }else{\r\n                        $this.url(callback);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    codeshow: function (page,e) {\r\n        var orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    codehidden: function (page) {\r\n        page.setData({\r\n            code: false,\r\n        })\r\n    },\r\n};","/**\r\n *\r\n * order.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-15\r\n *\r\n */\r\nvar app = getApp(), core = app.requirejs('core');\r\nmodule.exports = {\r\n    url:function (url) {\r\n        wx.redirectTo({\r\n            url: url\r\n        })\r\n    },\r\n    cancelArray: ['我不想买了', '信息填写错误，重新拍', '同城见面交易', '其他原因'],\r\n    order: [\r\n        '确认要取消该订单吗?',\r\n        '确认要删除该订单吗?',\r\n        '确认要彻底删除该订单吗?',\r\n        '确认要恢复该订单吗?',\r\n        '确认已收到货了吗?',\r\n        '确定您要取消申请?'\r\n    ],\r\n    cancel: function (id, index,url) {\r\n        var $this=this,remark = this.cancelArray[index];\r\n        core.post('order/op/cancel', {id: id, remark: remark}, function (data) {\r\n            if (data.error == 0) {\r\n                $this.url(url);\r\n            }\r\n        }, true);\r\n    },\r\n    delete: function (id, userdeleted,url,self) {\r\n        var $this=this;\r\n        core.confirm(userdeleted==0?this.order[3]:this.order[userdeleted],function () {\r\n            core.post('order/op/delete', {id: id, userdeleted: userdeleted}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof self != 'undefined'){\r\n                        self.setData({\r\n                            page:1,\r\n                            list:[]\r\n                        });\r\n                        self.get_list()\r\n                    }else{\r\n                        $this.url(url);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    finish: function (id,url) {\r\n        var $this=this;\r\n        core.confirm(this.order[4],function () {\r\n            core.post('order/op/finish', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    $this.url(url);\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    refundcancel:function (id,callback) {\r\n        var $this=this;\r\n        core.confirm(this.order[5],function () {\r\n            core.post('order/refund/cancel', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof callback == 'function'){\r\n                        callback();\r\n                    }else{\r\n                        $this.url(callback);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    codeshow: function (page,e) {\r\n        var orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    codehidden: function (page) {\r\n        page.setData({\r\n            code: false,\r\n        })\r\n    },\r\n};","/**\r\n * Created by ELINKINT on 2018/3/9.\r\n */\r\nmodule.exports = {\r\n    //时间选择器 前后月份选择\r\n    doDay: function (e,$this) {\r\n        var currentObj = $this.data.currentObj\r\n        var Y = currentObj.getFullYear();\r\n        var m = currentObj.getMonth() + 1;\r\n        var d = currentObj.getDate();\r\n        var str = ''\r\n        if (e.currentTarget.dataset.key == 'left') {\r\n            m -= 1\r\n            if (m <= 0) {\r\n                str = (Y - 1) + '/' + 12 + '/' + d\r\n            } else {\r\n                str = Y + '/' + m + '/' + d\r\n            }\r\n        } else {\r\n            m += 1\r\n            if (m <= 12) {\r\n                str = Y + '/' + m + '/' + d\r\n            } else {\r\n                str = (Y + 1) + '/' + 1 + '/' + d\r\n            }\r\n        }\r\n        currentObj = new Date(str);\r\n        var week = ['周日','周一','周二','周三','周四','周五','周六'];\r\n        $this.setData({\r\n            currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate()+'日'+week[currentObj.getDay()],\r\n            // currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate()+'日',\r\n            currentObj: currentObj,\r\n            /*  获取当前的年、月  */\r\n            currentYear: currentObj.getFullYear(),\r\n            currentMonth: (currentObj.getMonth() + 1),\r\n        })\r\n        this.setSchedule($this);\r\n    },\r\n    //返回初始日期\r\n    getCurrentDayString: function ($this,initDate) {\r\n        var objDate = $this.data.currentObj\r\n        if (objDate != '') {\r\n            return objDate\r\n        } else {\r\n            var date=initDate.replace(/^(\\d{4})(\\d{2})(\\d{2})$/, \"$1/$2/$3\");\r\n            return  new Date(date);\r\n        }\r\n    },\r\n    //重绘日历\r\n    setSchedule: function ($this) {\r\n        var m = $this.data.currentObj.getMonth() + 1\r\n        var Y = $this.data.currentObj.getFullYear()\r\n        var d = $this.data.currentObj.getDate();\r\n        var dayString = Y + '/' + m + '/' + $this.data.currentObj.getDate()\r\n        var currentDayNum = new Date(Y, m, 0).getDate()\r\n        var currentDayWeek = $this.data.currentObj.getUTCDay() + 1\r\n        var result = currentDayWeek - (d % 7 - 1);\r\n        var firstKey = result <= 0 ? 7 + result : result;\r\n        var currentDayList = [];\r\n        var f = 0\r\n        var currentdate = {}\r\n        currentdate.y = Y;\r\n        currentdate.m = m;\r\n        if(m < 10){\r\n            currentdate.m = '0' + m\r\n        }\r\n        var week = ['周一','周二','周三','周四','周五','周六','周日'];\r\n\r\n        if ($this.data.isdelay==1) {\r\n            var unit_date = [1, 7, 30];\r\n            var periodic = [];\r\n            periodic = $this.data.cycelbuy_periodic.split(\",\");\r\n            var interval = periodic[0] * (unit_date[periodic[1]]);\r\n            var period_index = $this.data.period_index;\r\n            if (period_index==0){\r\n              period_index=1;\r\n            }\r\n            \r\n            var period_rest=periodic[2]-period_index+1;\r\n        }\r\n        var maxday=$this.data.maxday;//可选的天数\r\n        var initDate = $this.data.initDate;//初始时间\r\n        var checkedDate=$this.data.checkedDate;//选中的时间\r\n        for (var i = 0; i < 42; i++) {\r\n            var week_index = i % 7;\r\n            let data = []\r\n            if (i < firstKey - 1) {\r\n                currentDayList[i] = { id: '',week:'',no_optional: true, checked: false}\r\n            } else {\r\n                if (f < currentDayNum) {\r\n                    currentdate.d = f +1;\r\n                    if (f < 9) {\r\n                        var f1 = f + 1\r\n                        currentdate.d = '0' + f1\r\n                    }\r\n                    var no_optional = false;//是否不可选\r\n                    var checked = false;//是否选中\r\n                    var date = Date.parse(currentdate.y +'/' +currentdate.m +'/'+currentdate.d);\r\n\r\n                    //第一天之前不可选择\r\n                    if (date < initDate){\r\n                        no_optional = true;\r\n                    }\r\n                    \r\n                    //如果是延期\r\n                    if($this.data.isdelay==1){\r\n                        //根据时间间隔，算出选中状态\r\n                        //当前日期减掉被选择的日期跟时间间隔求余等于零 and 当前日期小于被选择的日期的最后一期  and 当前日期大于被选择的日期时则选中\r\n                      if ((date - checkedDate) % (interval*86400000) == 0 &&  \r\n                        date < (checkedDate + (period_rest * interval*86400000)) && date > checkedDate){\r\n                            checked = true;\r\n                        }\r\n                    }\r\n\r\n                    //如果当前时间大于可延期的截至日期时则不可选\r\n                    if(date>(initDate+((maxday-1)*86400000))){\r\n                        no_optional = true;\r\n                    }\r\n\r\n                    //选中当天\r\n                    if (date == checkedDate) {\r\n                        no_optional = false;\r\n                        checked = true;\r\n                    }\r\n                    currentDayList[i] = { id: f + 1,week:week[week_index], no_optional: no_optional, checked: checked};\r\n                    f = currentDayList[i].id\r\n\r\n                } else if (f >= currentDayNum) {\r\n                    currentDayList[i] = { id: '',week:'',no_optional: true, checked: false}\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        $this.setData({\r\n            currentDayList: currentDayList\r\n        })\r\n    },\r\n\r\n    //选择具体日期方法\r\n    selectDay: function (e,$this) {\r\n        if (!e.target.dataset.day) {\r\n            return;\r\n        }\r\n        \r\n        //如果是订单创建，则将年月日分割文字替换为点\r\n        \r\n        if($this.data.create){\r\n            var currentDate=$this.data.currentYear + '.' + $this.data.currentMonth + '.' + e.target.dataset.day+' '+ e.target.dataset.week;//真实选择数据\r\n        }else{\r\n            var currentDate=$this.data.currentYear + '年' + $this.data.currentMonth + '月' + e.target.dataset.day+'日 '+ e.target.dataset.week;//真实选择数据\r\n        }\r\n        $this.setData({\r\n            currentDay: e.target.dataset.day,//选择的数据，非真实当前日期\r\n            currentDa: e.target.dataset.day, //选择某月具体的一天\r\n            currentDate: currentDate,//真实选择数据\r\n            checkedDate:Date.parse($this.data.currentYear + '/' + $this.data.currentMonth + '/' + e.target.dataset.day),\r\n            receipttime:Date.parse($this.data.currentYear + '/' + $this.data.currentMonth + '/' + e.target.dataset.day) / 1000,\r\n        })\r\n        \r\n    \r\n    }\r\n}","var $ = require('jquery');\r\nmodule.exports = {\r\n    toQueryPair: function (key, value) {\r\n        if (typeof value == 'undefined') {\r\n            return key\r\n        }\r\n        return key + '=' + encodeURIComponent(value === null ? '' : String(value))\r\n    },\r\n    getUrl: function (routes, params, full) {\r\n        routes = routes.replace(/\\//ig, \".\");\r\n        var config = getApp().getConfig();\r\n        var url = config.api + \"&r=\" + routes;\r\n        if (params) {\r\n            if (typeof(params) == 'object') {\r\n                url += \"&\" + $.param(params)\r\n            } else if (typeof(params) == 'string') {\r\n                url += \"&\" + params\r\n            }\r\n        }\r\n        return url\r\n    },\r\n    json: function (routes, args, callback, hasloading, ispost, session) {\r\n        var app = getApp(), userinfo_openid = app.getCache('userinfo_openid'),usermid=app.getCache('usermid'),authkey = app.getCache('authkey'),$this=this;\r\n        args = args || {};\r\n        args.comefrom = 'wxapp';\r\n        args.openid = 'sns_wa_' + userinfo_openid;\r\n        \r\n        \r\n        if (usermid) {\r\n            args.mid = usermid.mid;\r\n            args.merchid = args.merchid || usermid.merchid;\r\n        }\r\n        var self = this;\r\n        if (hasloading) {\r\n            self.loading();\r\n        }\r\n        if (args){\r\n            args.authkey = authkey || '';\r\n        }\r\n        var url = ispost ? this.getUrl(routes) : this.getUrl(routes, args);\r\n        var op = {\r\n            url: url + \"&timestamp=\" + (+new Date()),\r\n            method: ispost ? 'POST' : 'GET',\r\n            header: {\r\n                'Content-type': ispost ? 'application/x-www-form-urlencoded' : 'application/json',\r\n                'Cookie': 'PHPSESSID=' + userinfo_openid\r\n            }\r\n        };\r\n        if (!session) {\r\n            delete op.header.Cookie;\r\n        }\r\n        if (ispost) {\r\n            op.data = $.param(args);\r\n        }\r\n        if (callback) {\r\n            op.success = function (res) {\r\n                //session\r\n                if (hasloading) {\r\n                    self.hideLoading();\r\n                }\r\n                if (res.errMsg == 'request:ok')\r\n                    if (typeof(callback) === 'function') {\r\n                        app.setCache('authkey',res.data.authkey || '');\r\n                        if (typeof (res.data.sysset) !== 'undefined') {\r\n\r\n\r\n                          if (res.data.sysset.isclose == 1) {\r\n                            wx.redirectTo({\r\n                              url: '/pages/message/auth/index?close=1&text=' + res.data.sysset.closetext\r\n                            })\r\n                            return;\r\n                          }\r\n                          app.setCache(\"sysset\", res.data.sysset);\r\n\r\n                        }\r\n                        callback(res.data);\r\n                        \r\n                    }\r\n            }\r\n        } \r\n        op.fail = function (res) {\r\n           if (hasloading) {\r\n              self.hideLoading();\r\n           }\r\n           self.alert(res.errMsg);\r\n        }\r\n\r\n        wx.request(op);\r\n    },\r\n    post: function (routes, args, callback, hasloading, session) {\r\n        this.json(routes, args, callback, hasloading, true, session)\r\n    },\r\n    get: function (routes, args, callback, hasloading, session) {\r\n        this.json(routes, args, callback, hasloading, false, session)\r\n    },\r\n    getDistanceByLnglat: function (lng1, lat1, lng2, lat2) {\r\n        function rad(d) {\r\n            return d * Math.PI / 180.0\r\n        }\r\n\r\n        var rad1 = rad(lat1), rad2 = rad(lat2);\r\n        var a = rad1 - rad2, b = rad(lng1) - rad(lng2);\r\n        var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(rad1) * Math.cos(rad2) * Math.pow(Math.sin(b / 2), 2)));\r\n        s = s * 6378137.0;\r\n        s = Math.round(s * 10000) / 10000000;\r\n        return s\r\n    },\r\n    alert: function (msg, callback) {\r\n        if (typeof(msg) === 'object') {\r\n            msg = JSON.stringify(msg);\r\n        }\r\n        wx.showModal({\r\n            title: '提示',\r\n            content: msg,\r\n            showCancel: false,\r\n            success: function (res) {\r\n                if (res.confirm) {\r\n                    typeof(confirm) === 'function' && callback();\r\n                }\r\n            }\r\n        })\r\n    },\r\n    confirm: function (msg, confirm_callback, cancel_callback) {\r\n        if (typeof(msg) === 'object') {\r\n            msg = JSON.stringify(msg);\r\n        }\r\n        wx.showModal({\r\n            title: '提示',\r\n            content: msg,\r\n            showCancel: true,\r\n            success: function (res) {\r\n                if (res.confirm) {\r\n                    typeof(confirm_callback) === 'function' && confirm_callback();\r\n                } else {\r\n                    typeof(cancel_callback) === 'function' && cancel_callback();\r\n                }\r\n            }\r\n        })\r\n    },\r\n    loading: function (msg) {\r\n\r\n        if (typeof(msg) === 'undefined' || msg == '') {\r\n            msg = '加载中';\r\n        }\r\n        wx.showToast({\r\n            title: msg,\r\n            icon: 'loading',\r\n            duration: 5000000\r\n        });\r\n    },\r\n    hideLoading: function () {\r\n        wx.hideToast();\r\n    },\r\n    toast: function (msg, type) {\r\n        if (!type) {\r\n            type = 'success';\r\n        }\r\n        wx.showToast({\r\n            title: msg,\r\n            icon: type,\r\n            duration: 1000\r\n        });\r\n    },\r\n    success: function (msg) {\r\n\r\n        wx.showToast({\r\n            title: msg,\r\n            icon: 'success',\r\n            duration: 1000\r\n        });\r\n    },\r\n    upload: function (uploadCallback) {\r\n\r\n        var self = this;\r\n        wx.chooseImage({\r\n            success: function (res) {\r\n                self.loading('正在上传...');\r\n\r\n                var url = self.getUrl('util/uploader/upload', {file: 'file'})\r\n                var tempFilePaths = res.tempFilePaths;\r\n                //  if( typeof(chooseCallback)==='function'){\r\n                //      chooseCallback(res.tempFilePaths[0] );\r\n                //  }\r\n                wx.uploadFile({\r\n                    url: url,\r\n                    filePath: tempFilePaths[0],\r\n                    name: 'file',\r\n                    success: function (res) {\r\n                        self.hideLoading();\r\n                        var result = JSON.parse(res.data);\r\n                        if (result.error == 0) {\r\n                            if (typeof(uploadCallback) === 'function') {\r\n                                var file = result.files[0];\r\n                                uploadCallback(file);\r\n                            }\r\n                            return;\r\n                        }\r\n                        self.alert(\"上传失败\");\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    pdata: function (e) {\r\n        return e.currentTarget.dataset;\r\n    },\r\n    data: function (e) {\r\n        return e.target.dataset;\r\n    },\r\n    phone: function (e) {\r\n        var phone = this.pdata(e).phone;\r\n        wx.makePhoneCall({\r\n            phoneNumber: phone\r\n        });\r\n    },\r\n    /**\r\n     *\r\n     * @param obj\r\n     * @param succalback\r\n     * @param fail\r\n     * @returns {boolean}\r\n     */\r\n    pay: function (obj, succalback, fail) {\r\n        var $this = this;\r\n        if (typeof obj != 'object') {\r\n            return false;\r\n        }\r\n        if (typeof succalback != 'function') {\r\n            return false;\r\n        }\r\n        obj.success = succalback;\r\n        if (typeof fail == 'function') {\r\n            obj.fail = fail;\r\n        }\r\n        wx.requestPayment(obj);\r\n    },\r\n    cartcount: function (page) {\r\n        this.get('member/cart/count', {}, function (data) {\r\n            page.setData({\r\n                cartcount: data.cartcount\r\n            });\r\n        });\r\n    },\r\n    onShareAppMessage: function (url, customtitle) {\r\n        var app = getApp(),sysset = app.getCache('sysset'),share=sysset.share||{},userinfo_id = app.getCache('userinfo_id'),mid='';\r\n        var title = sysset.shopname||'';\r\n        var desc = sysset.description||'';\r\n        if (share.title) title = share.title;\r\n        if (customtitle) title = customtitle;\r\n        if (share.desc) desc = share.desc;\r\n        url = url || '/pages/index/index';\r\n        url = url.indexOf('?') != -1 ? url+'&' : url+'?';\r\n        return {\r\n            title: title,\r\n            desc: desc,\r\n            path: url + 'mid=' + userinfo_id\r\n        }\r\n    },\r\n\r\n    str2Obj: function (str) {\r\n        if(typeof str !='string'){\r\n            return str;\r\n        }\r\n        if(str.indexOf('&') < 0 && str.indexOf('=') < 0){\r\n            return {};\r\n        }\r\n        var oldArr = str.split('&'), obj = {};\r\n        $.each(oldArr, function (index, item) {\r\n            if(item.indexOf('=') > -1){\r\n                var arr = item.split('=');\r\n                obj[arr[0]] = arr[1];\r\n            }\r\n        });\r\n        return obj;\r\n    },\r\n\r\n  // 倒计时\r\n  //timePoint 截止时间点、时间戳\r\n  countDown: function (timePoint, time) {\r\n    // 当前时间\r\n    let now = parseInt(Date.now() / 1000);\r\n    let leftTime = 0;\r\n    if (timePoint) {\r\n      leftTime = timePoint > now ? (timePoint - now) : (now - timePoint); //时间差\r\n      leftTime = parseInt(leftTime);\r\n    }\r\n    if (time) {\r\n      leftTime = parseInt(time);\r\n    }\r\n    if (leftTime == 0) {\r\n      return false;\r\n    } else {\r\n      let day = Math.floor(leftTime / (60 * 60 * 24));\r\n      let hour = Math.floor((leftTime - day * 24 * 60 * 60) / 3600);\r\n      let minute = Math.floor((leftTime - day * 24 * 60 * 60 - hour * 3600) / 60);\r\n      let second = Math.floor(leftTime - day * 24 * 60 * 60 - hour * 3600 - minute * 60);\r\n      let time = [day, hour < 10 ? '0' + hour : hour, minute < 10 ? '0' + minute : minute, second < 10 ? '0' + second : second];\r\n      return time;\r\n    }\r\n  },\r\n};","var app = getApp();\r\nvar core = app.requirejs('core');\r\nmodule.exports.number = function(page,e){\r\n    var number = e.currentTarget.dataset;\r\n    var value =     number.value;\r\n\r\n    var min = number.hasOwnProperty('min') ? parseInt(number.min) : 1,\r\n        max = number.hasOwnProperty('max') ? parseInt(number.max) : 999;\r\n    if(e.target.dataset.action==='minus'){\r\n      if (value > 1 && (value > min || min == 0)) {\r\n        value--;\r\n      } else {\r\n          if(min==0){\r\n              min=1;\r\n          }\r\n        this.toast(page, '最少购买' + min + '件')\r\n      }\r\n    } else if(e.target.dataset.action==='plus'){\r\n        if(value<max||max==0){\r\n            value++;\r\n        }else {\r\n          this.toast(page, '最多购买' + max+'件')\r\n        }\r\n    }\r\n    return value;\r\n};\r\n\r\n/**\r\n * 显示底部 toast 必须将view 放于page底部  固定变量名为为 FoxUIToast { show: 是否显示 text 显示的文字}\r\n * <view class=\"fui-toast {{FoxUIToast.show?'in':'out'}}\"><view class=\"text\">{{FoxUIToast.text}}</view></view>\r\n *  Page事件：\r\n *   core.requirejs('foxui').toast(this,text);\r\n *  text 为显示的的提示\r\n *\r\n */\r\nmodule.exports.toast = function(page, text,duration){\r\n    if(!duration){\r\n        duration = 1500;\r\n    }\r\n    page.setData({\r\n        FoxUIToast: {show:true,text:text}\r\n    });\r\n    var self = this;\r\n    setTimeout(function(){\r\n        page.setData({\r\n            FoxUIToast: {show:false}\r\n        });\r\n    },duration);\r\n};\r\n\r\n/**\r\n * 显示顶部 notify 必须将view 放于page底部  固定变量名为为 FoxUINotify { show: 是否显示 text 显示的文字 type 样式}\r\n * <view class=\"fui-notify fui-notify-{{FoxUINotify.style}} {{FoxUIToast.show?'in':'out'}}\"><view class=\"text\">{{FoxUIToast.text}}</view></view>\r\n *  Page事件：\r\n *   core.requirejs('foxui').notify(this,text,type);\r\n *   text 为显示的的提示\r\n *   style 样式 默认 default 其他 primary success danger warning\r\n *\r\n */\r\nmodule.exports.notify = function(page, text,style, duration){\r\n    if(!duration){\r\n        duration = 1500;\r\n    }\r\n    if(!style){\r\n        style = 'default';\r\n    }\r\n    page.setData({\r\n        FoxUINotify: {show:true,text:text,style:style}\r\n    });\r\n    var self = this;\r\n    setTimeout(function(){\r\n        page.setData({\r\n            FoxUINotify: {show:false}\r\n        });\r\n    },duration);\r\n};","module.exports = {\r\n    voice: '/static/images/icon/systemprompt.png',\r\n    mute: '/static/images/icon/mute.png',\r\n    home: '/static/images/icon/home.png',\r\n    home_red: '/static/images/icon-red/home.png',\r\n    cate: '/static/images/icon/cate.png',\r\n    cate_red: '/static/images/icon-red/cate.png',\r\n    cart: '/static/images/icon/cart.png',\r\n    cart_red: '/static/images/icon-red/cart.png',\r\n    people: '/static/images/icon/people.png',\r\n    people_red: '/static/images/icon-red/people.png',\r\n    shop: '/static/images/icon/shop.png',\r\n    order: '/static/images/icon/order.png',\r\n    cartWhite: '/static/images/icon-white/cart.png',\r\n    like: '/static/images/icon/like.png',\r\n    likeactive: '/static/images/icon-red/like.png',\r\n    likefill: '/static/images/icon/like_fill.png',\r\n    footprint: '/static/images/icon/footprint.png',\r\n    notice: '/static/images/icon/notice.png',\r\n    list: '/static/images/icon/list.png',\r\n    location: '/static/images/icon/dingwei.png',\r\n    setting: '/static/images/icon-white/setting.png',\r\n    paying48: '/static/images/icon/paying-48.png',\r\n    deliver48: '/static/images/icon/deliver-48.png',\r\n    box48: '/static/images/icon/box-48.png',\r\n    refund48: '/static/images/icon/refund-48.png',\r\n    store:'/static/images/icon/store.png',\r\n    storeWhite:'/static/images/icon-white/store.png',\r\n    search:'/static/images/icon/search.png',\r\n    money:'/static/images/icon/money.png',\r\n    coupon:'/static/images/icon/coupon.png',\r\n    card:'/static/images/icon/card.png',\r\n    car48:'/static/images/icon/car-48.png',\r\n    cry220:'/static/images/icon/car-220.png',\r\n    group:'/static/images/icon/group.png',\r\n    mobile:'/static/images/icon/mobile.png',\r\n    labelGreen:'/static/images/label-green.png',\r\n    labelRed:'/static/images/label-red.png',\r\n    back:'/static/images/icon/back.png',\r\n    nopic:'/static/images/nopic.png',\r\n    dingdan: '/static/images/icon/dingdan.png',\r\n    tianjia:'/static/images/icon/tianjia.png',\r\n    service: '/static/images/icon-white/service.png',\r\n    service2: '/static/images/icon/service.png',\r\n    my: '/static/images/icon/my.png'\r\n}\r\n","var\r\n    // The deferred used on DOM ready\r\n    readyList,\r\n\r\n\r\n    // [[Class]] -> type pairs\r\n    class2type = {},\r\n\r\n    // List of deleted data cache ids, so we can reuse them\r\n    core_deletedIds = [],\r\n\r\n    core_version = \"1.10.2\",\r\n\r\n    // Save a reference to some core methods\r\n    core_concat = core_deletedIds.concat,\r\n    core_push = core_deletedIds.push,\r\n    core_slice = core_deletedIds.slice,\r\n    core_indexOf = core_deletedIds.indexOf,\r\n    core_toString = class2type.toString,\r\n    core_hasOwn = class2type.hasOwnProperty,\r\n    core_trim = core_version.trim;\r\nvar r20 = /%20/g,\r\n    rbracket = /\\[\\]$/,\r\n    rCRLF = /\\r?\\n/g,\r\n    rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\r\n    rsubmittable = /^(?:input|select|textarea|keygen)/i;\r\n\r\nvar jQuery = {\r\n    // See test/unit/core.js for details concerning isFunction.\r\n    // Since version 1.3, DOM methods and functions like alert\r\n    // aren't supported. They return false on IE (#2968).\r\n    isFunction: function (obj) {\r\n        return jQuery.type(obj) === \"function\";\r\n    },\r\n\r\n    isArray: Array.isArray || function (obj) {\r\n        return jQuery.type(obj) === \"array\";\r\n    },\r\n\r\n    isWindow: function (obj) {\r\n        /* jshint eqeqeq: false */\r\n        return obj != null && obj == obj.window;\r\n    },\r\n\r\n    isNumeric: function (obj) {\r\n        return !isNaN(parseFloat(obj)) && isFinite(obj);\r\n    },\r\n\r\n    type: function (obj) {\r\n        if (obj == null) {\r\n            return String(obj);\r\n        }\r\n        return typeof obj === \"object\" || typeof obj === \"function\" ?\r\n            class2type[core_toString.call(obj)] || \"object\" :\r\n            typeof obj;\r\n    },\r\n\r\n    isPlainObject: function (obj) {\r\n        var key;\r\n\r\n        // Must be an Object.\r\n        // Because of IE, we also have to check the presence of the constructor property.\r\n        // Make sure that DOM nodes and window objects don't pass through, as well\r\n        if (!obj || jQuery.type(obj) !== \"object\" || obj.nodeType || jQuery.isWindow(obj)) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            // Not own constructor property must be Object\r\n            if (obj.constructor && !core_hasOwn.call(obj, \"constructor\") && !core_hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\")) {\r\n                return false;\r\n            }\r\n        } catch (e) {\r\n            // IE8,9 Will throw exceptions on certain host objects #9897\r\n            return false;\r\n        }\r\n\r\n        // Support: IE<9\r\n        // Handle iteration over inherited properties before own properties.\r\n        if (jQuery.support.ownLast) {\r\n            for (key in obj) {\r\n                return core_hasOwn.call(obj, key);\r\n            }\r\n        }\r\n\r\n        // Own properties are enumerated firstly, so to speed up,\r\n        // if last one is own, then all properties are own.\r\n        for (key in obj) {\r\n        }\r\n\r\n        return key === undefined || core_hasOwn.call(obj, key);\r\n    },\r\n\r\n    isEmptyObject: function (obj) {\r\n        var name;\r\n        for (name in obj) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    each: function (obj, callback, args) {\r\n        var value,\r\n            i = 0,\r\n            length = obj.length,\r\n            isArray = isArraylike(obj);\r\n\r\n        if (args) {\r\n            if (isArray) {\r\n                for (; i < length; i++) {\r\n                    value = callback.apply(obj[i], args);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                for (i in obj) {\r\n                    value = callback.apply(obj[i], args);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // A special, fast, case for the most common use of each\r\n        } else {\r\n            if (isArray) {\r\n                for (; i < length; i++) {\r\n                    value = callback.call(obj[i], i, obj[i]);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                for (i in obj) {\r\n                    value = callback.call(obj[i], i, obj[i]);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    },\r\n    // Use native String.trim function wherever possible\r\n    trim: core_trim && !core_trim.call(\"\\uFEFF\\xA0\") ?\r\n        function (text) {\r\n            return text == null ?\r\n                \"\" :\r\n                core_trim.call(text);\r\n        } :\r\n\r\n        // Otherwise use our own trimming functionality\r\n        function (text) {\r\n            return text == null ?\r\n                \"\" :\r\n                ( text + \"\" ).replace(rtrim, \"\");\r\n        },\r\n\r\n    // results is for internal usage only\r\n    makeArray: function (arr, results) {\r\n        var ret = results || [];\r\n\r\n        if (arr != null) {\r\n            if (isArraylike(Object(arr))) {\r\n                jQuery.merge(ret,\r\n                    typeof arr === \"string\" ?\r\n                        [arr] : arr\r\n                );\r\n            } else {\r\n                core_push.call(ret, arr);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    },\r\n\r\n    inArray: function (elem, arr, i) {\r\n        var len;\r\n\r\n        if (arr) {\r\n            if (core_indexOf) {\r\n                return core_indexOf.call(arr, elem, i);\r\n            }\r\n\r\n            len = arr.length;\r\n            i = i ? i < 0 ? Math.max(0, len + i) : i : 0;\r\n\r\n            for (; i < len; i++) {\r\n                // Skip accessing in sparse arrays\r\n                if (i in arr && arr[i] === elem) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    },\r\n\r\n    merge: function (first, second) {\r\n        var l = second.length,\r\n            i = first.length,\r\n            j = 0;\r\n\r\n        if (typeof l === \"number\") {\r\n            for (; j < l; j++) {\r\n                first[i++] = second[j];\r\n            }\r\n        } else {\r\n            while (second[j] !== undefined) {\r\n                first[i++] = second[j++];\r\n            }\r\n        }\r\n\r\n        first.length = i;\r\n\r\n        return first;\r\n    },\r\n    isMobile: function (str) {\r\n        return jQuery.trim(str) !== '' && /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/.test(jQuery.trim(str));\r\n    },\r\n    toFixed: function (number,n) {\r\n        var f = parseInt(n) || 0;\r\n        if( f < -20 || f > 100 ) {\r\n            throw new RangeError(\"Precision of \" + f + \" fractional digits is out of range\");\r\n        }\r\n        var x = Number(number);\r\n        if( isNaN(x) ) {\r\n            return \"NaN\";\r\n        }\r\n        var s = \"\";\r\n        if(x <= 0) {\r\n            s = \"-\";\r\n            x = -x;\r\n        }\r\n        if( x >= Math.pow(10, 21) ) {\r\n            return s + x.toString();\r\n        }\r\n        var m;\r\n        n = Math.round(x * Math.pow(10, f) );\r\n\r\n        if( n == 0 ) {\r\n            m = \"0\";\r\n        }\r\n        else {\r\n            m =  n.toString();\r\n        }\r\n        if( f == 0 ) {\r\n            return s + m;\r\n        }\r\n        var k = m.length;\r\n        if(k <= f) {\r\n            var z = Math.pow(10, f+1-k).toString().substring(1);\r\n            m = z + m;\r\n            k = f+1;\r\n        }\r\n        if(f > 0) {\r\n            var a = m.substring(0, k-f);\r\n            var b = m.substring(k-f);\r\n            m = a + \".\" + b;\r\n        }\r\n        return s + m;\r\n    }\r\n};\r\njQuery.extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone,\r\n        target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false;\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== \"object\" && !jQuery.isFunction(target)) {\r\n        target = {};\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                if (deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) )) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    target[name] = jQuery.extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return target;\r\n};\r\njQuery.param = function (a, traditional) {\r\n    var prefix,\r\n        s = [],\r\n        add = function (key, value) {\r\n            // If value is a function, invoke it and return its value\r\n            value = jQuery.isFunction(value) ? value() : ( value == null ? \"\" : value );\r\n            s[s.length] = encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\r\n        };\r\n\r\n    // Set traditional to true for jQuery <= 1.3.2 behavior.\r\n    if (traditional === undefined) {\r\n        traditional = false;\r\n    }\r\n\r\n    // If an array was passed in, assume that it is an array of form elements.\r\n    if (jQuery.isArray(a) || ( a.jquery && !jQuery.isPlainObject(a) )) {\r\n        // Serialize the form elements\r\n        jQuery.each(a, function () {\r\n            add(this.name, this.value);\r\n        });\r\n\r\n    } else {\r\n        // If traditional, encode the \"old\" way (the way 1.3.2 or older\r\n        // did it), otherwise encode params recursively.\r\n        for (prefix in a) {\r\n            buildParams(prefix, a[prefix], traditional, add);\r\n        }\r\n    }\r\n\r\n    // Return the resulting serialization\r\n    return s.join(\"&\").replace(r20, \"+\");\r\n};\r\n\r\nfunction buildParams(prefix, obj, traditional, add) {\r\n    var name;\r\n\r\n    if (jQuery.isArray(obj)) {\r\n        // Serialize array item.\r\n        jQuery.each(obj, function (i, v) {\r\n            if (traditional || rbracket.test(prefix)) {\r\n                // Treat each array item as a scalar.\r\n                add(prefix, v);\r\n\r\n            } else {\r\n                // Item is non-scalar (array or object), encode its numeric index.\r\n                buildParams(prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add);\r\n            }\r\n        });\r\n\r\n    } else if (!traditional && jQuery.type(obj) === \"object\") {\r\n        // Serialize object item.\r\n        for (name in obj) {\r\n            buildParams(prefix + \"[\" + name + \"]\", obj[name], traditional, add);\r\n        }\r\n\r\n    } else {\r\n        // Serialize scalar item.\r\n        add(prefix, obj);\r\n    }\r\n}\r\nfunction isArraylike(obj) {\r\n    var length = obj.length,\r\n        type = jQuery.type(obj);\r\n\r\n    if (jQuery.isWindow(obj)) {\r\n        return false;\r\n    }\r\n\r\n    if (obj.nodeType === 1 && length) {\r\n        return true;\r\n    }\r\n\r\n    return type === \"array\" || type !== \"function\" &&\r\n        ( length === 0 ||\r\n        typeof length === \"number\" && length > 0 && ( length - 1 ) in obj );\r\n}\r\nmodule.exports = jQuery;","function formatTime(date) {\r\n    var year = date.getFullYear()\r\n    var month = date.getMonth() + 1\r\n    var day = date.getDate()\r\n\r\n    var hour = date.getHours()\r\n    var minute = date.getMinutes()\r\n    var second = date.getSeconds()\r\n\r\n\r\n    return [year, month, day].map(formatNumber).join('/') + ' ' + [hour, minute, second].map(formatNumber).join(':')\r\n}\r\n\r\nfunction formatNumber(n) {\r\n    n = n.toString()\r\n    return n[1] ? n : '0' + n\r\n}\r\n\r\nmodule.exports = {\r\n    formatTime: formatTime\r\n}\r\n","/**\r\n * html2Json 改造来自: https://github.com/Jxck/html2json\r\n *\r\n *\r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n *\r\n * github地址: https://github.com/icindy/wxParse\r\n *\r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\nvar __placeImgeUrlHttps = \"https\";\r\nvar __emojisReg = '';\r\nvar __emojisBaseSrc = '';\r\nvar __emojis = {};\r\nvar wxDiscode = require('./wxDiscode.js');\r\nvar HTMLParser = require('./htmlparser.js');\r\n// Empty Elements - HTML 5\r\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\");\r\n// Block Elements - HTML 5\r\nvar block = makeMap(\"br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video\");\r\n\r\n// Inline Elements - HTML 5\r\nvar inline = makeMap(\"abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var\");\r\n\r\n// Elements that you can, intentionally, leave open\r\n// (and which close themselves)\r\nvar closeSelf = makeMap(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\r\n\r\n// Attributes that have their values filled in disabled=\"disabled\"\r\nvar fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\");\r\n\r\n// Special Elements (can contain anything)\r\nvar special = makeMap(\"wxxxcode-style,script,style,view,scroll-view,block\");\r\nfunction makeMap(str) {\r\n    var obj = {}, items = str.split(\",\");\r\n    for (var i = 0; i < items.length; i++)\r\n        obj[items[i]] = true;\r\n    return obj;\r\n}\r\n\r\nfunction q(v) {\r\n    return '\"' + v + '\"';\r\n}\r\n\r\nfunction removeDOCTYPE(html) {\r\n    return html\r\n        .replace(/<\\?xml.*\\?>\\n/, '')\r\n        .replace(/<.*!doctype.*\\>\\n/, '')\r\n        .replace(/<.*!DOCTYPE.*\\>\\n/, '');\r\n}\r\n\r\nfunction trimHtml(html) {\r\n  return html\r\n        .replace(/\\r?\\n+/g, '')\r\n        .replace(/<!--.*?-->/ig, '')\r\n        .replace(/\\/\\*.*?\\*\\//ig, '')\r\n        .replace(/[ ]+</ig, '<')\r\n}\r\n\r\n\r\nfunction html2json(html, bindName) {\r\n    //处理字符串\r\n    html = removeDOCTYPE(html);\r\n    html = trimHtml(html);\r\n    html = wxDiscode.strDiscode(html);\r\n    //生成node节点\r\n    var bufArray = [];\r\n    var results = {\r\n        node: bindName,\r\n        nodes: [],\r\n        images:[],\r\n        imageUrls:[]\r\n    };\r\n    var index = 0;\r\n    HTMLParser(html, {\r\n        start: function (tag, attrs, unary) {\r\n            //debug(tag, attrs, unary);\r\n            // node for this element\r\n            var node = {\r\n                node: 'element',\r\n                tag: tag,\r\n            };\r\n\r\n            if (bufArray.length === 0) {\r\n                node.index = index.toString()\r\n                index += 1\r\n            } else {\r\n                var parent = bufArray[0];\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                node.index = parent.index + '.' + parent.nodes.length\r\n            }\r\n\r\n            if (block[tag]) {\r\n                node.tagType = \"block\";\r\n            } else if (inline[tag]) {\r\n                node.tagType = \"inline\";\r\n            } else if (closeSelf[tag]) {\r\n                node.tagType = \"closeSelf\";\r\n            }\r\n\r\n            if (attrs.length !== 0) {\r\n                node.attr = attrs.reduce(function (pre, attr) {\r\n                    var name = attr.name;\r\n                    var value = attr.value;\r\n                    if (name == 'class') {\r\n                        //  value = value.join(\"\")\r\n                        node.classStr = value;\r\n                    }\r\n                    // has multi attibutes\r\n                    // make it array of attribute\r\n                    if (name == 'style') {\r\n                        //  value = value.join(\"\")\r\n                        node.styleStr = value;\r\n                    }\r\n                    if (value.match(/ /)) {\r\n                        value = value.split(' ');\r\n                    }\r\n\r\n\r\n                    // if attr already exists\r\n                    // merge it\r\n                    if (pre[name]) {\r\n                        if (Array.isArray(pre[name])) {\r\n                            // already array, push to last\r\n                            pre[name].push(value);\r\n                        } else {\r\n                            // single value, make it array\r\n                            pre[name] = [pre[name], value];\r\n                        }\r\n                    } else {\r\n                        // not exist, put it\r\n                        pre[name] = value;\r\n                    }\r\n\r\n                    return pre;\r\n                }, {});\r\n            }\r\n\r\n            //对img添加额外数据\r\n            if (node.tag === 'img') {\r\n                node.imgIndex = results.images.length;\r\n                node.attr = node.attr || {};\r\n                var imgUrl = node.attr.src || [];\r\n                if (imgUrl[0] == '') {\r\n                    imgUrl.splice(0, 1);\r\n                }\r\n                imgUrl = wxDiscode.urlToHttpUrl(imgUrl, __placeImgeUrlHttps);\r\n                node.attr.src = imgUrl;\r\n                node.from = bindName;\r\n                results.images.push(node);\r\n                results.imageUrls.push(imgUrl);\r\n            }\r\n\r\n            // 处理font标签样式属性\r\n            if (node.tag === 'font') {\r\n                var fontSize = ['x-small', 'small', 'medium', 'large', 'x-large', 'xx-large', '-webkit-xxx-large'];\r\n                var styleAttrs = {\r\n                    'color': 'color',\r\n                    'face': 'font-family',\r\n                    'size': 'font-size'\r\n                };\r\n                if (!node.attr.style) node.attr.style = [];\r\n                if (!node.styleStr) node.styleStr = '';\r\n                for (var key in styleAttrs) {\r\n                    if (node.attr[key]) {\r\n                        var value = key === 'size' ? fontSize[node.attr[key]-1] : node.attr[key];\r\n                        node.attr.style.push(styleAttrs[key]);\r\n                        node.attr.style.push(value);\r\n                        node.styleStr += styleAttrs[key] + ': ' + value + ';';\r\n                    }\r\n                }\r\n            }\r\n\r\n            //临时记录source资源\r\n            if(node.tag === 'source'){\r\n                results.source = node.attr.src;\r\n            }\r\n\r\n            if (unary) {\r\n                // if this tag dosen't have end tag\r\n                // like <img src=\"hoge.png\"/>\r\n                // add to parents\r\n                var parent = bufArray[0] || results;\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                parent.nodes.push(node);\r\n            } else {\r\n                bufArray.unshift(node);\r\n            }\r\n        },\r\n        end: function (tag) {\r\n            //debug(tag);\r\n            // merge into parent tag\r\n            var node = bufArray.shift();\r\n            if (node.tag !== tag) console.error('invalid state: mismatch end tag');\r\n\r\n            //当有缓存source资源时于于video补上src资源\r\n            if(node.tag === 'video' && results.source){\r\n                node.attr.src = results.source;\r\n                delete results.source;\r\n            }\r\n\r\n            if (bufArray.length === 0) {\r\n                results.nodes.push(node);\r\n            } else {\r\n                var parent = bufArray[0];\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                parent.nodes.push(node);\r\n            }\r\n        },\r\n        chars: function (text) {\r\n            //debug(text);\r\n            var node = {\r\n                node: 'text',\r\n                text: text,\r\n                textArray:transEmojiStr(text)\r\n            };\r\n\r\n            if (bufArray.length === 0) {\r\n                node.index = index.toString()\r\n                index += 1\r\n                results.nodes.push(node);\r\n            } else {\r\n                var parent = bufArray[0];\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                node.index = parent.index + '.' + parent.nodes.length\r\n                parent.nodes.push(node);\r\n            }\r\n        },\r\n        comment: function (text) {\r\n            //debug(text);\r\n            // var node = {\r\n            //     node: 'comment',\r\n            //     text: text,\r\n            // };\r\n            // var parent = bufArray[0];\r\n            // if (parent.nodes === undefined) {\r\n            //     parent.nodes = [];\r\n            // }\r\n            // parent.nodes.push(node);\r\n        },\r\n    });\r\n    return results;\r\n};\r\n\r\nfunction transEmojiStr(str){\r\n  // var eReg = new RegExp(\"[\"+__reg+' '+\"]\");\r\n//   str = str.replace(/\\[([^\\[\\]]+)\\]/g,':$1:')\r\n\r\n  var emojiObjs = [];\r\n  //如果正则表达式为空\r\n  if(__emojisReg.length == 0 || !__emojis){\r\n      var emojiObj = {}\r\n      emojiObj.node = \"text\";\r\n      emojiObj.text = str;\r\n      array = [emojiObj];\r\n      return array;\r\n  }\r\n  //这个地方需要调整\r\n  str = str.replace(/\\[([^\\[\\]]+)\\]/g,':$1:')\r\n  var eReg = new RegExp(\"[:]\");\r\n  var array = str.split(eReg);\r\n  for(var i = 0; i < array.length; i++){\r\n    var ele = array[i];\r\n    var emojiObj = {};\r\n    if(__emojis[ele]){\r\n      emojiObj.node = \"element\";\r\n      emojiObj.tag = \"emoji\";\r\n      emojiObj.text = __emojis[ele];\r\n      emojiObj.baseSrc= __emojisBaseSrc;\r\n    }else{\r\n      emojiObj.node = \"text\";\r\n      emojiObj.text = ele;\r\n    }\r\n    emojiObjs.push(emojiObj);\r\n  }\r\n\r\n  return emojiObjs;\r\n}\r\n\r\nfunction emojisInit(reg='',baseSrc=\"/wxParse/emojis/\",emojis){\r\n    __emojisReg = reg;\r\n    __emojisBaseSrc=baseSrc;\r\n    __emojis=emojis;\r\n}\r\n\r\nmodule.exports = {\r\n    html2json: html2json,\r\n    emojisInit:emojisInit\r\n};","/**\r\n * \r\n * htmlParser改造自: https://github.com/blowsie/Pure-JavaScript-HTML5-Parser\r\n * \r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n * \r\n * github地址: https://github.com/icindy/wxParse\r\n * \r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n// Regular Expressions for parsing tags and attributes\r\nvar startTag = /^<([-A-Za-z0-9_]+)((?:\\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/,\r\n\tendTag = /^<\\/([-A-Za-z0-9_]+)[^>]*>/,\r\n\tattr = /([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g;\r\n\r\n// Empty Elements - HTML 5\r\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\");\r\n\r\n// Block Elements - HTML 5\r\nvar block = makeMap(\"a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video\");\r\n\r\n// Inline Elements - HTML 5\r\nvar inline = makeMap(\"abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var\");\r\n\r\n// Elements that you can, intentionally, leave open\r\n// (and which close themselves)\r\nvar closeSelf = makeMap(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\r\n\r\n// Attributes that have their values filled in disabled=\"disabled\"\r\nvar fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\");\r\n\r\n// Special Elements (can contain anything)\r\nvar special = makeMap(\"wxxxcode-style,script,style,view,scroll-view,block\");\r\n\r\nfunction HTMLParser(html, handler) {\r\n\tvar index, chars, match, stack = [], last = html;\r\n\tstack.last = function () {\r\n\t\treturn this[this.length - 1];\r\n\t};\r\n\r\n\twhile (html) {\r\n\t\tchars = true;\r\n\r\n\t\t// Make sure we're not in a script or style element\r\n\t\tif (!stack.last() || !special[stack.last()]) {\r\n\r\n\t\t\t// Comment\r\n\t\t\tif (html.indexOf(\"<!--\") == 0) {\r\n\t\t\t\tindex = html.indexOf(\"-->\");\r\n\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\tif (handler.comment)\r\n\t\t\t\t\t\thandler.comment(html.substring(4, index));\r\n\t\t\t\t\thtml = html.substring(index + 3);\r\n\t\t\t\t\tchars = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// end tag\r\n\t\t\t} else if (html.indexOf(\"</\") == 0) {\r\n\t\t\t\tmatch = html.match(endTag);\r\n\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\thtml = html.substring(match[0].length);\r\n\t\t\t\t\tmatch[0].replace(endTag, parseEndTag);\r\n\t\t\t\t\tchars = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// start tag\r\n\t\t\t} else if (html.indexOf(\"<\") == 0) {\r\n\t\t\t\tmatch = html.match(startTag);\r\n\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\thtml = html.substring(match[0].length);\r\n\t\t\t\t\tmatch[0].replace(startTag, parseStartTag);\r\n\t\t\t\t\tchars = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (chars) {\r\n\t\t\t\tindex = html.indexOf(\"<\");\r\n\t\t\t\tvar text = ''\r\n\t\t\t\twhile (index === 0) {\r\n                                  text += \"<\";\r\n                                  html = html.substring(1);\r\n                                  index = html.indexOf(\"<\");\r\n\t\t\t\t}\r\n\t\t\t\ttext += index < 0 ? html : html.substring(0, index);\r\n\t\t\t\thtml = index < 0 ? \"\" : html.substring(index);\r\n\r\n\t\t\t\tif (handler.chars)\r\n\t\t\t\t\thandler.chars(text);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\thtml = html.replace(new RegExp(\"([\\\\s\\\\S]*?)<\\/\" + stack.last() + \"[^>]*>\"), function (all, text) {\r\n\t\t\t\ttext = text.replace(/<!--([\\s\\S]*?)-->|<!\\[CDATA\\[([\\s\\S]*?)]]>/g, \"$1$2\");\r\n\t\t\t\tif (handler.chars)\r\n\t\t\t\t\thandler.chars(text);\r\n\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\r\n\r\n\t\t\tparseEndTag(\"\", stack.last());\r\n\t\t}\r\n\r\n\t\tif (html == last)\r\n\t\t\tthrow \"Parse Error: \" + html;\r\n\t\tlast = html;\r\n\t}\r\n\r\n\t// Clean up any remaining tags\r\n\tparseEndTag();\r\n\r\n\tfunction parseStartTag(tag, tagName, rest, unary) {\r\n\t\ttagName = tagName.toLowerCase();\r\n\r\n\t\tif (block[tagName]) {\r\n\t\t\twhile (stack.last() && inline[stack.last()]) {\r\n\t\t\t\tparseEndTag(\"\", stack.last());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (closeSelf[tagName] && stack.last() == tagName) {\r\n\t\t\tparseEndTag(\"\", tagName);\r\n\t\t}\r\n\r\n\t\tunary = empty[tagName] || !!unary;\r\n\r\n\t\tif (!unary)\r\n\t\t\tstack.push(tagName);\r\n\r\n\t\tif (handler.start) {\r\n\t\t\tvar attrs = [];\r\n\r\n\t\t\trest.replace(attr, function (match, name) {\r\n\t\t\t\tvar value = arguments[2] ? arguments[2] :\r\n\t\t\t\t\targuments[3] ? arguments[3] :\r\n\t\t\t\t\t\targuments[4] ? arguments[4] :\r\n\t\t\t\t\t\t\tfillAttrs[name] ? name : \"\";\r\n\r\n\t\t\t\tattrs.push({\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tvalue: value,\r\n\t\t\t\t\tescaped: value.replace(/(^|[^\\\\])\"/g, '$1\\\\\\\"') //\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tif (handler.start) {\r\n\t\t\t\thandler.start(tagName, attrs, unary);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseEndTag(tag, tagName) {\r\n\t\t// If no tag name is provided, clean shop\r\n\t\tif (!tagName)\r\n\t\t\tvar pos = 0;\r\n\r\n\t\t// Find the closest opened tag of the same type\r\n\t\telse {\r\n\t\t\ttagName = tagName.toLowerCase();\r\n\t\t\tfor (var pos = stack.length - 1; pos >= 0; pos--)\r\n\t\t\t\tif (stack[pos] == tagName)\r\n\t\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (pos >= 0) {\r\n\t\t\t// Close all the open elements, up the stack\r\n\t\t\tfor (var i = stack.length - 1; i >= pos; i--)\r\n\t\t\t\tif (handler.end)\r\n\t\t\t\t\thandler.end(stack[i]);\r\n\r\n\t\t\t// Remove the open elements from the stack\r\n\t\t\tstack.length = pos;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nfunction makeMap(str) {\r\n\tvar obj = {}, items = str.split(\",\");\r\n\tfor (var i = 0; i < items.length; i++)\r\n\t\tobj[items[i]] = true;\r\n\treturn obj;\r\n}\r\n\r\nmodule.exports = HTMLParser;\r\n","/**\r\n * \r\n * showdown: https://github.com/showdownjs/showdown\r\n * \r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n * \r\n * github地址: https://github.com/icindy/wxParse\r\n * \r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\nfunction getDefaultOpts(simple) {\r\n  'use strict';\r\n\r\n  var defaultOptions = {\r\n    omitExtraWLInCodeBlocks: {\r\n      defaultValue: false,\r\n      describe: 'Omit the default extra whiteline added to code blocks',\r\n      type: 'boolean'\r\n    },\r\n    noHeaderId: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off generated header id',\r\n      type: 'boolean'\r\n    },\r\n    prefixHeaderId: {\r\n      defaultValue: false,\r\n      describe: 'Specify a prefix to generated header ids',\r\n      type: 'string'\r\n    },\r\n    headerLevelStart: {\r\n      defaultValue: false,\r\n      describe: 'The header blocks level start',\r\n      type: 'integer'\r\n    },\r\n    parseImgDimensions: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off image dimension parsing',\r\n      type: 'boolean'\r\n    },\r\n    simplifiedAutoLink: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off GFM autolink style',\r\n      type: 'boolean'\r\n    },\r\n    literalMidWordUnderscores: {\r\n      defaultValue: false,\r\n      describe: 'Parse midword underscores as literal underscores',\r\n      type: 'boolean'\r\n    },\r\n    strikethrough: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off strikethrough support',\r\n      type: 'boolean'\r\n    },\r\n    tables: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off tables support',\r\n      type: 'boolean'\r\n    },\r\n    tablesHeaderId: {\r\n      defaultValue: false,\r\n      describe: 'Add an id to table headers',\r\n      type: 'boolean'\r\n    },\r\n    ghCodeBlocks: {\r\n      defaultValue: true,\r\n      describe: 'Turn on/off GFM fenced code blocks support',\r\n      type: 'boolean'\r\n    },\r\n    tasklists: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off GFM tasklist support',\r\n      type: 'boolean'\r\n    },\r\n    smoothLivePreview: {\r\n      defaultValue: false,\r\n      describe: 'Prevents weird effects in live previews due to incomplete input',\r\n      type: 'boolean'\r\n    },\r\n    smartIndentationFix: {\r\n      defaultValue: false,\r\n      description: 'Tries to smartly fix identation in es6 strings',\r\n      type: 'boolean'\r\n    }\r\n  };\r\n  if (simple === false) {\r\n    return JSON.parse(JSON.stringify(defaultOptions));\r\n  }\r\n  var ret = {};\r\n  for (var opt in defaultOptions) {\r\n    if (defaultOptions.hasOwnProperty(opt)) {\r\n      ret[opt] = defaultOptions[opt].defaultValue;\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Created by Tivie on 06-01-2015.\r\n */\r\n\r\n// Private properties\r\nvar showdown = {},\r\n    parsers = {},\r\n    extensions = {},\r\n    globalOptions = getDefaultOpts(true),\r\n    flavor = {\r\n      github: {\r\n        omitExtraWLInCodeBlocks:   true,\r\n        prefixHeaderId:            'user-content-',\r\n        simplifiedAutoLink:        true,\r\n        literalMidWordUnderscores: true,\r\n        strikethrough:             true,\r\n        tables:                    true,\r\n        tablesHeaderId:            true,\r\n        ghCodeBlocks:              true,\r\n        tasklists:                 true\r\n      },\r\n      vanilla: getDefaultOpts(true)\r\n    };\r\n\r\n/**\r\n * helper namespace\r\n * @type {{}}\r\n */\r\nshowdown.helper = {};\r\n\r\n/**\r\n * TODO LEGACY SUPPORT CODE\r\n * @type {{}}\r\n */\r\nshowdown.extensions = {};\r\n\r\n/**\r\n * Set a global option\r\n * @static\r\n * @param {string} key\r\n * @param {*} value\r\n * @returns {showdown}\r\n */\r\nshowdown.setOption = function (key, value) {\r\n  'use strict';\r\n  globalOptions[key] = value;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Get a global option\r\n * @static\r\n * @param {string} key\r\n * @returns {*}\r\n */\r\nshowdown.getOption = function (key) {\r\n  'use strict';\r\n  return globalOptions[key];\r\n};\r\n\r\n/**\r\n * Get the global options\r\n * @static\r\n * @returns {{}}\r\n */\r\nshowdown.getOptions = function () {\r\n  'use strict';\r\n  return globalOptions;\r\n};\r\n\r\n/**\r\n * Reset global options to the default values\r\n * @static\r\n */\r\nshowdown.resetOptions = function () {\r\n  'use strict';\r\n  globalOptions = getDefaultOpts(true);\r\n};\r\n\r\n/**\r\n * Set the flavor showdown should use as default\r\n * @param {string} name\r\n */\r\nshowdown.setFlavor = function (name) {\r\n  'use strict';\r\n  if (flavor.hasOwnProperty(name)) {\r\n    var preset = flavor[name];\r\n    for (var option in preset) {\r\n      if (preset.hasOwnProperty(option)) {\r\n        globalOptions[option] = preset[option];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get the default options\r\n * @static\r\n * @param {boolean} [simple=true]\r\n * @returns {{}}\r\n */\r\nshowdown.getDefaultOptions = function (simple) {\r\n  'use strict';\r\n  return getDefaultOpts(simple);\r\n};\r\n\r\n/**\r\n * Get or set a subParser\r\n *\r\n * subParser(name)       - Get a registered subParser\r\n * subParser(name, func) - Register a subParser\r\n * @static\r\n * @param {string} name\r\n * @param {function} [func]\r\n * @returns {*}\r\n */\r\nshowdown.subParser = function (name, func) {\r\n  'use strict';\r\n  if (showdown.helper.isString(name)) {\r\n    if (typeof func !== 'undefined') {\r\n      parsers[name] = func;\r\n    } else {\r\n      if (parsers.hasOwnProperty(name)) {\r\n        return parsers[name];\r\n      } else {\r\n        throw Error('SubParser named ' + name + ' not registered!');\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Gets or registers an extension\r\n * @static\r\n * @param {string} name\r\n * @param {object|function=} ext\r\n * @returns {*}\r\n */\r\nshowdown.extension = function (name, ext) {\r\n  'use strict';\r\n\r\n  if (!showdown.helper.isString(name)) {\r\n    throw Error('Extension \\'name\\' must be a string');\r\n  }\r\n\r\n  name = showdown.helper.stdExtName(name);\r\n\r\n  // Getter\r\n  if (showdown.helper.isUndefined(ext)) {\r\n    if (!extensions.hasOwnProperty(name)) {\r\n      throw Error('Extension named ' + name + ' is not registered!');\r\n    }\r\n    return extensions[name];\r\n\r\n    // Setter\r\n  } else {\r\n    // Expand extension if it's wrapped in a function\r\n    if (typeof ext === 'function') {\r\n      ext = ext();\r\n    }\r\n\r\n    // Ensure extension is an array\r\n    if (!showdown.helper.isArray(ext)) {\r\n      ext = [ext];\r\n    }\r\n\r\n    var validExtension = validate(ext, name);\r\n\r\n    if (validExtension.valid) {\r\n      extensions[name] = ext;\r\n    } else {\r\n      throw Error(validExtension.error);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Gets all extensions registered\r\n * @returns {{}}\r\n */\r\nshowdown.getAllExtensions = function () {\r\n  'use strict';\r\n  return extensions;\r\n};\r\n\r\n/**\r\n * Remove an extension\r\n * @param {string} name\r\n */\r\nshowdown.removeExtension = function (name) {\r\n  'use strict';\r\n  delete extensions[name];\r\n};\r\n\r\n/**\r\n * Removes all extensions\r\n */\r\nshowdown.resetExtensions = function () {\r\n  'use strict';\r\n  extensions = {};\r\n};\r\n\r\n/**\r\n * Validate extension\r\n * @param {array} extension\r\n * @param {string} name\r\n * @returns {{valid: boolean, error: string}}\r\n */\r\nfunction validate(extension, name) {\r\n  'use strict';\r\n\r\n  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',\r\n    ret = {\r\n      valid: true,\r\n      error: ''\r\n    };\r\n\r\n  if (!showdown.helper.isArray(extension)) {\r\n    extension = [extension];\r\n  }\r\n\r\n  for (var i = 0; i < extension.length; ++i) {\r\n    var baseMsg = errMsg + ' sub-extension ' + i + ': ',\r\n        ext = extension[i];\r\n    if (typeof ext !== 'object') {\r\n      ret.valid = false;\r\n      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';\r\n      return ret;\r\n    }\r\n\r\n    if (!showdown.helper.isString(ext.type)) {\r\n      ret.valid = false;\r\n      ret.error = baseMsg + 'property \"type\" must be a string, but ' + typeof ext.type + ' given';\r\n      return ret;\r\n    }\r\n\r\n    var type = ext.type = ext.type.toLowerCase();\r\n\r\n    // normalize extension type\r\n    if (type === 'language') {\r\n      type = ext.type = 'lang';\r\n    }\r\n\r\n    if (type === 'html') {\r\n      type = ext.type = 'output';\r\n    }\r\n\r\n    if (type !== 'lang' && type !== 'output' && type !== 'listener') {\r\n      ret.valid = false;\r\n      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: \"lang/language\", \"output/html\" or \"listener\"';\r\n      return ret;\r\n    }\r\n\r\n    if (type === 'listener') {\r\n      if (showdown.helper.isUndefined(ext.listeners)) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '. Extensions of type \"listener\" must have a property called \"listeners\"';\r\n        return ret;\r\n      }\r\n    } else {\r\n      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + type + ' extensions must define either a \"regex\" property or a \"filter\" method';\r\n        return ret;\r\n      }\r\n    }\r\n\r\n    if (ext.listeners) {\r\n      if (typeof ext.listeners !== 'object') {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"listeners\" property must be an object but ' + typeof ext.listeners + ' given';\r\n        return ret;\r\n      }\r\n      for (var ln in ext.listeners) {\r\n        if (ext.listeners.hasOwnProperty(ln)) {\r\n          if (typeof ext.listeners[ln] !== 'function') {\r\n            ret.valid = false;\r\n            ret.error = baseMsg + '\"listeners\" property must be an hash of [event name]: [callback]. listeners.' + ln +\r\n              ' must be a function but ' + typeof ext.listeners[ln] + ' given';\r\n            return ret;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (ext.filter) {\r\n      if (typeof ext.filter !== 'function') {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"filter\" must be a function, but ' + typeof ext.filter + ' given';\r\n        return ret;\r\n      }\r\n    } else if (ext.regex) {\r\n      if (showdown.helper.isString(ext.regex)) {\r\n        ext.regex = new RegExp(ext.regex, 'g');\r\n      }\r\n      if (!ext.regex instanceof RegExp) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"regex\" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';\r\n        return ret;\r\n      }\r\n      if (showdown.helper.isUndefined(ext.replace)) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"regex\" extensions must implement a replace string or function';\r\n        return ret;\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Validate extension\r\n * @param {object} ext\r\n * @returns {boolean}\r\n */\r\nshowdown.validateExtension = function (ext) {\r\n  'use strict';\r\n\r\n  var validateExtension = validate(ext, null);\r\n  if (!validateExtension.valid) {\r\n    console.warn(validateExtension.error);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * showdownjs helper functions\r\n */\r\n\r\nif (!showdown.hasOwnProperty('helper')) {\r\n  showdown.helper = {};\r\n}\r\n\r\n/**\r\n * Check if var is string\r\n * @static\r\n * @param {string} a\r\n * @returns {boolean}\r\n */\r\nshowdown.helper.isString = function isString(a) {\r\n  'use strict';\r\n  return (typeof a === 'string' || a instanceof String);\r\n};\r\n\r\n/**\r\n * Check if var is a function\r\n * @static\r\n * @param {string} a\r\n * @returns {boolean}\r\n */\r\nshowdown.helper.isFunction = function isFunction(a) {\r\n  'use strict';\r\n  var getType = {};\r\n  return a && getType.toString.call(a) === '[object Function]';\r\n};\r\n\r\n/**\r\n * ForEach helper function\r\n * @static\r\n * @param {*} obj\r\n * @param {function} callback\r\n */\r\nshowdown.helper.forEach = function forEach(obj, callback) {\r\n  'use strict';\r\n  if (typeof obj.forEach === 'function') {\r\n    obj.forEach(callback);\r\n  } else {\r\n    for (var i = 0; i < obj.length; i++) {\r\n      callback(obj[i], i, obj);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * isArray helper function\r\n * @static\r\n * @param {*} a\r\n * @returns {boolean}\r\n */\r\nshowdown.helper.isArray = function isArray(a) {\r\n  'use strict';\r\n  return a.constructor === Array;\r\n};\r\n\r\n/**\r\n * Check if value is undefined\r\n * @static\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\r\n */\r\nshowdown.helper.isUndefined = function isUndefined(value) {\r\n  'use strict';\r\n  return typeof value === 'undefined';\r\n};\r\n\r\n/**\r\n * Standardidize extension name\r\n * @static\r\n * @param {string} s extension name\r\n * @returns {string}\r\n */\r\nshowdown.helper.stdExtName = function (s) {\r\n  'use strict';\r\n  return s.replace(/[_-]||\\s/g, '').toLowerCase();\r\n};\r\n\r\nfunction escapeCharactersCallback(wholeMatch, m1) {\r\n  'use strict';\r\n  var charCodeToEscape = m1.charCodeAt(0);\r\n  return '~E' + charCodeToEscape + 'E';\r\n}\r\n\r\n/**\r\n * Callback used to escape characters when passing through String.replace\r\n * @static\r\n * @param {string} wholeMatch\r\n * @param {string} m1\r\n * @returns {string}\r\n */\r\nshowdown.helper.escapeCharactersCallback = escapeCharactersCallback;\r\n\r\n/**\r\n * Escape characters in a string\r\n * @static\r\n * @param {string} text\r\n * @param {string} charsToEscape\r\n * @param {boolean} afterBackslash\r\n * @returns {XML|string|void|*}\r\n */\r\nshowdown.helper.escapeCharacters = function escapeCharacters(text, charsToEscape, afterBackslash) {\r\n  'use strict';\r\n  // First we have to escape the escape characters so that\r\n  // we can build a character class out of them\r\n  var regexString = '([' + charsToEscape.replace(/([\\[\\]\\\\])/g, '\\\\$1') + '])';\r\n\r\n  if (afterBackslash) {\r\n    regexString = '\\\\\\\\' + regexString;\r\n  }\r\n\r\n  var regex = new RegExp(regexString, 'g');\r\n  text = text.replace(regex, escapeCharactersCallback);\r\n\r\n  return text;\r\n};\r\n\r\nvar rgxFindMatchPos = function (str, left, right, flags) {\r\n  'use strict';\r\n  var f = flags || '',\r\n    g = f.indexOf('g') > -1,\r\n    x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),\r\n    l = new RegExp(left, f.replace(/g/g, '')),\r\n    pos = [],\r\n    t, s, m, start, end;\r\n\r\n  do {\r\n    t = 0;\r\n    while ((m = x.exec(str))) {\r\n      if (l.test(m[0])) {\r\n        if (!(t++)) {\r\n          s = x.lastIndex;\r\n          start = s - m[0].length;\r\n        }\r\n      } else if (t) {\r\n        if (!--t) {\r\n          end = m.index + m[0].length;\r\n          var obj = {\r\n            left: {start: start, end: s},\r\n            match: {start: s, end: m.index},\r\n            right: {start: m.index, end: end},\r\n            wholeMatch: {start: start, end: end}\r\n          };\r\n          pos.push(obj);\r\n          if (!g) {\r\n            return pos;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } while (t && (x.lastIndex = s));\r\n\r\n  return pos;\r\n};\r\n\r\n/**\r\n * matchRecursiveRegExp\r\n *\r\n * (c) 2007 Steven Levithan <stevenlevithan.com>\r\n * MIT License\r\n *\r\n * Accepts a string to search, a left and right format delimiter\r\n * as regex patterns, and optional regex flags. Returns an array\r\n * of matches, allowing nested instances of left/right delimiters.\r\n * Use the \"g\" flag to return all matches, otherwise only the\r\n * first is returned. Be careful to ensure that the left and\r\n * right format delimiters produce mutually exclusive matches.\r\n * Backreferences are not supported within the right delimiter\r\n * due to how it is internally combined with the left delimiter.\r\n * When matching strings whose format delimiters are unbalanced\r\n * to the left or right, the output is intentionally as a\r\n * conventional regex library with recursion support would\r\n * produce, e.g. \"<<x>\" and \"<x>>\" both produce [\"x\"] when using\r\n * \"<\" and \">\" as the delimiters (both strings contain a single,\r\n * balanced instance of \"<x>\").\r\n *\r\n * examples:\r\n * matchRecursiveRegExp(\"test\", \"\\\\(\", \"\\\\)\")\r\n * returns: []\r\n * matchRecursiveRegExp(\"<t<<e>><s>>t<>\", \"<\", \">\", \"g\")\r\n * returns: [\"t<<e>><s>\", \"\"]\r\n * matchRecursiveRegExp(\"<div id=\\\"x\\\">test</div>\", \"<div\\\\b[^>]*>\", \"</div>\", \"gi\")\r\n * returns: [\"test\"]\r\n */\r\nshowdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {\r\n  'use strict';\r\n\r\n  var matchPos = rgxFindMatchPos (str, left, right, flags),\r\n    results = [];\r\n\r\n  for (var i = 0; i < matchPos.length; ++i) {\r\n    results.push([\r\n      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\r\n      str.slice(matchPos[i].match.start, matchPos[i].match.end),\r\n      str.slice(matchPos[i].left.start, matchPos[i].left.end),\r\n      str.slice(matchPos[i].right.start, matchPos[i].right.end)\r\n    ]);\r\n  }\r\n  return results;\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} str\r\n * @param {string|function} replacement\r\n * @param {string} left\r\n * @param {string} right\r\n * @param {string} flags\r\n * @returns {string}\r\n */\r\nshowdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {\r\n  'use strict';\r\n\r\n  if (!showdown.helper.isFunction(replacement)) {\r\n    var repStr = replacement;\r\n    replacement = function () {\r\n      return repStr;\r\n    };\r\n  }\r\n\r\n  var matchPos = rgxFindMatchPos(str, left, right, flags),\r\n      finalStr = str,\r\n      lng = matchPos.length;\r\n\r\n  if (lng > 0) {\r\n    var bits = [];\r\n    if (matchPos[0].wholeMatch.start !== 0) {\r\n      bits.push(str.slice(0, matchPos[0].wholeMatch.start));\r\n    }\r\n    for (var i = 0; i < lng; ++i) {\r\n      bits.push(\r\n        replacement(\r\n          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\r\n          str.slice(matchPos[i].match.start, matchPos[i].match.end),\r\n          str.slice(matchPos[i].left.start, matchPos[i].left.end),\r\n          str.slice(matchPos[i].right.start, matchPos[i].right.end)\r\n        )\r\n      );\r\n      if (i < lng - 1) {\r\n        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));\r\n      }\r\n    }\r\n    if (matchPos[lng - 1].wholeMatch.end < str.length) {\r\n      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));\r\n    }\r\n    finalStr = bits.join('');\r\n  }\r\n  return finalStr;\r\n};\r\n\r\n/**\r\n * POLYFILLS\r\n */\r\nif (showdown.helper.isUndefined(console)) {\r\n  console = {\r\n    warn: function (msg) {\r\n      'use strict';\r\n      alert(msg);\r\n    },\r\n    log: function (msg) {\r\n      'use strict';\r\n      alert(msg);\r\n    },\r\n    error: function (msg) {\r\n      'use strict';\r\n      throw msg;\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Created by Estevao on 31-05-2015.\r\n */\r\n\r\n/**\r\n * Showdown Converter class\r\n * @class\r\n * @param {object} [converterOptions]\r\n * @returns {Converter}\r\n */\r\nshowdown.Converter = function (converterOptions) {\r\n  'use strict';\r\n\r\n  var\r\n      /**\r\n       * Options used by this converter\r\n       * @private\r\n       * @type {{}}\r\n       */\r\n      options = {},\r\n\r\n      /**\r\n       * Language extensions used by this converter\r\n       * @private\r\n       * @type {Array}\r\n       */\r\n      langExtensions = [],\r\n\r\n      /**\r\n       * Output modifiers extensions used by this converter\r\n       * @private\r\n       * @type {Array}\r\n       */\r\n      outputModifiers = [],\r\n\r\n      /**\r\n       * Event listeners\r\n       * @private\r\n       * @type {{}}\r\n       */\r\n      listeners = {};\r\n\r\n  _constructor();\r\n\r\n  /**\r\n   * Converter constructor\r\n   * @private\r\n   */\r\n  function _constructor() {\r\n    converterOptions = converterOptions || {};\r\n\r\n    for (var gOpt in globalOptions) {\r\n      if (globalOptions.hasOwnProperty(gOpt)) {\r\n        options[gOpt] = globalOptions[gOpt];\r\n      }\r\n    }\r\n\r\n    // Merge options\r\n    if (typeof converterOptions === 'object') {\r\n      for (var opt in converterOptions) {\r\n        if (converterOptions.hasOwnProperty(opt)) {\r\n          options[opt] = converterOptions[opt];\r\n        }\r\n      }\r\n    } else {\r\n      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +\r\n      ' was passed instead.');\r\n    }\r\n\r\n    if (options.extensions) {\r\n      showdown.helper.forEach(options.extensions, _parseExtension);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse extension\r\n   * @param {*} ext\r\n   * @param {string} [name='']\r\n   * @private\r\n   */\r\n  function _parseExtension(ext, name) {\r\n\r\n    name = name || null;\r\n    // If it's a string, the extension was previously loaded\r\n    if (showdown.helper.isString(ext)) {\r\n      ext = showdown.helper.stdExtName(ext);\r\n      name = ext;\r\n\r\n      // LEGACY_SUPPORT CODE\r\n      if (showdown.extensions[ext]) {\r\n        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +\r\n          'Please inform the developer that the extension should be updated!');\r\n        legacyExtensionLoading(showdown.extensions[ext], ext);\r\n        return;\r\n      // END LEGACY SUPPORT CODE\r\n\r\n      } else if (!showdown.helper.isUndefined(extensions[ext])) {\r\n        ext = extensions[ext];\r\n\r\n      } else {\r\n        throw Error('Extension \"' + ext + '\" could not be loaded. It was either not found or is not a valid extension.');\r\n      }\r\n    }\r\n\r\n    if (typeof ext === 'function') {\r\n      ext = ext();\r\n    }\r\n\r\n    if (!showdown.helper.isArray(ext)) {\r\n      ext = [ext];\r\n    }\r\n\r\n    var validExt = validate(ext, name);\r\n    if (!validExt.valid) {\r\n      throw Error(validExt.error);\r\n    }\r\n\r\n    for (var i = 0; i < ext.length; ++i) {\r\n      switch (ext[i].type) {\r\n\r\n        case 'lang':\r\n          langExtensions.push(ext[i]);\r\n          break;\r\n\r\n        case 'output':\r\n          outputModifiers.push(ext[i]);\r\n          break;\r\n      }\r\n      if (ext[i].hasOwnProperty(listeners)) {\r\n        for (var ln in ext[i].listeners) {\r\n          if (ext[i].listeners.hasOwnProperty(ln)) {\r\n            listen(ln, ext[i].listeners[ln]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * LEGACY_SUPPORT\r\n   * @param {*} ext\r\n   * @param {string} name\r\n   */\r\n  function legacyExtensionLoading(ext, name) {\r\n    if (typeof ext === 'function') {\r\n      ext = ext(new showdown.Converter());\r\n    }\r\n    if (!showdown.helper.isArray(ext)) {\r\n      ext = [ext];\r\n    }\r\n    var valid = validate(ext, name);\r\n\r\n    if (!valid.valid) {\r\n      throw Error(valid.error);\r\n    }\r\n\r\n    for (var i = 0; i < ext.length; ++i) {\r\n      switch (ext[i].type) {\r\n        case 'lang':\r\n          langExtensions.push(ext[i]);\r\n          break;\r\n        case 'output':\r\n          outputModifiers.push(ext[i]);\r\n          break;\r\n        default:// should never reach here\r\n          throw Error('Extension loader error: Type unrecognized!!!');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Listen to an event\r\n   * @param {string} name\r\n   * @param {function} callback\r\n   */\r\n  function listen(name, callback) {\r\n    if (!showdown.helper.isString(name)) {\r\n      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');\r\n    }\r\n\r\n    if (typeof callback !== 'function') {\r\n      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');\r\n    }\r\n\r\n    if (!listeners.hasOwnProperty(name)) {\r\n      listeners[name] = [];\r\n    }\r\n    listeners[name].push(callback);\r\n  }\r\n\r\n  function rTrimInputText(text) {\r\n    var rsp = text.match(/^\\s*/)[0].length,\r\n        rgx = new RegExp('^\\\\s{0,' + rsp + '}', 'gm');\r\n    return text.replace(rgx, '');\r\n  }\r\n\r\n  /**\r\n   * Dispatch an event\r\n   * @private\r\n   * @param {string} evtName Event name\r\n   * @param {string} text Text\r\n   * @param {{}} options Converter Options\r\n   * @param {{}} globals\r\n   * @returns {string}\r\n   */\r\n  this._dispatch = function dispatch (evtName, text, options, globals) {\r\n    if (listeners.hasOwnProperty(evtName)) {\r\n      for (var ei = 0; ei < listeners[evtName].length; ++ei) {\r\n        var nText = listeners[evtName][ei](evtName, text, this, options, globals);\r\n        if (nText && typeof nText !== 'undefined') {\r\n          text = nText;\r\n        }\r\n      }\r\n    }\r\n    return text;\r\n  };\r\n\r\n  /**\r\n   * Listen to an event\r\n   * @param {string} name\r\n   * @param {function} callback\r\n   * @returns {showdown.Converter}\r\n   */\r\n  this.listen = function (name, callback) {\r\n    listen(name, callback);\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Converts a markdown string into HTML\r\n   * @param {string} text\r\n   * @returns {*}\r\n   */\r\n  this.makeHtml = function (text) {\r\n    //check if text is not falsy\r\n    if (!text) {\r\n      return text;\r\n    }\r\n\r\n    var globals = {\r\n      gHtmlBlocks:     [],\r\n      gHtmlMdBlocks:   [],\r\n      gHtmlSpans:      [],\r\n      gUrls:           {},\r\n      gTitles:         {},\r\n      gDimensions:     {},\r\n      gListLevel:      0,\r\n      hashLinkCounts:  {},\r\n      langExtensions:  langExtensions,\r\n      outputModifiers: outputModifiers,\r\n      converter:       this,\r\n      ghCodeBlocks:    []\r\n    };\r\n\r\n    // attacklab: Replace ~ with ~T\r\n    // This lets us use tilde as an escape char to avoid md5 hashes\r\n    // The choice of character is arbitrary; anything that isn't\r\n    // magic in Markdown will work.\r\n    text = text.replace(/~/g, '~T');\r\n\r\n    // attacklab: Replace $ with ~D\r\n    // RegExp interprets $ as a special character\r\n    // when it's in a replacement string\r\n    text = text.replace(/\\$/g, '~D');\r\n\r\n    // Standardize line endings\r\n    text = text.replace(/\\r\\n/g, '\\n'); // DOS to Unix\r\n    text = text.replace(/\\r/g, '\\n'); // Mac to Unix\r\n\r\n    if (options.smartIndentationFix) {\r\n      text = rTrimInputText(text);\r\n    }\r\n\r\n    // Make sure text begins and ends with a couple of newlines:\r\n    //text = '\\n\\n' + text + '\\n\\n';\r\n    text = text;\r\n    // detab\r\n    text = showdown.subParser('detab')(text, options, globals);\r\n\r\n    // stripBlankLines\r\n    text = showdown.subParser('stripBlankLines')(text, options, globals);\r\n\r\n    //run languageExtensions\r\n    showdown.helper.forEach(langExtensions, function (ext) {\r\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\r\n    });\r\n\r\n    // run the sub parsers\r\n    text = showdown.subParser('hashPreCodeTags')(text, options, globals);\r\n    text = showdown.subParser('githubCodeBlocks')(text, options, globals);\r\n    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\r\n    text = showdown.subParser('hashHTMLSpans')(text, options, globals);\r\n    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);\r\n    text = showdown.subParser('blockGamut')(text, options, globals);\r\n    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);\r\n    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);\r\n\r\n    // attacklab: Restore dollar signs\r\n    text = text.replace(/~D/g, '$$');\r\n\r\n    // attacklab: Restore tildes\r\n    text = text.replace(/~T/g, '~');\r\n\r\n    // Run output modifiers\r\n    showdown.helper.forEach(outputModifiers, function (ext) {\r\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\r\n    });\r\n    return text;\r\n  };\r\n\r\n  /**\r\n   * Set an option of this Converter instance\r\n   * @param {string} key\r\n   * @param {*} value\r\n   */\r\n  this.setOption = function (key, value) {\r\n    options[key] = value;\r\n  };\r\n\r\n  /**\r\n   * Get the option of this Converter instance\r\n   * @param {string} key\r\n   * @returns {*}\r\n   */\r\n  this.getOption = function (key) {\r\n    return options[key];\r\n  };\r\n\r\n  /**\r\n   * Get the options of this Converter instance\r\n   * @returns {{}}\r\n   */\r\n  this.getOptions = function () {\r\n    return options;\r\n  };\r\n\r\n  /**\r\n   * Add extension to THIS converter\r\n   * @param {{}} extension\r\n   * @param {string} [name=null]\r\n   */\r\n  this.addExtension = function (extension, name) {\r\n    name = name || null;\r\n    _parseExtension(extension, name);\r\n  };\r\n\r\n  /**\r\n   * Use a global registered extension with THIS converter\r\n   * @param {string} extensionName Name of the previously registered extension\r\n   */\r\n  this.useExtension = function (extensionName) {\r\n    _parseExtension(extensionName);\r\n  };\r\n\r\n  /**\r\n   * Set the flavor THIS converter should use\r\n   * @param {string} name\r\n   */\r\n  this.setFlavor = function (name) {\r\n    if (flavor.hasOwnProperty(name)) {\r\n      var preset = flavor[name];\r\n      for (var option in preset) {\r\n        if (preset.hasOwnProperty(option)) {\r\n          options[option] = preset[option];\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Remove an extension from THIS converter.\r\n   * Note: This is a costly operation. It's better to initialize a new converter\r\n   * and specify the extensions you wish to use\r\n   * @param {Array} extension\r\n   */\r\n  this.removeExtension = function (extension) {\r\n    if (!showdown.helper.isArray(extension)) {\r\n      extension = [extension];\r\n    }\r\n    for (var a = 0; a < extension.length; ++a) {\r\n      var ext = extension[a];\r\n      for (var i = 0; i < langExtensions.length; ++i) {\r\n        if (langExtensions[i] === ext) {\r\n          langExtensions[i].splice(i, 1);\r\n        }\r\n      }\r\n      for (var ii = 0; ii < outputModifiers.length; ++i) {\r\n        if (outputModifiers[ii] === ext) {\r\n          outputModifiers[ii].splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get all extension of THIS converter\r\n   * @returns {{language: Array, output: Array}}\r\n   */\r\n  this.getAllExtensions = function () {\r\n    return {\r\n      language: langExtensions,\r\n      output: outputModifiers\r\n    };\r\n  };\r\n};\r\n\r\n/**\r\n * Turn Markdown link shortcuts into XHTML <a> tags.\r\n */\r\nshowdown.subParser('anchors', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('anchors.before', text, options, globals);\r\n\r\n  var writeAnchorTag = function (wholeMatch, m1, m2, m3, m4, m5, m6, m7) {\r\n    if (showdown.helper.isUndefined(m7)) {\r\n      m7 = '';\r\n    }\r\n    wholeMatch = m1;\r\n    var linkText = m2,\r\n        linkId = m3.toLowerCase(),\r\n        url = m4,\r\n        title = m7;\r\n\r\n    if (!url) {\r\n      if (!linkId) {\r\n        // lower-case and turn embedded newlines into spaces\r\n        linkId = linkText.toLowerCase().replace(/ ?\\n/g, ' ');\r\n      }\r\n      url = '#' + linkId;\r\n\r\n      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {\r\n        url = globals.gUrls[linkId];\r\n        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {\r\n          title = globals.gTitles[linkId];\r\n        }\r\n      } else {\r\n        if (wholeMatch.search(/\\(\\s*\\)$/m) > -1) {\r\n          // Special case for explicit empty url\r\n          url = '';\r\n        } else {\r\n          return wholeMatch;\r\n        }\r\n      }\r\n    }\r\n\r\n    url = showdown.helper.escapeCharacters(url, '*_', false);\r\n    var result = '<a href=\"' + url + '\"';\r\n\r\n    if (title !== '' && title !== null) {\r\n      title = title.replace(/\"/g, '&quot;');\r\n      title = showdown.helper.escapeCharacters(title, '*_', false);\r\n      result += ' title=\"' + title + '\"';\r\n    }\r\n\r\n    result += '>' + linkText + '</a>';\r\n\r\n    return result;\r\n  };\r\n\r\n  // First, handle reference-style links: [link text] [id]\r\n  /*\r\n   text = text.replace(/\r\n   (\t\t\t\t\t\t\t// wrap whole match in $1\r\n   \\[\r\n   (\r\n   (?:\r\n   \\[[^\\]]*\\]\t\t// allow brackets nested one level\r\n   |\r\n   [^\\[]\t\t\t// or anything else\r\n   )*\r\n   )\r\n   \\]\r\n\r\n   [ ]?\t\t\t\t\t// one optional space\r\n   (?:\\n[ ]*)?\t\t\t\t// one optional newline followed by spaces\r\n\r\n   \\[\r\n   (.*?)\t\t\t\t\t// id = $3\r\n   \\]\r\n   )()()()()\t\t\t\t\t// pad remaining backreferences\r\n   /g,_DoAnchors_callback);\r\n   */\r\n  text = text.replace(/(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)][ ]?(?:\\n[ ]*)?\\[(.*?)])()()()()/g, writeAnchorTag);\r\n\r\n  //\r\n  // Next, inline-style links: [link text](url \"optional title\")\r\n  //\r\n\r\n  /*\r\n   text = text.replace(/\r\n   (\t\t\t\t\t\t// wrap whole match in $1\r\n   \\[\r\n   (\r\n   (?:\r\n   \\[[^\\]]*\\]\t// allow brackets nested one level\r\n   |\r\n   [^\\[\\]]\t\t\t// or anything else\r\n   )\r\n   )\r\n   \\]\r\n   \\(\t\t\t\t\t\t// literal paren\r\n   [ \\t]*\r\n   ()\t\t\t\t\t\t// no id, so leave $3 empty\r\n   <?(.*?)>?\t\t\t\t// href = $4\r\n   [ \\t]*\r\n   (\t\t\t\t\t\t// $5\r\n   (['\"])\t\t\t\t// quote char = $6\r\n   (.*?)\t\t\t\t// Title = $7\r\n   \\6\t\t\t\t\t// matching quote\r\n   [ \\t]*\t\t\t\t// ignore any spaces/tabs between closing quote and )\r\n   )?\t\t\t\t\t\t// title is optional\r\n   \\)\r\n   )\r\n   /g,writeAnchorTag);\r\n   */\r\n  text = text.replace(/(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]\\([ \\t]*()<?(.*?(?:\\(.*?\\).*?)?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g,\r\n                      writeAnchorTag);\r\n\r\n  //\r\n  // Last, handle reference-style shortcuts: [link text]\r\n  // These must come last in case you've also got [link test][1]\r\n  // or [link test](/foo)\r\n  //\r\n\r\n  /*\r\n   text = text.replace(/\r\n   (                // wrap whole match in $1\r\n   \\[\r\n   ([^\\[\\]]+)       // link text = $2; can't contain '[' or ']'\r\n   \\]\r\n   )()()()()()      // pad rest of backreferences\r\n   /g, writeAnchorTag);\r\n   */\r\n  text = text.replace(/(\\[([^\\[\\]]+)])()()()()()/g, writeAnchorTag);\r\n\r\n  text = globals.converter._dispatch('anchors.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('autoLinks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('autoLinks.before', text, options, globals);\r\n\r\n  var simpleURLRegex  = /\\b(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+\\.[^'\">\\s]+)(?=\\s|$)(?![\"<>])/gi,\r\n      delimUrlRegex   = /<(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+)>/gi,\r\n      simpleMailRegex = /(?:^|[ \\n\\t])([A-Za-z0-9!#$%&'*+-/=?^_`\\{|}~\\.]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)(?:$|[ \\n\\t])/gi,\r\n      delimMailRegex  = /<(?:mailto:)?([-.\\w]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi;\r\n\r\n  text = text.replace(delimUrlRegex, replaceLink);\r\n  text = text.replace(delimMailRegex, replaceMail);\r\n  // simpleURLRegex  = /\\b(((https?|ftp|dict):\\/\\/|www\\.)[-.+~:?#@!$&'()*,;=[\\]\\w]+)\\b/gi,\r\n  // Email addresses: <address@domain.foo>\r\n\r\n  if (options.simplifiedAutoLink) {\r\n    text = text.replace(simpleURLRegex, replaceLink);\r\n    text = text.replace(simpleMailRegex, replaceMail);\r\n  }\r\n\r\n  function replaceLink(wm, link) {\r\n    var lnkTxt = link;\r\n    if (/^www\\./i.test(link)) {\r\n      link = link.replace(/^www\\./i, 'http://www.');\r\n    }\r\n    return '<a href=\"' + link + '\">' + lnkTxt + '</a>';\r\n  }\r\n\r\n  function replaceMail(wholeMatch, m1) {\r\n    var unescapedStr = showdown.subParser('unescapeSpecialChars')(m1);\r\n    return showdown.subParser('encodeEmailAddress')(unescapedStr);\r\n  }\r\n\r\n  text = globals.converter._dispatch('autoLinks.after', text, options, globals);\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * These are all the transformations that form block-level\r\n * tags like paragraphs, headers, and list items.\r\n */\r\nshowdown.subParser('blockGamut', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('blockGamut.before', text, options, globals);\r\n\r\n  // we parse blockquotes first so that we can have headings and hrs\r\n  // inside blockquotes\r\n  text = showdown.subParser('blockQuotes')(text, options, globals);\r\n  text = showdown.subParser('headers')(text, options, globals);\r\n\r\n  // Do Horizontal Rules:\r\n  var key = showdown.subParser('hashBlock')('<hr />', options, globals);\r\n  text = text.replace(/^[ ]{0,2}([ ]?\\*[ ]?){3,}[ \\t]*$/gm, key);\r\n  text = text.replace(/^[ ]{0,2}([ ]?\\-[ ]?){3,}[ \\t]*$/gm, key);\r\n  text = text.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \\t]*$/gm, key);\r\n\r\n  text = showdown.subParser('lists')(text, options, globals);\r\n  text = showdown.subParser('codeBlocks')(text, options, globals);\r\n  text = showdown.subParser('tables')(text, options, globals);\r\n\r\n  // We already ran _HashHTMLBlocks() before, in Markdown(), but that\r\n  // was to escape raw HTML in the original Markdown source. This time,\r\n  // we're escaping the markup we've just created, so that we don't wrap\r\n  // <p> tags around block-level tags.\r\n  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\r\n  text = showdown.subParser('paragraphs')(text, options, globals);\r\n\r\n  text = globals.converter._dispatch('blockGamut.after', text, options, globals);\r\n\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('blockQuotes', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);\r\n  /*\r\n   text = text.replace(/\r\n   (\t\t\t\t\t\t\t\t// Wrap whole match in $1\r\n   (\r\n   ^[ \\t]*>[ \\t]?\t\t\t// '>' at the start of a line\r\n   .+\\n\t\t\t\t\t// rest of the first line\r\n   (.+\\n)*\t\t\t\t\t// subsequent consecutive lines\r\n   \\n*\t\t\t\t\t\t// blanks\r\n   )+\r\n   )\r\n   /gm, function(){...});\r\n   */\r\n\r\n  text = text.replace(/((^[ \\t]{0,3}>[ \\t]?.+\\n(.+\\n)*\\n*)+)/gm, function (wholeMatch, m1) {\r\n    var bq = m1;\r\n\r\n    // attacklab: hack around Konqueror 3.5.4 bug:\r\n    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\r\n    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, '~0'); // trim one level of quoting\r\n\r\n    // attacklab: clean up hack\r\n    bq = bq.replace(/~0/g, '');\r\n\r\n    bq = bq.replace(/^[ \\t]+$/gm, ''); // trim whitespace-only lines\r\n    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);\r\n    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse\r\n\r\n    bq = bq.replace(/(^|\\n)/g, '$1  ');\r\n    // These leading spaces screw with <pre> content, so we need to fix that:\r\n    bq = bq.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm, function (wholeMatch, m1) {\r\n      var pre = m1;\r\n      // attacklab: hack around Konqueror 3.5.4 bug:\r\n      pre = pre.replace(/^  /mg, '~0');\r\n      pre = pre.replace(/~0/g, '');\r\n      return pre;\r\n    });\r\n\r\n    return showdown.subParser('hashBlock')('<blockquote>\\n' + bq + '\\n</blockquote>', options, globals);\r\n  });\r\n\r\n  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Process Markdown `<pre><code>` blocks.\r\n */\r\nshowdown.subParser('codeBlocks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);\r\n  /*\r\n   text = text.replace(text,\r\n   /(?:\\n\\n|^)\r\n   (\t\t\t\t\t\t\t\t// $1 = the code block -- one or more lines, starting with a space/tab\r\n   (?:\r\n   (?:[ ]{4}|\\t)\t\t\t// Lines must start with a tab or a tab-width of spaces - attacklab: g_tab_width\r\n   .*\\n+\r\n   )+\r\n   )\r\n   (\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))\t// attacklab: g_tab_width\r\n   /g,function(){...});\r\n   */\r\n\r\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\r\n  text += '~0';\r\n\r\n  var pattern = /(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))/g;\r\n  text = text.replace(pattern, function (wholeMatch, m1, m2) {\r\n    var codeblock = m1,\r\n        nextChar = m2,\r\n        end = '\\n';\r\n\r\n    codeblock = showdown.subParser('outdent')(codeblock);\r\n    codeblock = showdown.subParser('encodeCode')(codeblock);\r\n    codeblock = showdown.subParser('detab')(codeblock);\r\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\r\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing newlines\r\n\r\n    if (options.omitExtraWLInCodeBlocks) {\r\n      end = '';\r\n    }\r\n\r\n    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';\r\n\r\n    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;\r\n  });\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n *\r\n *   *  Backtick quotes are used for <code></code> spans.\r\n *\r\n *   *  You can use multiple backticks as the delimiters if you want to\r\n *     include literal backticks in the code span. So, this input:\r\n *\r\n *         Just type ``foo `bar` baz`` at the prompt.\r\n *\r\n *       Will translate to:\r\n *\r\n *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\r\n *\r\n *    There's no arbitrary limit to the number of backticks you\r\n *    can use as delimters. If you need three consecutive backticks\r\n *    in your code, use four for delimiters, etc.\r\n *\r\n *  *  You can use spaces to get literal backticks at the edges:\r\n *\r\n *         ... type `` `bar` `` ...\r\n *\r\n *       Turns to:\r\n *\r\n *         ... type <code>`bar`</code> ...\r\n */\r\nshowdown.subParser('codeSpans', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('codeSpans.before', text, options, globals);\r\n\r\n  /*\r\n   text = text.replace(/\r\n   (^|[^\\\\])\t\t\t\t\t// Character before opening ` can't be a backslash\r\n   (`+)\t\t\t\t\t\t// $2 = Opening run of `\r\n   (\t\t\t\t\t\t\t// $3 = The code block\r\n   [^\\r]*?\r\n   [^`]\t\t\t\t\t// attacklab: work around lack of lookbehind\r\n   )\r\n   \\2\t\t\t\t\t\t\t// Matching closer\r\n   (?!`)\r\n   /gm, function(){...});\r\n   */\r\n\r\n  if (typeof(text) === 'undefined') {\r\n    text = '';\r\n  }\r\n  text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\r\n    function (wholeMatch, m1, m2, m3) {\r\n      var c = m3;\r\n      c = c.replace(/^([ \\t]*)/g, '');\t// leading whitespace\r\n      c = c.replace(/[ \\t]*$/g, '');\t// trailing whitespace\r\n      c = showdown.subParser('encodeCode')(c);\r\n      return m1 + '<code>' + c + '</code>';\r\n    }\r\n  );\r\n\r\n  text = globals.converter._dispatch('codeSpans.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Convert all tabs to spaces\r\n */\r\nshowdown.subParser('detab', function (text) {\r\n  'use strict';\r\n\r\n  // expand first n-1 tabs\r\n  text = text.replace(/\\t(?=\\t)/g, '    '); // g_tab_width\r\n\r\n  // replace the nth with two sentinels\r\n  text = text.replace(/\\t/g, '~A~B');\r\n\r\n  // use the sentinel to anchor our regex so it doesn't explode\r\n  text = text.replace(/~B(.+?)~A/g, function (wholeMatch, m1) {\r\n    var leadingText = m1,\r\n        numSpaces = 4 - leadingText.length % 4;  // g_tab_width\r\n\r\n    // there *must* be a better way to do this:\r\n    for (var i = 0; i < numSpaces; i++) {\r\n      leadingText += ' ';\r\n    }\r\n\r\n    return leadingText;\r\n  });\r\n\r\n  // clean up sentinels\r\n  text = text.replace(/~A/g, '    ');  // g_tab_width\r\n  text = text.replace(/~B/g, '');\r\n\r\n  return text;\r\n\r\n});\r\n\r\n/**\r\n * Smart processing for ampersands and angle brackets that need to be encoded.\r\n */\r\nshowdown.subParser('encodeAmpsAndAngles', function (text) {\r\n  'use strict';\r\n  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\r\n  // http://bumppo.net/projects/amputator/\r\n  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, '&amp;');\r\n\r\n  // Encode naked <'s\r\n  text = text.replace(/<(?![a-z\\/?\\$!])/gi, '&lt;');\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Returns the string, with after processing the following backslash escape sequences.\r\n *\r\n * attacklab: The polite way to do this is with the new escapeCharacters() function:\r\n *\r\n *    text = escapeCharacters(text,\"\\\\\",true);\r\n *    text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\r\n *\r\n * ...but we're sidestepping its use of the (slow) RegExp constructor\r\n * as an optimization for Firefox.  This function gets called a LOT.\r\n */\r\nshowdown.subParser('encodeBackslashEscapes', function (text) {\r\n  'use strict';\r\n  text = text.replace(/\\\\(\\\\)/g, showdown.helper.escapeCharactersCallback);\r\n  text = text.replace(/\\\\([`*_{}\\[\\]()>#+-.!])/g, showdown.helper.escapeCharactersCallback);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Encode/escape certain characters inside Markdown code runs.\r\n * The point is that in code, these characters are literals,\r\n * and lose their special Markdown meanings.\r\n */\r\nshowdown.subParser('encodeCode', function (text) {\r\n  'use strict';\r\n\r\n  // Encode all ampersands; HTML entities are not\r\n  // entities within a Markdown code span.\r\n  text = text.replace(/&/g, '&amp;');\r\n\r\n  // Do the angle bracket song and dance:\r\n  text = text.replace(/</g, '&lt;');\r\n  text = text.replace(/>/g, '&gt;');\r\n\r\n  // Now, escape characters that are magic in Markdown:\r\n  text = showdown.helper.escapeCharacters(text, '*_{}[]\\\\', false);\r\n\r\n  // jj the line above breaks this:\r\n  //---\r\n  //* Item\r\n  //   1. Subitem\r\n  //            special char: *\r\n  // ---\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n *  Input: an email address, e.g. \"foo@example.com\"\r\n *\r\n *  Output: the email address as a mailto link, with each character\r\n *    of the address encoded as either a decimal or hex entity, in\r\n *    the hopes of foiling most address harvesting spam bots. E.g.:\r\n *\r\n *    <a href=\"&#x6D;&#97;&#105;&#108;&#x74;&#111;:&#102;&#111;&#111;&#64;&#101;\r\n *       x&#x61;&#109;&#x70;&#108;&#x65;&#x2E;&#99;&#111;&#109;\">&#102;&#111;&#111;\r\n *       &#64;&#101;x&#x61;&#109;&#x70;&#108;&#x65;&#x2E;&#99;&#111;&#109;</a>\r\n *\r\n *  Based on a filter by Matthew Wickline, posted to the BBEdit-Talk\r\n *  mailing list: <http://tinyurl.com/yu7ue>\r\n *\r\n */\r\nshowdown.subParser('encodeEmailAddress', function (addr) {\r\n  'use strict';\r\n\r\n  var encode = [\r\n    function (ch) {\r\n      return '&#' + ch.charCodeAt(0) + ';';\r\n    },\r\n    function (ch) {\r\n      return '&#x' + ch.charCodeAt(0).toString(16) + ';';\r\n    },\r\n    function (ch) {\r\n      return ch;\r\n    }\r\n  ];\r\n\r\n  addr = 'mailto:' + addr;\r\n\r\n  addr = addr.replace(/./g, function (ch) {\r\n    if (ch === '@') {\r\n      // this *must* be encoded. I insist.\r\n      ch = encode[Math.floor(Math.random() * 2)](ch);\r\n    } else if (ch !== ':') {\r\n      // leave ':' alone (to spot mailto: later)\r\n      var r = Math.random();\r\n      // roughly 10% raw, 45% hex, 45% dec\r\n      ch = (\r\n        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)\r\n      );\r\n    }\r\n    return ch;\r\n  });\r\n\r\n  addr = '<a href=\"' + addr + '\">' + addr + '</a>';\r\n  addr = addr.replace(/\">.+:/g, '\">'); // strip the mailto: from the visible part\r\n\r\n  return addr;\r\n});\r\n\r\n/**\r\n * Within tags -- meaning between < and > -- encode [\\ ` * _] so they\r\n * don't conflict with their use in Markdown for code, italics and strong.\r\n */\r\nshowdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text) {\r\n  'use strict';\r\n\r\n  // Build a regex to find HTML tags and comments.  See Friedl's\r\n  // \"Mastering Regular Expressions\", 2nd Ed., pp. 200-201.\r\n  var regex = /(<[a-z\\/!$](\"[^\"]*\"|'[^']*'|[^'\">])*>|<!(--.*?--\\s*)+>)/gi;\r\n\r\n  text = text.replace(regex, function (wholeMatch) {\r\n    var tag = wholeMatch.replace(/(.)<\\/?code>(?=.)/g, '$1`');\r\n    tag = showdown.helper.escapeCharacters(tag, '\\\\`*_', false);\r\n    return tag;\r\n  });\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Handle github codeblocks prior to running HashHTML so that\r\n * HTML contained within the codeblock gets escaped properly\r\n * Example:\r\n * ```ruby\r\n *     def hello_world(x)\r\n *       puts \"Hello, #{x}\"\r\n *     end\r\n * ```\r\n */\r\nshowdown.subParser('githubCodeBlocks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  // early exit if option is not enabled\r\n  if (!options.ghCodeBlocks) {\r\n    return text;\r\n  }\r\n\r\n  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);\r\n\r\n  text += '~0';\r\n\r\n  text = text.replace(/(?:^|\\n)```(.*)\\n([\\s\\S]*?)\\n```/g, function (wholeMatch, language, codeblock) {\r\n    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\\n';\r\n\r\n    // First parse the github code block\r\n    codeblock = showdown.subParser('encodeCode')(codeblock);\r\n    codeblock = showdown.subParser('detab')(codeblock);\r\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\r\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing whitespace\r\n\r\n    codeblock = '<pre><code' + (language ? ' class=\"' + language + ' language-' + language + '\"' : '') + '>' + codeblock + end + '</code></pre>';\r\n\r\n    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);\r\n\r\n    // Since GHCodeblocks can be false positives, we need to\r\n    // store the primitive text and the parsed text in a global var,\r\n    // and then return a token\r\n    return '\\n\\n~G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\r\n  });\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);\r\n});\r\n\r\nshowdown.subParser('hashBlock', function (text, options, globals) {\r\n  'use strict';\r\n  text = text.replace(/(^\\n+|\\n+$)/g, '');\r\n  return '\\n\\n~K' + (globals.gHtmlBlocks.push(text) - 1) + 'K\\n\\n';\r\n});\r\n\r\nshowdown.subParser('hashElement', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  return function (wholeMatch, m1) {\r\n    var blockText = m1;\r\n\r\n    // Undo double lines\r\n    blockText = blockText.replace(/\\n\\n/g, '\\n');\r\n    blockText = blockText.replace(/^\\n/, '');\r\n\r\n    // strip trailing blank lines\r\n    blockText = blockText.replace(/\\n+$/g, '');\r\n\r\n    // Replace the element text with a marker (\"~KxK\" where x is its key)\r\n    blockText = '\\n\\n~K' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\\n\\n';\r\n\r\n    return blockText;\r\n  };\r\n});\r\n\r\nshowdown.subParser('hashHTMLBlocks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  var blockTags = [\r\n      'pre',\r\n      'div',\r\n      'h1',\r\n      'h2',\r\n      'h3',\r\n      'h4',\r\n      'h5',\r\n      'h6',\r\n      'blockquote',\r\n      'table',\r\n      'dl',\r\n      'ol',\r\n      'ul',\r\n      'script',\r\n      'noscript',\r\n      'form',\r\n      'fieldset',\r\n      'iframe',\r\n      'math',\r\n      'style',\r\n      'section',\r\n      'header',\r\n      'footer',\r\n      'nav',\r\n      'article',\r\n      'aside',\r\n      'address',\r\n      'audio',\r\n      'canvas',\r\n      'figure',\r\n      'hgroup',\r\n      'output',\r\n      'video',\r\n      'p'\r\n    ],\r\n    repFunc = function (wholeMatch, match, left, right) {\r\n      var txt = wholeMatch;\r\n      // check if this html element is marked as markdown\r\n      // if so, it's contents should be parsed as markdown\r\n      if (left.search(/\\bmarkdown\\b/) !== -1) {\r\n        txt = left + globals.converter.makeHtml(match) + right;\r\n      }\r\n      return '\\n\\n~K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\r\n    };\r\n\r\n  for (var i = 0; i < blockTags.length; ++i) {\r\n    text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^(?: |\\\\t){0,3}<' + blockTags[i] + '\\\\b[^>]*>', '</' + blockTags[i] + '>', 'gim');\r\n  }\r\n\r\n  // HR SPECIAL CASE\r\n  text = text.replace(/(\\n[ ]{0,3}(<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,\r\n    showdown.subParser('hashElement')(text, options, globals));\r\n\r\n  // Special case for standalone HTML comments:\r\n  text = text.replace(/(<!--[\\s\\S]*?-->)/g,\r\n    showdown.subParser('hashElement')(text, options, globals));\r\n\r\n  // PHP and ASP-style processor instructions (<?...?> and <%...%>)\r\n  text = text.replace(/(?:\\n\\n)([ ]{0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,\r\n    showdown.subParser('hashElement')(text, options, globals));\r\n  return text;\r\n});\r\n\r\n/**\r\n * Hash span elements that should not be parsed as markdown\r\n */\r\nshowdown.subParser('hashHTMLSpans', function (text, config, globals) {\r\n  'use strict';\r\n\r\n  var matches = showdown.helper.matchRecursiveRegExp(text, '<code\\\\b[^>]*>', '</code>', 'gi');\r\n\r\n  for (var i = 0; i < matches.length; ++i) {\r\n    text = text.replace(matches[i][0], '~L' + (globals.gHtmlSpans.push(matches[i][0]) - 1) + 'L');\r\n  }\r\n  return text;\r\n});\r\n\r\n/**\r\n * Unhash HTML spans\r\n */\r\nshowdown.subParser('unhashHTMLSpans', function (text, config, globals) {\r\n  'use strict';\r\n\r\n  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {\r\n    text = text.replace('~L' + i + 'L', globals.gHtmlSpans[i]);\r\n  }\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Hash span elements that should not be parsed as markdown\r\n */\r\nshowdown.subParser('hashPreCodeTags', function (text, config, globals) {\r\n  'use strict';\r\n\r\n  var repFunc = function (wholeMatch, match, left, right) {\r\n    // encode html entities\r\n    var codeblock = left + showdown.subParser('encodeCode')(match) + right;\r\n    return '\\n\\n~G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\r\n  };\r\n\r\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^(?: |\\\\t){0,3}<pre\\\\b[^>]*>\\\\s*<code\\\\b[^>]*>', '^(?: |\\\\t){0,3}</code>\\\\s*</pre>', 'gim');\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('headers', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('headers.before', text, options, globals);\r\n\r\n  var prefixHeader = options.prefixHeaderId,\r\n      headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),\r\n\r\n  // Set text-style headers:\r\n  //\tHeader 1\r\n  //\t========\r\n  //\r\n  //\tHeader 2\r\n  //\t--------\r\n  //\r\n      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n={2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\r\n      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n-{2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm;\r\n\r\n  text = text.replace(setextRegexH1, function (wholeMatch, m1) {\r\n\r\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\r\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\r\n        hLevel = headerLevelStart,\r\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\r\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\r\n  });\r\n\r\n  text = text.replace(setextRegexH2, function (matchFound, m1) {\r\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\r\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\r\n        hLevel = headerLevelStart + 1,\r\n      hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\r\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\r\n  });\r\n\r\n  // atx-style headers:\r\n  //  # Header 1\r\n  //  ## Header 2\r\n  //  ## Header 2 with closing hashes ##\r\n  //  ...\r\n  //  ###### Header 6\r\n  //\r\n  text = text.replace(/^(#{1,6})[ \\t]*(.+?)[ \\t]*#*\\n+/gm, function (wholeMatch, m1, m2) {\r\n    var span = showdown.subParser('spanGamut')(m2, options, globals),\r\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m2) + '\"',\r\n        hLevel = headerLevelStart - 1 + m1.length,\r\n        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';\r\n\r\n    return showdown.subParser('hashBlock')(header, options, globals);\r\n  });\r\n\r\n  function headerId(m) {\r\n    var title, escapedId = m.replace(/[^\\w]/g, '').toLowerCase();\r\n\r\n    if (globals.hashLinkCounts[escapedId]) {\r\n      title = escapedId + '-' + (globals.hashLinkCounts[escapedId]++);\r\n    } else {\r\n      title = escapedId;\r\n      globals.hashLinkCounts[escapedId] = 1;\r\n    }\r\n\r\n    // Prefix id to prevent causing inadvertent pre-existing style matches.\r\n    if (prefixHeader === true) {\r\n      prefixHeader = 'section';\r\n    }\r\n\r\n    if (showdown.helper.isString(prefixHeader)) {\r\n      return prefixHeader + title;\r\n    }\r\n    return title;\r\n  }\r\n\r\n  text = globals.converter._dispatch('headers.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Turn Markdown image shortcuts into <img> tags.\r\n */\r\nshowdown.subParser('images', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('images.before', text, options, globals);\r\n\r\n  var inlineRegExp    = /!\\[(.*?)]\\s?\\([ \\t]*()<?(\\S+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:(['\"])(.*?)\\6[ \\t]*)?\\)/g,\r\n      referenceRegExp = /!\\[([^\\]]*?)] ?(?:\\n *)?\\[(.*?)]()()()()()/g;\r\n\r\n  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {\r\n\r\n    var gUrls   = globals.gUrls,\r\n        gTitles = globals.gTitles,\r\n        gDims   = globals.gDimensions;\r\n\r\n    linkId = linkId.toLowerCase();\r\n\r\n    if (!title) {\r\n      title = '';\r\n    }\r\n\r\n    if (url === '' || url === null) {\r\n      if (linkId === '' || linkId === null) {\r\n        // lower-case and turn embedded newlines into spaces\r\n        linkId = altText.toLowerCase().replace(/ ?\\n/g, ' ');\r\n      }\r\n      url = '#' + linkId;\r\n\r\n      if (!showdown.helper.isUndefined(gUrls[linkId])) {\r\n        url = gUrls[linkId];\r\n        if (!showdown.helper.isUndefined(gTitles[linkId])) {\r\n          title = gTitles[linkId];\r\n        }\r\n        if (!showdown.helper.isUndefined(gDims[linkId])) {\r\n          width = gDims[linkId].width;\r\n          height = gDims[linkId].height;\r\n        }\r\n      } else {\r\n        return wholeMatch;\r\n      }\r\n    }\r\n\r\n    altText = altText.replace(/\"/g, '&quot;');\r\n    altText = showdown.helper.escapeCharacters(altText, '*_', false);\r\n    url = showdown.helper.escapeCharacters(url, '*_', false);\r\n    var result = '<img src=\"' + url + '\" alt=\"' + altText + '\"';\r\n\r\n    if (title) {\r\n      title = title.replace(/\"/g, '&quot;');\r\n      title = showdown.helper.escapeCharacters(title, '*_', false);\r\n      result += ' title=\"' + title + '\"';\r\n    }\r\n\r\n    if (width && height) {\r\n      width  = (width === '*') ? 'auto' : width;\r\n      height = (height === '*') ? 'auto' : height;\r\n\r\n      result += ' width=\"' + width + '\"';\r\n      result += ' height=\"' + height + '\"';\r\n    }\r\n\r\n    result += ' />';\r\n    return result;\r\n  }\r\n\r\n  // First, handle reference-style labeled images: ![alt text][id]\r\n  text = text.replace(referenceRegExp, writeImageTag);\r\n\r\n  // Next, handle inline images:  ![alt text](url =<width>x<height> \"optional title\")\r\n  text = text.replace(inlineRegExp, writeImageTag);\r\n\r\n  text = globals.converter._dispatch('images.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('italicsAndBold', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);\r\n\r\n  if (options.literalMidWordUnderscores) {\r\n    //underscores\r\n    // Since we are consuming a \\s character, we need to add it\r\n    text = text.replace(/(^|\\s|>|\\b)__(?=\\S)([\\s\\S]+?)__(?=\\b|<|\\s|$)/gm, '$1<strong>$2</strong>');\r\n    text = text.replace(/(^|\\s|>|\\b)_(?=\\S)([\\s\\S]+?)_(?=\\b|<|\\s|$)/gm, '$1<em>$2</em>');\r\n    //asterisks\r\n    text = text.replace(/(\\*\\*)(?=\\S)([^\\r]*?\\S[*]*)\\1/g, '<strong>$2</strong>');\r\n    text = text.replace(/(\\*)(?=\\S)([^\\r]*?\\S)\\1/g, '<em>$2</em>');\r\n\r\n  } else {\r\n    // <strong> must go first:\r\n    text = text.replace(/(\\*\\*|__)(?=\\S)([^\\r]*?\\S[*_]*)\\1/g, '<strong>$2</strong>');\r\n    text = text.replace(/(\\*|_)(?=\\S)([^\\r]*?\\S)\\1/g, '<em>$2</em>');\r\n  }\r\n\r\n  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Form HTML ordered (numbered) and unordered (bulleted) lists.\r\n */\r\nshowdown.subParser('lists', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('lists.before', text, options, globals);\r\n  /**\r\n   * Process the contents of a single ordered or unordered list, splitting it\r\n   * into individual list items.\r\n   * @param {string} listStr\r\n   * @param {boolean} trimTrailing\r\n   * @returns {string}\r\n   */\r\n  function processListItems (listStr, trimTrailing) {\r\n    // The $g_list_level global keeps track of when we're inside a list.\r\n    // Each time we enter a list, we increment it; when we leave a list,\r\n    // we decrement. If it's zero, we're not in a list anymore.\r\n    //\r\n    // We do this because when we're not inside a list, we want to treat\r\n    // something like this:\r\n    //\r\n    //    I recommend upgrading to version\r\n    //    8. Oops, now this line is treated\r\n    //    as a sub-list.\r\n    //\r\n    // As a single paragraph, despite the fact that the second line starts\r\n    // with a digit-period-space sequence.\r\n    //\r\n    // Whereas when we're inside a list (or sub-list), that line will be\r\n    // treated as the start of a sub-list. What a kludge, huh? This is\r\n    // an aspect of Markdown's syntax that's hard to parse perfectly\r\n    // without resorting to mind-reading. Perhaps the solution is to\r\n    // change the syntax rules such that sub-lists must start with a\r\n    // starting cardinal number; e.g. \"1.\" or \"a.\".\r\n    globals.gListLevel++;\r\n\r\n    // trim trailing blank lines:\r\n    listStr = listStr.replace(/\\n{2,}$/, '\\n');\r\n\r\n    // attacklab: add sentinel to emulate \\z\r\n    listStr += '~0';\r\n\r\n    var rgx = /(\\n)?(^[ \\t]*)([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(~0|\\2([*+-]|\\d+[.])[ \\t]+))/gm,\r\n        isParagraphed = (/\\n[ \\t]*\\n(?!~0)/.test(listStr));\r\n\r\n    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {\r\n      checked = (checked && checked.trim() !== '');\r\n      var item = showdown.subParser('outdent')(m4, options, globals),\r\n          bulletStyle = '';\r\n\r\n      // Support for github tasklists\r\n      if (taskbtn && options.tasklists) {\r\n        bulletStyle = ' class=\"task-list-item\" style=\"list-style-type: none;\"';\r\n        item = item.replace(/^[ \\t]*\\[(x|X| )?]/m, function () {\r\n          var otp = '<input type=\"checkbox\" disabled style=\"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;\"';\r\n          if (checked) {\r\n            otp += ' checked';\r\n          }\r\n          otp += '>';\r\n          return otp;\r\n        });\r\n      }\r\n      // m1 - Leading line or\r\n      // Has a double return (multi paragraph) or\r\n      // Has sublist\r\n      if (m1 || (item.search(/\\n{2,}/) > -1)) {\r\n        item = showdown.subParser('githubCodeBlocks')(item, options, globals);\r\n        item = showdown.subParser('blockGamut')(item, options, globals);\r\n      } else {\r\n        // Recursion for sub-lists:\r\n        item = showdown.subParser('lists')(item, options, globals);\r\n        item = item.replace(/\\n$/, ''); // chomp(item)\r\n        if (isParagraphed) {\r\n          item = showdown.subParser('paragraphs')(item, options, globals);\r\n        } else {\r\n          item = showdown.subParser('spanGamut')(item, options, globals);\r\n        }\r\n      }\r\n      item =  '\\n<li' + bulletStyle + '>' + item + '</li>\\n';\r\n      return item;\r\n    });\r\n\r\n    // attacklab: strip sentinel\r\n    listStr = listStr.replace(/~0/g, '');\r\n\r\n    globals.gListLevel--;\r\n\r\n    if (trimTrailing) {\r\n      listStr = listStr.replace(/\\s+$/, '');\r\n    }\r\n\r\n    return listStr;\r\n  }\r\n\r\n  /**\r\n   * Check and parse consecutive lists (better fix for issue #142)\r\n   * @param {string} list\r\n   * @param {string} listType\r\n   * @param {boolean} trimTrailing\r\n   * @returns {string}\r\n   */\r\n  function parseConsecutiveLists(list, listType, trimTrailing) {\r\n    // check if we caught 2 or more consecutive lists by mistake\r\n    // we use the counterRgx, meaning if listType is UL we look for UL and vice versa\r\n    var counterRxg = (listType === 'ul') ? /^ {0,2}\\d+\\.[ \\t]/gm : /^ {0,2}[*+-][ \\t]/gm,\r\n      subLists = [],\r\n      result = '';\r\n\r\n    if (list.search(counterRxg) !== -1) {\r\n      (function parseCL(txt) {\r\n        var pos = txt.search(counterRxg);\r\n        if (pos !== -1) {\r\n          // slice\r\n          result += '\\n\\n<' + listType + '>' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\\n\\n';\r\n\r\n          // invert counterType and listType\r\n          listType = (listType === 'ul') ? 'ol' : 'ul';\r\n          counterRxg = (listType === 'ul') ? /^ {0,2}\\d+\\.[ \\t]/gm : /^ {0,2}[*+-][ \\t]/gm;\r\n\r\n          //recurse\r\n          parseCL(txt.slice(pos));\r\n        } else {\r\n          result += '\\n\\n<' + listType + '>' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\\n\\n';\r\n        }\r\n      })(list);\r\n      for (var i = 0; i < subLists.length; ++i) {\r\n\r\n      }\r\n    } else {\r\n      result = '\\n\\n<' + listType + '>' + processListItems(list, !!trimTrailing) + '</' + listType + '>\\n\\n';\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // attacklab: add sentinel to hack around khtml/safari bug:\r\n  // http://bugs.webkit.org/show_bug.cgi?id=11231\r\n  text += '~0';\r\n\r\n  // Re-usable pattern to match any entire ul or ol list:\r\n  var wholeList = /^(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\r\n\r\n  if (globals.gListLevel) {\r\n    text = text.replace(wholeList, function (wholeMatch, list, m2) {\r\n      var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\r\n      return parseConsecutiveLists(list, listType, true);\r\n    });\r\n  } else {\r\n    wholeList = /(\\n\\n|^\\n?)(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\r\n    //wholeList = /(\\n\\n|^\\n?)( {0,3}([*+-]|\\d+\\.)[ \\t]+[\\s\\S]+?)(?=(~0)|(\\n\\n(?!\\t| {2,}| {0,3}([*+-]|\\d+\\.)[ \\t])))/g;\r\n    text = text.replace(wholeList, function (wholeMatch, m1, list, m3) {\r\n\r\n      var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\r\n      return parseConsecutiveLists(list, listType);\r\n    });\r\n  }\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  text = globals.converter._dispatch('lists.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Remove one level of line-leading tabs or spaces\r\n */\r\nshowdown.subParser('outdent', function (text) {\r\n  'use strict';\r\n\r\n  // attacklab: hack around Konqueror 3.5.4 bug:\r\n  // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\r\n  text = text.replace(/^(\\t|[ ]{1,4})/gm, '~0'); // attacklab: g_tab_width\r\n\r\n  // attacklab: clean up hack\r\n  text = text.replace(/~0/g, '');\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n *\r\n */\r\nshowdown.subParser('paragraphs', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('paragraphs.before', text, options, globals);\r\n  // Strip leading and trailing lines:\r\n  text = text.replace(/^\\n+/g, '');\r\n  text = text.replace(/\\n+$/g, '');\r\n\r\n  var grafs = text.split(/\\n{2,}/g),\r\n      grafsOut = [],\r\n      end = grafs.length; // Wrap <p> tags\r\n\r\n  for (var i = 0; i < end; i++) {\r\n    var str = grafs[i];\r\n    // if this is an HTML marker, copy it\r\n    if (str.search(/~(K|G)(\\d+)\\1/g) >= 0) {\r\n      grafsOut.push(str);\r\n    } else {\r\n      str = showdown.subParser('spanGamut')(str, options, globals);\r\n      str = str.replace(/^([ \\t]*)/g, '<p>');\r\n      str += '</p>';\r\n      grafsOut.push(str);\r\n    }\r\n  }\r\n\r\n  /** Unhashify HTML blocks */\r\n  end = grafsOut.length;\r\n  for (i = 0; i < end; i++) {\r\n    var blockText = '',\r\n        grafsOutIt = grafsOut[i],\r\n        codeFlag = false;\r\n    // if this is a marker for an html block...\r\n    while (grafsOutIt.search(/~(K|G)(\\d+)\\1/) >= 0) {\r\n      var delim = RegExp.$1,\r\n          num   = RegExp.$2;\r\n\r\n      if (delim === 'K') {\r\n        blockText = globals.gHtmlBlocks[num];\r\n      } else {\r\n        // we need to check if ghBlock is a false positive\r\n        if (codeFlag) {\r\n          // use encoded version of all text\r\n          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text);\r\n        } else {\r\n          blockText = globals.ghCodeBlocks[num].codeblock;\r\n        }\r\n      }\r\n      blockText = blockText.replace(/\\$/g, '$$$$'); // Escape any dollar signs\r\n\r\n      grafsOutIt = grafsOutIt.replace(/(\\n\\n)?~(K|G)\\d+\\2(\\n\\n)?/, blockText);\r\n      // Check if grafsOutIt is a pre->code\r\n      if (/^<pre\\b[^>]*>\\s*<code\\b[^>]*>/.test(grafsOutIt)) {\r\n        codeFlag = true;\r\n      }\r\n    }\r\n    grafsOut[i] = grafsOutIt;\r\n  }\r\n  text = grafsOut.join('\\n\\n');\r\n  // Strip leading and trailing lines:\r\n  text = text.replace(/^\\n+/g, '');\r\n  text = text.replace(/\\n+$/g, '');\r\n  return globals.converter._dispatch('paragraphs.after', text, options, globals);\r\n});\r\n\r\n/**\r\n * Run extension\r\n */\r\nshowdown.subParser('runExtension', function (ext, text, options, globals) {\r\n  'use strict';\r\n\r\n  if (ext.filter) {\r\n    text = ext.filter(text, globals.converter, options);\r\n\r\n  } else if (ext.regex) {\r\n    // TODO remove this when old extension loading mechanism is deprecated\r\n    var re = ext.regex;\r\n    if (!re instanceof RegExp) {\r\n      re = new RegExp(re, 'g');\r\n    }\r\n    text = text.replace(re, ext.replace);\r\n  }\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * These are all the transformations that occur *within* block-level\r\n * tags like paragraphs, headers, and list items.\r\n */\r\nshowdown.subParser('spanGamut', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('spanGamut.before', text, options, globals);\r\n  text = showdown.subParser('codeSpans')(text, options, globals);\r\n  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);\r\n  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);\r\n\r\n  // Process anchor and image tags. Images must come first,\r\n  // because ![foo][f] looks like an anchor.\r\n  text = showdown.subParser('images')(text, options, globals);\r\n  text = showdown.subParser('anchors')(text, options, globals);\r\n\r\n  // Make links out of things like `<http://example.com/>`\r\n  // Must come after _DoAnchors(), because you can use < and >\r\n  // delimiters in inline links like [this](<url>).\r\n  text = showdown.subParser('autoLinks')(text, options, globals);\r\n  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);\r\n  text = showdown.subParser('italicsAndBold')(text, options, globals);\r\n  text = showdown.subParser('strikethrough')(text, options, globals);\r\n\r\n  // Do hard breaks:\r\n  text = text.replace(/  +\\n/g, ' <br />\\n');\r\n\r\n  text = globals.converter._dispatch('spanGamut.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('strikethrough', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  if (options.strikethrough) {\r\n    text = globals.converter._dispatch('strikethrough.before', text, options, globals);\r\n    text = text.replace(/(?:~T){2}([\\s\\S]+?)(?:~T){2}/g, '<del>$1</del>');\r\n    text = globals.converter._dispatch('strikethrough.after', text, options, globals);\r\n  }\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Strip any lines consisting only of spaces and tabs.\r\n * This makes subsequent regexs easier to write, because we can\r\n * match consecutive blank lines with /\\n+/ instead of something\r\n * contorted like /[ \\t]*\\n+/\r\n */\r\nshowdown.subParser('stripBlankLines', function (text) {\r\n  'use strict';\r\n  return text.replace(/^[ \\t]+$/mg, '');\r\n});\r\n\r\n/**\r\n * Strips link definitions from text, stores the URLs and titles in\r\n * hash references.\r\n * Link defs are in the form: ^[id]: url \"optional title\"\r\n *\r\n * ^[ ]{0,3}\\[(.+)\\]: // id = $1  attacklab: g_tab_width - 1\r\n * [ \\t]*\r\n * \\n?                  // maybe *one* newline\r\n * [ \\t]*\r\n * <?(\\S+?)>?          // url = $2\r\n * [ \\t]*\r\n * \\n?                // maybe one newline\r\n * [ \\t]*\r\n * (?:\r\n * (\\n*)              // any lines skipped = $3 attacklab: lookbehind removed\r\n * [\"(]\r\n * (.+?)              // title = $4\r\n * [\")]\r\n * [ \\t]*\r\n * )?                 // title is optional\r\n * (?:\\n+|$)\r\n * /gm,\r\n * function(){...});\r\n *\r\n */\r\nshowdown.subParser('stripLinkDefinitions', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  var regex = /^ {0,3}\\[(.+)]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n+|(?=~0))/gm;\r\n\r\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\r\n  text += '~0';\r\n\r\n  text = text.replace(regex, function (wholeMatch, linkId, url, width, height, blankLines, title) {\r\n    linkId = linkId.toLowerCase();\r\n    globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url);  // Link IDs are case-insensitive\r\n\r\n    if (blankLines) {\r\n      // Oops, found blank lines, so it's not a title.\r\n      // Put back the parenthetical statement we stole.\r\n      return blankLines + title;\r\n\r\n    } else {\r\n      if (title) {\r\n        globals.gTitles[linkId] = title.replace(/\"|'/g, '&quot;');\r\n      }\r\n      if (options.parseImgDimensions && width && height) {\r\n        globals.gDimensions[linkId] = {\r\n          width:  width,\r\n          height: height\r\n        };\r\n      }\r\n    }\r\n    // Completely remove the definition from the text\r\n    return '';\r\n  });\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('tables', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  if (!options.tables) {\r\n    return text;\r\n  }\r\n\r\n  var tableRgx = /^[ \\t]{0,3}\\|?.+\\|.+\\n[ \\t]{0,3}\\|?[ \\t]*:?[ \\t]*(?:-|=){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*:?[ \\t]*(?:-|=){2,}[\\s\\S]+?(?:\\n\\n|~0)/gm;\r\n\r\n  function parseStyles(sLine) {\r\n    if (/^:[ \\t]*--*$/.test(sLine)) {\r\n      return ' style=\"text-align:left;\"';\r\n    } else if (/^--*[ \\t]*:[ \\t]*$/.test(sLine)) {\r\n      return ' style=\"text-align:right;\"';\r\n    } else if (/^:[ \\t]*--*[ \\t]*:$/.test(sLine)) {\r\n      return ' style=\"text-align:center;\"';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  function parseHeaders(header, style) {\r\n    var id = '';\r\n    header = header.trim();\r\n    if (options.tableHeaderId) {\r\n      id = ' id=\"' + header.replace(/ /g, '_').toLowerCase() + '\"';\r\n    }\r\n    header = showdown.subParser('spanGamut')(header, options, globals);\r\n\r\n    return '<th' + id + style + '>' + header + '</th>\\n';\r\n  }\r\n\r\n  function parseCells(cell, style) {\r\n    var subText = showdown.subParser('spanGamut')(cell, options, globals);\r\n    return '<td' + style + '>' + subText + '</td>\\n';\r\n  }\r\n\r\n  function buildTable(headers, cells) {\r\n    var tb = '<table>\\n<thead>\\n<tr>\\n',\r\n        tblLgn = headers.length;\r\n\r\n    for (var i = 0; i < tblLgn; ++i) {\r\n      tb += headers[i];\r\n    }\r\n    tb += '</tr>\\n</thead>\\n<tbody>\\n';\r\n\r\n    for (i = 0; i < cells.length; ++i) {\r\n      tb += '<tr>\\n';\r\n      for (var ii = 0; ii < tblLgn; ++ii) {\r\n        tb += cells[i][ii];\r\n      }\r\n      tb += '</tr>\\n';\r\n    }\r\n    tb += '</tbody>\\n</table>\\n';\r\n    return tb;\r\n  }\r\n\r\n  text = globals.converter._dispatch('tables.before', text, options, globals);\r\n\r\n  text = text.replace(tableRgx, function (rawTable) {\r\n\r\n    var i, tableLines = rawTable.split('\\n');\r\n\r\n    // strip wrong first and last column if wrapped tables are used\r\n    for (i = 0; i < tableLines.length; ++i) {\r\n      if (/^[ \\t]{0,3}\\|/.test(tableLines[i])) {\r\n        tableLines[i] = tableLines[i].replace(/^[ \\t]{0,3}\\|/, '');\r\n      }\r\n      if (/\\|[ \\t]*$/.test(tableLines[i])) {\r\n        tableLines[i] = tableLines[i].replace(/\\|[ \\t]*$/, '');\r\n      }\r\n    }\r\n\r\n    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),\r\n        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),\r\n        rawCells = [],\r\n        headers = [],\r\n        styles = [],\r\n        cells = [];\r\n\r\n    tableLines.shift();\r\n    tableLines.shift();\r\n\r\n    for (i = 0; i < tableLines.length; ++i) {\r\n      if (tableLines[i].trim() === '') {\r\n        continue;\r\n      }\r\n      rawCells.push(\r\n        tableLines[i]\r\n          .split('|')\r\n          .map(function (s) {\r\n            return s.trim();\r\n          })\r\n      );\r\n    }\r\n\r\n    if (rawHeaders.length < rawStyles.length) {\r\n      return rawTable;\r\n    }\r\n\r\n    for (i = 0; i < rawStyles.length; ++i) {\r\n      styles.push(parseStyles(rawStyles[i]));\r\n    }\r\n\r\n    for (i = 0; i < rawHeaders.length; ++i) {\r\n      if (showdown.helper.isUndefined(styles[i])) {\r\n        styles[i] = '';\r\n      }\r\n      headers.push(parseHeaders(rawHeaders[i], styles[i]));\r\n    }\r\n\r\n    for (i = 0; i < rawCells.length; ++i) {\r\n      var row = [];\r\n      for (var ii = 0; ii < headers.length; ++ii) {\r\n        if (showdown.helper.isUndefined(rawCells[i][ii])) {\r\n\r\n        }\r\n        row.push(parseCells(rawCells[i][ii], styles[ii]));\r\n      }\r\n      cells.push(row);\r\n    }\r\n\r\n    return buildTable(headers, cells);\r\n  });\r\n\r\n  text = globals.converter._dispatch('tables.after', text, options, globals);\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Swap back in all the special characters we've hidden.\r\n */\r\nshowdown.subParser('unescapeSpecialChars', function (text) {\r\n  'use strict';\r\n\r\n  text = text.replace(/~E(\\d+)E/g, function (wholeMatch, m1) {\r\n    var charCodeToReplace = parseInt(m1);\r\n    return String.fromCharCode(charCodeToReplace);\r\n  });\r\n  return text;\r\n});\r\nmodule.exports = showdown;\r\n","// HTML 支持的数学符号\r\nfunction strNumDiscode(str){\r\n    str = str.replace(/&forall;/g, '∀');\r\n    str = str.replace(/&part;/g, '∂');\r\n    str = str.replace(/&exists;/g, '∃');\r\n    str = str.replace(/&empty;/g, '∅');\r\n    str = str.replace(/&nabla;/g, '∇');\r\n    str = str.replace(/&isin;/g, '∈');\r\n    str = str.replace(/&notin;/g, '∉');\r\n    str = str.replace(/&ni;/g, '∋');\r\n    str = str.replace(/&prod;/g, '∏');\r\n    str = str.replace(/&sum;/g, '∑');\r\n    str = str.replace(/&minus;/g, '−');\r\n    str = str.replace(/&lowast;/g, '∗');\r\n    str = str.replace(/&radic;/g, '√');\r\n    str = str.replace(/&prop;/g, '∝');\r\n    str = str.replace(/&infin;/g, '∞');\r\n    str = str.replace(/&ang;/g, '∠');\r\n    str = str.replace(/&and;/g, '∧');\r\n    str = str.replace(/&or;/g, '∨');\r\n    str = str.replace(/&cap;/g, '∩');\r\n    str = str.replace(/&cap;/g, '∪');\r\n    str = str.replace(/&int;/g, '∫');\r\n    str = str.replace(/&there4;/g, '∴');\r\n    str = str.replace(/&sim;/g, '∼');\r\n    str = str.replace(/&cong;/g, '≅');\r\n    str = str.replace(/&asymp;/g, '≈');\r\n    str = str.replace(/&ne;/g, '≠');\r\n    str = str.replace(/&le;/g, '≤');\r\n    str = str.replace(/&ge;/g, '≥');\r\n    str = str.replace(/&sub;/g, '⊂');\r\n    str = str.replace(/&sup;/g, '⊃');\r\n    str = str.replace(/&nsub;/g, '⊄');\r\n    str = str.replace(/&sube;/g, '⊆');\r\n    str = str.replace(/&supe;/g, '⊇');\r\n    str = str.replace(/&oplus;/g, '⊕');\r\n    str = str.replace(/&otimes;/g, '⊗');\r\n    str = str.replace(/&perp;/g, '⊥');\r\n    str = str.replace(/&sdot;/g, '⋅');\r\n    return str;\r\n}\r\n\r\n//HTML 支持的希腊字母\r\nfunction strGreeceDiscode(str){\r\n    str = str.replace(/&Alpha;/g, 'Α');\r\n    str = str.replace(/&Beta;/g, 'Β');\r\n    str = str.replace(/&Gamma;/g, 'Γ');\r\n    str = str.replace(/&Delta;/g, 'Δ');\r\n    str = str.replace(/&Epsilon;/g, 'Ε');\r\n    str = str.replace(/&Zeta;/g, 'Ζ');\r\n    str = str.replace(/&Eta;/g, 'Η');\r\n    str = str.replace(/&Theta;/g, 'Θ');\r\n    str = str.replace(/&Iota;/g, 'Ι');\r\n    str = str.replace(/&Kappa;/g, 'Κ');\r\n    str = str.replace(/&Lambda;/g, 'Λ');\r\n    str = str.replace(/&Mu;/g, 'Μ');\r\n    str = str.replace(/&Nu;/g, 'Ν');\r\n    str = str.replace(/&Xi;/g, 'Ν');\r\n    str = str.replace(/&Omicron;/g, 'Ο');\r\n    str = str.replace(/&Pi;/g, 'Π');\r\n    str = str.replace(/&Rho;/g, 'Ρ');\r\n    str = str.replace(/&Sigma;/g, 'Σ');\r\n    str = str.replace(/&Tau;/g, 'Τ');\r\n    str = str.replace(/&Upsilon;/g, 'Υ');\r\n    str = str.replace(/&Phi;/g, 'Φ');\r\n    str = str.replace(/&Chi;/g, 'Χ');\r\n    str = str.replace(/&Psi;/g, 'Ψ');\r\n    str = str.replace(/&Omega;/g, 'Ω');\r\n\r\n    str = str.replace(/&alpha;/g, 'α');\r\n    str = str.replace(/&beta;/g, 'β');\r\n    str = str.replace(/&gamma;/g, 'γ');\r\n    str = str.replace(/&delta;/g, 'δ');\r\n    str = str.replace(/&epsilon;/g, 'ε');\r\n    str = str.replace(/&zeta;/g, 'ζ');\r\n    str = str.replace(/&eta;/g, 'η');\r\n    str = str.replace(/&theta;/g, 'θ');\r\n    str = str.replace(/&iota;/g, 'ι');\r\n    str = str.replace(/&kappa;/g, 'κ');\r\n    str = str.replace(/&lambda;/g, 'λ');\r\n    str = str.replace(/&mu;/g, 'μ');\r\n    str = str.replace(/&nu;/g, 'ν');\r\n    str = str.replace(/&xi;/g, 'ξ');\r\n    str = str.replace(/&omicron;/g, 'ο');\r\n    str = str.replace(/&pi;/g, 'π');\r\n    str = str.replace(/&rho;/g, 'ρ');\r\n    str = str.replace(/&sigmaf;/g, 'ς');\r\n    str = str.replace(/&sigma;/g, 'σ');\r\n    str = str.replace(/&tau;/g, 'τ');\r\n    str = str.replace(/&upsilon;/g, 'υ');\r\n    str = str.replace(/&phi;/g, 'φ');\r\n    str = str.replace(/&chi;/g, 'χ');\r\n    str = str.replace(/&psi;/g, 'ψ');\r\n    str = str.replace(/&omega;/g, 'ω');\r\n    str = str.replace(/&thetasym;/g, 'ϑ');\r\n    str = str.replace(/&upsih;/g, 'ϒ');\r\n    str = str.replace(/&piv;/g, 'ϖ');\r\n    str = str.replace(/&middot;/g, '·');\r\n    return str;\r\n}\r\n\r\n// \r\n\r\nfunction strcharacterDiscode(str){\r\n    // 加入常用解析\r\n    str = str.replace(/&nbsp;/g, ' ');\r\n    str = str.replace(/&quot;/g, \"'\");\r\n    str = str.replace(/&amp;/g, '&');\r\n    // str = str.replace(/&lt;/g, '‹');\r\n    // str = str.replace(/&gt;/g, '›');\r\n\r\n    str = str.replace(/&lt;/g, '<');\r\n    str = str.replace(/&gt;/g, '>');\r\n    str = str.replace(/&#8226;/g, '•');\r\n\r\n    return str;\r\n}\r\n\r\n// HTML 支持的其他实体\r\nfunction strOtherDiscode(str){\r\n    str = str.replace(/&OElig;/g, 'Œ');\r\n    str = str.replace(/&oelig;/g, 'œ');\r\n    str = str.replace(/&Scaron;/g, 'Š');\r\n    str = str.replace(/&scaron;/g, 'š');\r\n    str = str.replace(/&Yuml;/g, 'Ÿ');\r\n    str = str.replace(/&fnof;/g, 'ƒ');\r\n    str = str.replace(/&circ;/g, 'ˆ');\r\n    str = str.replace(/&tilde;/g, '˜');\r\n    str = str.replace(/&ensp;/g, '');\r\n    str = str.replace(/&emsp;/g, '');\r\n    str = str.replace(/&thinsp;/g, '');\r\n    str = str.replace(/&zwnj;/g, '');\r\n    str = str.replace(/&zwj;/g, '');\r\n    str = str.replace(/&lrm;/g, '');\r\n    str = str.replace(/&rlm;/g, '');\r\n    str = str.replace(/&ndash;/g, '–');\r\n    str = str.replace(/&mdash;/g, '—');\r\n    str = str.replace(/&lsquo;/g, '‘');\r\n    str = str.replace(/&rsquo;/g, '’');\r\n    str = str.replace(/&sbquo;/g, '‚');\r\n    str = str.replace(/&ldquo;/g, '“');\r\n    str = str.replace(/&rdquo;/g, '”');\r\n    str = str.replace(/&bdquo;/g, '„');\r\n    str = str.replace(/&dagger;/g, '†');\r\n    str = str.replace(/&Dagger;/g, '‡');\r\n    str = str.replace(/&bull;/g, '•');\r\n    str = str.replace(/&hellip;/g, '…');\r\n    str = str.replace(/&permil;/g, '‰');\r\n    str = str.replace(/&prime;/g, '′');\r\n    str = str.replace(/&Prime;/g, '″');\r\n    str = str.replace(/&lsaquo;/g, '‹');\r\n    str = str.replace(/&rsaquo;/g, '›');\r\n    str = str.replace(/&oline;/g, '‾');\r\n    str = str.replace(/&euro;/g, '€');\r\n    str = str.replace(/&trade;/g, '™');\r\n\r\n    str = str.replace(/&larr;/g, '←');\r\n    str = str.replace(/&uarr;/g, '↑');\r\n    str = str.replace(/&rarr;/g, '→');\r\n    str = str.replace(/&darr;/g, '↓');\r\n    str = str.replace(/&harr;/g, '↔');\r\n    str = str.replace(/&crarr;/g, '↵');\r\n    str = str.replace(/&lceil;/g, '⌈');\r\n    str = str.replace(/&rceil;/g, '⌉');\r\n\r\n    str = str.replace(/&lfloor;/g, '⌊');\r\n    str = str.replace(/&rfloor;/g, '⌋');\r\n    str = str.replace(/&loz;/g, '◊');\r\n    str = str.replace(/&spades;/g, '♠');\r\n    str = str.replace(/&clubs;/g, '♣');\r\n    str = str.replace(/&hearts;/g, '♥');\r\n\r\n    str = str.replace(/&diams;/g, '♦');\r\n    str = str.replace(/&#39;/g, '\\'');\r\n    return str;\r\n}\r\n\r\nfunction strMoreDiscode(str){\r\n    str = str.replace(/\\r\\n/g,\"\");  \r\n    str = str.replace(/\\n/g,\"\");\r\n   //2018-07-12 4146微信图片在小程序前台详情页面不展示会把url里面a=wxcode给替换成a=wxxxcode-style导致的所以先把下面的这样代码注释掉\r\n    // str = str.replace(/code/g,\"wxxxcode-style\");\r\n    return str;\r\n}\r\n\r\nfunction strDiscode(str){\r\n    str = strNumDiscode(str);\r\n    str = strGreeceDiscode(str);\r\n    str = strcharacterDiscode(str);\r\n    str = strOtherDiscode(str);\r\n    str = strMoreDiscode(str);\r\n    return str;\r\n}\r\nfunction urlToHttpUrl(url,rep){\r\n    \r\n    var patt1 = new RegExp(\"^//\");\r\n    var result = patt1.test(url);\r\n    if(result){\r\n        url = rep+\":\"+url;\r\n    }\r\n    return  url;\r\n}\r\n\r\nmodule.exports = {\r\n    strDiscode:strDiscode,\r\n    urlToHttpUrl:urlToHttpUrl\r\n}","/**\r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n * \r\n * github地址: https://github.com/icindy/wxParse\r\n * \r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\n/**\r\n * utils函数引入\r\n **/\r\nimport showdown from './showdown.js';\r\nimport HtmlToJson from './html2json.js';\r\n/**\r\n * 配置及公有属性\r\n **/\r\nvar realWindowWidth = 0;\r\nvar realWindowHeight = 0;\r\nwx.getSystemInfo({\r\n  success: function (res) {\r\n    realWindowWidth = res.windowWidth\r\n    realWindowHeight = res.windowHeight\r\n  }\r\n})\r\n/**\r\n * 主函数入口区\r\n **/\r\nfunction wxParse(bindName = 'wxParseData', type = 'html', data = '<div class=\"color:red;\">数据不能为空</div>', target, imagePadding) {\r\n  if (!data || data == '') {\r\n    return;\r\n  }\r\n  var that = target;\r\n  var transData = {};//存放转化后的数据\r\n  if (type == 'html') {\r\n    transData = HtmlToJson.html2json(data, bindName);\r\n   \r\n  } else if (type == 'md' || type == 'markdown') {\r\n    var converter = new showdown.Converter();\r\n    var html = converter.makeHtml(data);\r\n    transData = HtmlToJson.html2json(html, bindName);\r\n   \r\n  }\r\n  transData.view = {};\r\n  transData.view.imagePadding = 0;\r\n  if (typeof (imagePadding) != 'undefined') {\r\n    transData.view.imagePadding = imagePadding\r\n  }\r\n  var bindData = {};\r\n  bindData[bindName] = transData;\r\n  that.setData(bindData)\r\n  that.wxParseImgLoad = wxParseImgLoad;\r\n  that.wxParseImgTap = wxParseImgTap;\r\n}\r\n// 图片点击事件\r\nfunction wxParseImgTap(e) {\r\n  var that = this;\r\n  var nowImgUrl = e.target.dataset.src;\r\n  var tagFrom = e.target.dataset.from;\r\n  if (typeof (tagFrom) != 'undefined' && tagFrom.length > 0) {\r\n    wx.previewImage({\r\n      current: nowImgUrl, // 当前显示图片的http链接\r\n      urls: that.data[tagFrom].imageUrls // 需要预览的图片http链接列表\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 图片视觉宽高计算函数区 \r\n **/\r\nfunction wxParseImgLoad(e) {\r\n  var that = this;\r\n  var tagFrom = e.target.dataset.from;\r\n  var idx = e.target.dataset.idx;\r\n  if (typeof (tagFrom) != 'undefined' && tagFrom.length > 0) {\r\n    calMoreImageInfo(e, idx, that, tagFrom)\r\n  }\r\n}\r\n// 假循环获取计算图片视觉最佳宽高\r\nfunction calMoreImageInfo(e, idx, that, bindName) {\r\n  var temData = that.data[bindName];\r\n  if (!temData || temData.images.length == 0) {\r\n    return;\r\n  }\r\n  var temImages = temData.images;\r\n  //因为无法获取view宽度 需要自定义padding进行计算，稍后处理\r\n  var recal = wxAutoImageCal(e.detail.width, e.detail.height,that,bindName); \r\n  // temImages[idx].width = recal.imageWidth;\r\n  // temImages[idx].height = recal.imageheight; \r\n  // temData.images = temImages;\r\n  // var bindData = {};\r\n  // bindData[bindName] = temData;\r\n  // that.setData(bindData);\r\n  var index = temImages[idx].index\r\n  var key = `${bindName}`\r\n  for (var i of index.split('.')) key += `.nodes[${i}]`\r\n  var keyW = key + '.width'\r\n  var keyH = key + '.height'\r\n  that.setData({\r\n    [keyW]: recal.imageWidth,\r\n    [keyH]: recal.imageheight,\r\n  })\r\n\r\n\r\n\r\n}\r\n\r\n// 计算视觉优先的图片宽高\r\nfunction wxAutoImageCal(originalWidth, originalHeight,that,bindName) {\r\n  //获取图片的原始长宽\r\n  var windowWidth = 0, windowHeight = 0;\r\n  var autoWidth = 0, autoHeight = 0;\r\n  var results = {};\r\n  var padding = that.data[bindName].view.imagePadding;\r\n  windowWidth = realWindowWidth - 2 * padding;\r\n  windowHeight = realWindowHeight;\r\n  //判断按照那种方式进行缩放\r\n\r\n  if (originalWidth > windowWidth) {//在图片width大于手机屏幕width时候\r\n    autoWidth = windowWidth;\r\n   \r\n    autoHeight = (autoWidth * originalHeight) / originalWidth;\r\n    \r\n    results.imageWidth = autoWidth;\r\n    results.imageheight = autoHeight;\r\n  } else {//否则展示原来的数据\r\n    results.imageWidth = originalWidth;\r\n    results.imageheight = originalHeight;\r\n  }\r\n\r\n \r\n\r\n  if (realWindowWidth <= 0 || realWindowHeight <= 0) {\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        realWindowWidth = res.windowWidth;\r\n        realWindowHeight = res.windowHeight;\r\n        if (originalWidth > realWindowWidth) {\r\n          results.imageWidth = realWindowWidth - 2 * padding;\r\n        } else {\r\n          results.imageWidth = originalWidth;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  return results;\r\n}\r\n\r\nfunction wxParseTemArray(temArrayName, bindNameReg, total, that) {\r\n  var array = [];\r\n  var temData = that.data;\r\n  var obj = null;\r\n  for (var i = 0; i < total; i++) {\r\n    var simArr = temData[bindNameReg + i].nodes;\r\n    array.push(simArr);\r\n  }\r\n\r\n  temArrayName = temArrayName || 'wxParseTemArray';\r\n  obj = JSON.parse('{\"' + temArrayName + '\":\"\"}');\r\n  obj[temArrayName] = array;\r\n  that.setData(obj);\r\n}\r\n\r\n/**\r\n * 配置emojis\r\n * \r\n */\r\n\r\nfunction emojisInit(reg = '', baseSrc = \"/wxParse/emojis/\", emojis) {\r\n  HtmlToJson.emojisInit(reg, baseSrc, emojis);\r\n}\r\n\r\nmodule.exports = {\r\n  wxParse: wxParse,\r\n  wxParseTemArray: wxParseTemArray,\r\n  emojisInit: emojisInit\r\n}","/**\r\n *\r\n * app.js\r\n *\r\n * @create 2017-1-1\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-05\r\n *\r\n */\r\nvar core = require('utils/core.js');\r\n\r\nApp({\r\n    onShow: function () {\r\n      this.onLaunch();\r\n\r\n    },\r\n    onLaunch: function () {\r\n      var $this = this; \r\n      wx.getSystemInfo({\r\n        success: function (res) {\r\n          var model = res.model;\r\n          var iponeX = model.indexOf(\"iPhone X\");\r\n          if (iponeX == '0'){\r\n            $this.setCache(\"isIpx\", res.model);\r\n          }else{\r\n            $this.setCache(\"isIpx\", '');\r\n          }\r\n        }\r\n      }) \r\n      let that = this;\r\n      wx.getSystemInfo({//  获取页面的有关信息\r\n        success: function (res) {\r\n          wx.setStorageSync('systemInfo', res)\r\n          var ww = res.windowWidth;\r\n          var hh = res.windowHeight;\r\n          that.globalData.ww = ww;\r\n          that.globalData.hh = hh;\r\n        }\r\n      }); \r\n    },\r\n    /**\r\n     * 小程序检查是否授权方法，写入当前页面路径和参数缓存\r\n     * @date 2018-10-22\r\n     * @author Vencenty\r\n     */\r\n    checkAuth: function () {\r\n    \r\n      const url = '/pages/message/auth/index'\r\n      const currentPages = getCurrentPages()\r\n      const currentPage = currentPages[currentPages.length - 1]\r\n      const routeData = {\r\n        'params': currentPage.options || null,\r\n        'url': currentPage.route\r\n      }\r\n\r\n      // 处理扫码进来的商品信息\r\n      if(routeData.params.hasOwnProperty('scene')) {\r\n        const params = {}\r\n        const scene = decodeURIComponent(routeData.params.scene)\r\n        const paramsArr = scene.split('&').shift().split('=')\r\n        params.id = paramsArr[1]\r\n        routeData.params = params\r\n      }\r\n      \r\n      this.setCache('routeData', routeData)\r\n\r\n\r\n      const userinfo = this.getCache('userinfo')\r\n      wx.getSetting({\r\n        success: function (settings) {\r\n          if (!settings.authSetting['scope.userInfo']) {\r\n            wx.redirectTo({url: url})\r\n          } else {\r\n            if (!userinfo) {\r\n              wx.redirectTo({ url: url })\r\n            } else {\r\n              core.get('member', {}, function (ret) {\r\n                if (ret.error) {\r\n                  wx.redirectTo({ url: url })\r\n                }\r\n              })\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    requirejs: function (jsname) {\r\n        return require('utils/' + jsname + '.js');\r\n    },\r\n    getConfig: function () {\r\n        if (this.globalData.api !== null) {\r\n            return {\r\n                api: this.globalData.api,\r\n                approot: this.globalData.approot,\r\n                appid: this.globalData.appid\r\n            };\r\n        }\r\n        var ext = wx.getExtConfigSync();\r\n        \r\n        this.globalData.api = ext.config.api;\r\n        this.globalData.approot = ext.config.approot;\r\n        this.globalData.appid = ext.config.appid;\r\n        return ext.config;\r\n    },\r\n \r\n    getCache: function (key, defaultValue) {\r\n        var time = (+new Date()) / 1000, data = '';\r\n        time = parseInt(time);\r\n        try {\r\n            data = wx.getStorageSync(key + this.globalData.appid);\r\n            if (data.expire > time || data.expire == 0) {\r\n                data = data.value; \r\n            } else {\r\n                data = '';\r\n                this.removeCache(key);\r\n            }\r\n        } catch (e) {\r\n            data = typeof (defaultValue) === 'undefined' ? '' : defaultValue;\r\n        }\r\n        data = data || '';\r\n        return data;\r\n    },\r\n\r\n    setCache: function (key, value, expire) {\r\n        var time = (+new Date()) / 1000, rt = true;\r\n        var data = {\r\n            expire: expire ? time + parseInt(expire) : 0,\r\n            value: value\r\n        };\r\n        try {\r\n            wx.setStorageSync(key + this.globalData.appid, data);\r\n        } catch (e) {\r\n            rt = false;\r\n        }\r\n        return rt;\r\n    },\r\n    \r\n    removeCache: function (key) {\r\n        var rt = true;\r\n        try {\r\n            wx.removeStorageSync(key + this.globalData.appid);\r\n        } catch (e) {\r\n            rt = false;\r\n        }  \r\n        return rt; \r\n    },\r\n    close: function () {\r\n      this.globalDataClose.flag = true;\r\n      wx.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n    getSet: function () {\r\n      var $this = this;\r\n      var cacheset = $this.getCache(\"cacheset\");\r\n      if (cacheset == '') {\r\n        // var sysset = $this.getCache(\"sysset\");\r\n        // if (sysset == '') {\r\n        setTimeout(function () {\r\n          var cacheset = $this.getCache(\"cacheset\"); \r\n          core.get('cacheset', { version: cacheset.version }, function (result) {  \r\n            if (result.update) {\r\n              $this.setCache(\"cacheset\", result.data);\r\n            } \r\n            // $this.setCache(\"sysset\", result.sysset, 7200);\r\n          });\r\n        }, 10);\r\n      }\r\n    },\r\n    url: function (options) {\r\n        options = options || {};\r\n        var arg = {}, mid = '', merchid = '', user = this.getCache('usermid');\r\n        mid = options.mid || '';\r\n        merchid = options.merchid || '';\r\n\r\n        for (let i in user) {\r\n          if (typeof user[i] != 'undefined') {\r\n            arg[i] = user[i]\r\n          }\r\n        }\r\n\r\n        if (user != '') {\r\n           \r\n            if (user.mid == '' || typeof user.mid == 'undefined') {\r\n                arg.mid = mid;\r\n            }\r\n            if (user.merchid == '' || typeof user.merchid == 'undefined') {\r\n                arg.merchid = merchid;\r\n            }\r\n        } else {\r\n            arg.mid = mid;\r\n            arg.merchid = merchid;\r\n        }\r\n        this.setCache('usermid', arg);\r\n    },\r\n\t/*再次发起授权*/\r\n    impower: function(limit, msg, route) {\r\n    \twx.getSetting({\r\n    \t\tsuccess: function(res) {\r\n    \t\t\tvar limits = res.authSetting['scope.' + limit];\r\n    \t\t\tif(!limits) {\r\n    \t\t\t\twx.showModal({\r\n    \t\t\t\t\ttitle: '用户未授权',\r\n    \t\t\t\t\tcontent: '您点击了拒绝授权，暂时无法' + msg + '，点击去设置可重新获取授权喔~',\r\n    \t\t\t\t\tconfirmText: '去设置',\r\n    \t\t\t\t\tsuccess: function(res) {\r\n    \t\t\t\t\t\tif(res.confirm) {\r\n    \t\t\t\t\t\t\twx.openSetting({\r\n    \t\t\t\t\t\t\t\tsuccess: function(res) {}\r\n    \t\t\t\t\t\t\t})\r\n    \t\t\t\t\t\t}else{\r\n    \t\t\t\t\t\t\tif(route == 'route'){\r\n    \t\t\t\t\t\t\t\twx.switchTab({\r\n\t\t\t\t\t\t\t\t\t    url: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t\t})\r\n    \t\t\t\t\t\t\t}else if(route == 'details'){\r\n    \t\t\t\t\t\t\t\t//停留在当前页面\r\n    \t\t\t\t\t\t\t}else{\r\n    \t\t\t\t\t\t\t\twx.navigateTo({\r\n\t\t\t\t\t\t\t\t\t    url: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t\t})\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t})\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})\r\n    },\r\n    globalDataClose: {\r\n      flag: false,\r\n    },\r\n    //晚秋\r\n    // globalData: {\r\n    //   appid:'wx3d3b2fd41970f6db',\r\n    //   api: \"https://api.clubmall.cn/app/ewei_shopv2_api.php?i=16\",\r\n    //   approot: \"https://api.clubmall.cn/addons/ewei_shopv2/\",\r\n    //   userInfo: null\r\n    // }\r\n\r\n    //姜倩\r\n    // globalData: {\r\n    //   appid: 'wx5f691ef96a19887c',\r\n    //   api: \"https://jqnyrv.ifkvip.com/app/ewei_shopv2_api.php?i=4\",\r\n    //   approot: \"https://jqnyrv.ifkvip.com/addons/ewei_shopv2/\",\r\n    //   userInfo: null\r\n    // }\r\n\r\n    // demo站点\r\n    // globalData: {\r\n    //     appid: 'wx5d7c9a63ffdf10f8',\r\n    //     api: \"https://demo.foxteam.cc/app/ewei_shopv2_api.php?i=11\",\r\n    //     approot: \"https://demo.foxteam.cc/addons/ewei_shopv2/\",\r\n    //     userInfo: null\r\n    // }\r\n\r\n    // elinkkc\r\n    // globalData: {\r\n    //   appid:'wx3d3b2fd41970f6db',\r\n    //   api: \"https://yctcs.100cms.com/app/ewei_shopv2_api.php?i=2\",\r\n    //   approot: \"https://yctcs.100cms.com/addons/ewei_shopv2/\",\r\n    //     userInfo: null\r\n    // }\r\n\r\n    // 售后\r\n    //  globalData: {\r\n    //   appid: \"wx3502a0f358ee367f\",\r\n    //   api: \"https://shn2mgo.ifkvip.com/app/ewei_shopv2_api.php?i=2\",\r\n    //   approot: \"https://shn2mgo.ifkvip.com/addons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n\r\n\r\n    // 测试站\r\n    //  globalData: {\r\n    //    appid: \"wx3d3b2fd41970f6db\",\r\n    //    api: \"https://yctcs.100cms.com/app/ewei_shopv2_api.php?i=2\",\r\n    //    approot: \"https://yctcs.100cms.com/addons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n    \r\n    // 姜倩\r\n    //  globalData: {\r\n    //    appid: \"wx21e66d345b76074d\",\r\n    //    api: \"https://azrrsc.100cms.com/app/ewei_shopv2_api.php?i=51\",\r\n    //    approot: \"https://azrrsc.100cms.comaddons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n\r\n    //api\r\n    //  globalData: {\r\n    //    appid: \"wx3d3b2fd41970f6db\",\r\n    //    api: \"https://api.clubmall.cn/app/ewei_shopv2_api.php?i=16\",\r\n    //    approot: \"https://api.clubmall.cn/addons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n\r\n     globalData: {\r\n       appid: null,\r\n       api: null,\r\n       approot: null,\r\n       userInfo: null\r\n     }\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-03\r\n * @author 咖啡\r\n *\r\n * \r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n    onPullDownRefresh: function (){\r\n     \r\n      var $this = this\r\n      diypage.get(this, 'home', function (res) {\r\n        $this.getDiypage(res)\r\n        if(res.error==0){\r\n          wx.stopPullDownRefresh()\r\n        } \r\n      })\r\n\r\n    },\r\n    data: {\r\n    \timgUrls: [\r\n\t      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963648306&di=1194f5980cccf9e5ad558dfb18e895ab&imgtype=0&src=http%3A%2F%2Fd.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F9c16fdfaaf51f3de87bbdad39ceef01f3a29797f.jpg',\r\n\t      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963737453&di=b1472a710a2c9ba30808fd6823b16feb&imgtype=0&src=http%3A%2F%2Fwww.qqzhi.com%2Fwenwen%2Fuploads%2Fpic.wenwen.soso.com%2Fp%2F20160830%2F20160830220016-586751007.jpg',\r\n\t      'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3004162400,3684436606&fm=11&gp=0.jpg'\r\n\t    ],\r\n\t    indicatorDotss: true,\r\n\t    autoplays: true,\r\n\t    intervals: 2000,\r\n\t    durations: 500,\r\n\t    circulars: true,\r\n\t    adveradmin: true,\r\n      current: 0, //商品组翻页 \r\n\t    clock: '',\r\n\t    /*广告结束*/\r\n        diypage:'true',\r\n        route: 'home',\r\n        icons: app.requirejs('icons'),\r\n        shop: {},\r\n        indicatorDots: true,\r\n        autoplay: true,\r\n        interval: 5000,\r\n        duration: 500,\r\n        circular: true,\r\n        /* 店铺推荐列表 */\r\n        storeRecommand: [],\r\n        total: 1,\r\n        page: 1,\r\n        loaded:false,\r\n        loading:true,\r\n        /*滚动*/\r\n        indicatorDotsHot: false,\r\n        autoplayHot: true,\r\n        intervalHot: 5000,\r\n        durationHOt: 1000,\r\n        circularHot: true,\r\n        hotimg: \"/static/images/hotdot.jpg\",\r\n        notification: \"/static/images/notification.png\",\r\n        saleout1: \"/static/images/saleout-1.png\",\r\n        saleout2: \"/static/images/saleout-2.png\",\r\n        saleout3: \"/static/images/saleout-3.png\",\r\n        play: \"/static/images/video_play.png\",\r\n        mute: \"/static/images/icon/mute.png\",\r\n        voice: \"/static/images/icon/voice.png\",\r\n        // 购物车\r\n        specs: [],\r\n        options: [],\r\n        diyform: {},\r\n        specsTitle: '',\r\n        total: 1,\r\n        active: '',\r\n        slider: '',\r\n        tempname: '',\r\n        buyType: '',\r\n        areas: [],\r\n        closeBtn: false,\r\n        soundpic: false,\r\n        sound:true,\r\n\r\n        modelShow:false,\r\n        limits: true,\r\n        result:{},\r\n        showcoupon: false,\r\n        showcoupontips: false,\r\n        topmenu:{},\r\n        topmenuDataType:'',\r\n        tabbarData:{},\r\n        tabbarDataType:'',\r\n        istopmenu:false,\r\n        //秒杀组\r\n        seckillinfo:{},\r\n        timer:0,\r\n        lasttime: 0,\r\n        hour: '-',\r\n        min: '-',\r\n        sec: '-',\r\n    },\r\n\r\n    /* 获取首页信息 */\r\n    getShop: function () {\r\n        var $this = this;\r\n        core.get('shop/get_shopindex', {}, function (result) {\r\n            parser.wxParse('wxParseData','html', result.copyright,$this,'5');\r\n            $this.setData({shop: result});\r\n        });\r\n    },\r\n    /*加载推荐商品*/\r\n    onReachBottom:function(){\r\n        if(this.data.loaded || this.data.storeRecommand.length==this.data.total){\r\n            return;\r\n        }\r\n        this.getRecommand();\r\n    },\r\n    //店铺推荐\r\n    getRecommand: function (){\r\n        var $this = this;\r\n        if($this.data.diypage=='true'){\r\n          return\r\n        }\r\n        core.get('shop/get_recommand', {page:$this.data.page}, function (result) {\r\n            var data = {loading: false, total: result.total};\r\n            $this.setData({\r\n                loading: false,\r\n                total: result.total,\r\n                show:true\r\n            });\r\n            if(!result.list){\r\n                result.list = [];\r\n            }\r\n            if(result.list.length>0){\r\n                $this.setData({\r\n                    storeRecommand: $this.data.storeRecommand.concat(result.list),\r\n                    page: result.page+1\r\n                });\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n\r\n        });\r\n    },\r\n    onLoad: function (options) {\r\n      wx.hideTabBar({})      \r\n      \r\n      options = options || {};\r\n    \tvar $this = this;\r\n      $this.setData({ imgUrl: app.globalData.approot});\r\n\r\n      core.get('black', {}, function (res) {\r\n        if (res.isblack) {\r\n          wx.showModal({\r\n            title: '无法访问',\r\n            content: '您在商城的黑名单中，无权访问！',\r\n            success: function (res) {\r\n              if (res.confirm) {\r\n                $this.close()\r\n              }\r\n              if (res.cancel) {\r\n                $this.close()\r\n              }\r\n            }\r\n          })\r\n        }\r\n      });\r\n\r\n        // 处理扫码scene\r\n        var scene = decodeURIComponent(options.scene);\r\n        if (!options.id && scene) {\r\n          var sceneObj = core.str2Obj(scene);\r\n          options.id = sceneObj.id;\r\n          if(sceneObj.mid){\r\n            options.mid = sceneObj.mid;\r\n             app.setCache('usermid', sceneObj)\r\n          }\r\n        }\r\n        setTimeout(function () {\r\n          $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n        }, 3000)\r\n        app.url(options);\r\n        \r\n        wx.getSetting({\r\n          success(res) {\r\n            if (!res.authSetting['scope.userInfo']) {\r\n              core.get('wxAppSetting', {}, (response) => {\r\n                console.log(response)\r\n                const sysSet = response.sysset\r\n                if (sysSet.force_auth == 1) {\r\n                  wx.redirectTo({ url: '/pages/auth/index' })\r\n                  return\r\n                }\r\n                $this.diypageGet()\r\n              })\r\n            }else{\r\n              $this.diypageGet()\r\n            }\r\n          },\r\n        })\r\n\r\n       \r\n        $this.setData({\r\n          cover: true,\r\n          showvideo:false\r\n        });\r\n        wx.getSystemInfo({\r\n          success: function (res) {\r\n            var swiperheight = res.windowWidth/ 1.7\r\n            $this.setData({\r\n              swiperheight:swiperheight\r\n            })\r\n          }\r\n        });\r\n        //获取未支付订单信息\r\n        //$this.get_nopayorder();\r\n    },\r\n    diypageGet() {\r\n      var $this = this;\r\n      diypage.get(this, 'home', function (res) {\r\n        wx.showTabBar({})\r\n        $this.getDiypage(res)\r\n        /*启动广告*/\r\n        if ($this.data.startadv == undefined || $this.data.startadv == '') {\r\n          return\r\n        }\r\n        if ($this.data.startadv.status == 0 || $this.data.startadv == '') {\r\n          wx.getSetting({\r\n            success: function (res) {\r\n              var limits = res.authSetting['scope.userInfo'];\r\n              if (limits) {\r\n                $this.get_nopayorder();\r\n                return\r\n              }\r\n            }\r\n          })\r\n        }\r\n\r\n        var params = $this.data.startadv.params;\r\n        if (params.style == 'default') {\r\n          var timer = params.autoclose;\r\n          function count_down(that) {\r\n            $this.setData({ clock: timer });\r\n            if (timer <= 0) {\r\n              $this.setData({ adveradmin: false });\r\n              return;\r\n            }\r\n            setTimeout(function () {\r\n              timer -= 1;\r\n              count_down(that);\r\n            }, 1000)\r\n          }\r\n          count_down($this);\r\n        }\r\n\r\n        if (params.showtype == 1) {\r\n          var showtime = params.showtime;\r\n          var countdown = showtime * 1000 * 60;\r\n          var startadvtime = app.getCache('startadvtime');\r\n          var nowtime = + new Date();\r\n          var adveradmin = true;\r\n          $this.setData({ adveradmin: true })\r\n          if (startadvtime) {\r\n            if ((nowtime - startadvtime) < countdown) {\r\n              adveradmin = false;\r\n            }\r\n          }\r\n          $this.setData({ adveradmin: adveradmin });\r\n          if (adveradmin) {\r\n            app.setCache('startadvtime', nowtime);\r\n          }\r\n        }\r\n        var advstatus = $this.data.startadv.status;\r\n\r\n      });\r\n    },\r\n    onHide: function(){\r\n      this.setData({ adveradmin: false, unpaid: false});\r\n    },\r\n    \r\n    onShow: function () {\r\n    \tvar $this = this;\r\n      \tvar res = wx.getSystemInfoSync()\r\n        var sysset = app.getCache('sysset');\r\n        $this.getShop();\r\n        $this.getRecommand();\r\n        $this.get_hasnewcoupon();\r\n        $this.get_cpinfos();\r\n        wx.getSetting({\r\n            success: function(res) {\r\n              var limits = res.authSetting['scope.userInfo'];\r\n              $this.setData({ limits: limits })\t\r\n            }\r\n          })\r\n\t\t\r\n        var pagetitle = sysset.shopname || '商城首页';\r\n        if ($this.data.pages){\r\n          if($this.data.pages.title!=''){\r\n            pagetitle = $this.data.diytitle;\r\n          }\r\n        }\r\n        wx.setNavigationBarTitle({\r\n          title: pagetitle\r\n        });\r\n        if($this.data.pages){\r\n            wx.setNavigationBarColor({\r\n            frontColor: $this.data.pages.titlebarcolor,\r\n            backgroundColor: $this.data.pages.titlebarbg\r\n          });\r\n        } \r\n        $this.setData({\r\n          screenWidth: res.windowWidth\r\n        });\r\n\r\n    },\r\n    goodsicon:function(e){\r\n      this.setData({\r\n        iconheight:e.detail.height,\r\n        iconwidth: e.detail.width\r\n      })\r\n    },\r\n    getDiypage:function(res){\r\n      var $this = this;\r\n      $.each(res.diypage.items, function (id, item) {\r\n        if (item.id == 'topmenu') {\r\n          $this.setData({ topmenu: item });\r\n          if (item.data[0] == undefined) {\r\n            var linkurl = '';\r\n          } else {\r\n            var linkurl = item.data[0].linkurl;\r\n            core.get('diypage/getInfo', { dataurl: linkurl }, function (ret) {\r\n              item.data[0].data = ret.goods.list;\r\n            });\r\n          }\r\n          \r\n        }\r\n\r\n      if (item.id == 'seckillgroup') {\r\n          var data = {};\r\n          data.status=item.data.status;\r\n          data.endtime=item.data.endtime;\r\n          data.starttime=item.data.starttime;\r\n          $this.initSeckill(data);\r\n      }\r\n      });\r\n    },\r\n    onShareAppMessage: function () {\r\n        var url = null;\r\n        var title = null;\r\n        if (this.data.diytitle) {\r\n          url = '/pages/index/index'\r\n          title = this.data.diytitle\r\n        }\r\n      return core.onShareAppMessage(url, title);\r\n    },\r\n    imagesHeight: function(e){\r\n        var width = e.detail.width,height = e.detail.height,type=e.target.dataset.type,$this=this;\r\n        wx.getSystemInfo({\r\n            success: function(res) {\r\n                $this.data.result[type] = res.windowWidth/width*height;\r\n                if(!$this.data[type] || ($this.data[type] && result[type]<$this.data[type])){\r\n                  $this.setData({result: $this.data.result});\r\n                }\r\n            }\r\n        });\r\n    },\r\n    bindInput: function (e) {\r\n      this.setData({\r\n        inputValue: e.detail.value\r\n      })\r\n    },\r\n    t1: function(e){\r\n      diypage.fixedsearch(this,e);\r\n    },\r\n    startplay: function (e) {\r\n      var cover = e.target.dataset.cover;\r\n      this.setData({\r\n        cover: cover,\r\n        showvideo:true\r\n      });\r\n      this.videoContext = wx.createVideoContext('Video');\r\n      this.videoContext.play()\r\n    }, \r\n    /* 隐藏未付订单 */\r\n    unpaidcolse: function (e) {\r\n      var unpaid = '';\r\n      if (e.target.dataset.type == 'open') {\r\n        unpaid = true\r\n      } else {\r\n        unpaid = false\r\n      }\r\n      this.setData({\r\n        unpaid: unpaid\r\n      })\r\n    },\r\n    /* 关闭未付订单 */\r\n    unpaidcolse2: function (e) {\r\n      this.setData({\r\n        unpaidhide: true\r\n      })\r\n    },\r\n    //\r\n    get_nopayorder: function () {\r\n      var $this = this;\r\n      core.get('shop/get_nopayorder', {}, function (result) {\r\n        if (result.hasinfo ==1)\r\n        {\r\n          $this.setData({\r\n            nopaygoods: result.goods,\r\n            nopaygoodstotal: result.goodstotal,\r\n            nopayorder: result.order,\r\n            unpaid: true\r\n          });\r\n        }        \r\n      });\r\n    },\r\n\r\n    //是否有新的优惠券\r\n    get_hasnewcoupon: function () {\r\n      var $this = this;\r\n      core.get('shop/get_hasnewcoupon', {}, function (result) {\r\n        if (result.hasnewcoupon == 1) {\r\n          $this.setData({ showcoupontips: true });\r\n        }\r\n      });\r\n    },\r\n    //是否有新人优惠券\r\n    get_cpinfos: function () {\r\n        var $this = this;\r\n        core.get('shop/get_cpinfos', {}, function (result) {\r\n            if (result.hascpinfos == 1) {\r\n              $this.setData({ showcoupon: true,cpinfos: result.cpinfos,});\r\n            }\r\n        });\r\n    },\r\n\t/*关闭广告*/\r\n    adverclose: function(){\r\n   \t\tthis.setData({adveradmin: false})\r\n   \t\tthis.get_nopayorder();\r\n    },\r\n    /*广告点击跳转链接*/\r\n    indexChangebtn: function(e){\r\n    \tvar urls = e.currentTarget.dataset.type;\r\n    \twx.navigateTo({\r\n        url: urls,\r\n        fail: function () {\r\n          wx.switchTab({\r\n            url: urls\r\n          })\r\n        }\r\n      })\r\n    }, \r\n    /* 隐藏未付订单 */\r\n    unpaidcolse: function (e) {\r\n      var unpaid = '';\r\n      if (e.target.dataset.type == 'open') {\r\n        unpaid = true\r\n      } else {\r\n        unpaid = false\r\n      }\r\n      this.setData({\r\n        unpaid: unpaid\r\n      })\r\n    },\r\n\r\n    /* 关闭未付订单 */\r\n    unpaidcolse2: function (e) {\r\n      this.setData({\r\n        unpaidhide: true\r\n      })\r\n    },\r\n    // 购买picker\r\n    selectPicker: function (e) {\r\n      app.checkAuth();\r\n      var $this = this;\r\n      wx.getSetting({\r\n    \t\tsuccess: function(res) {\r\n    \t\t\tvar limits = res.authSetting['scope.userInfo'];\r\n    \t\t\tif(limits){\r\n    \t\t\t\tvar goodslist = 'goodslist';\r\n\t\t\t\t      goodspicker.selectpicker(e, $this, goodslist)\r\n\t\t\t\t      $this.setData({\r\n\t\t\t\t        cover: '',\r\n\t\t\t\t        showvideo: false\r\n\t\t\t\t      });\r\n    \t\t\t}else{\t\t\t\r\n\t\t\t\t    // $this.setData({modelShow: true})\r\n\t\t\t\t\treturn\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})  \r\n    },\r\n    // 选赠品\r\n  chooseGift(e) {\r\n    goodspicker.chooseGift(e,this)\r\n  },\r\n    // 选规格\r\n    specsTap: function (event) {\r\n      var $this = this\r\n      goodspicker.specsTap(event, $this)\r\n    },\r\n    //关闭pickerpicker\r\n    emptyActive: function () {\r\n      this.setData({\r\n        active: '', slider: 'out', tempname: '', specsTitle: ''\r\n      });\r\n    },\r\n    // 立即购买\r\n    buyNow: function (event) {\r\n      var $this = this\r\n      goodspicker.buyNow(event, $this)\r\n    },\r\n    //加入购物车\r\n    getCart: function (event) {\r\n      var $this = this\r\n      goodspicker.getCart(event, $this)\r\n    },\r\n    select: function () {\r\n      var $this = this\r\n      goodspicker.select($this)\r\n    },\r\n    //数量输入绑定事件\r\n    inputNumber: function (e) {\r\n      var $this = this\r\n      goodspicker.inputNumber(e, $this)\r\n    },\r\n    number: function (e) {\r\n      var $this = this\r\n      goodspicker.number(e, $this)\r\n    },\r\n    onChange: function (e) {\r\n      return diyform.onChange(this, e)\r\n    },\r\n    DiyFormHandler: function (e) {\r\n      return diyform.DiyFormHandler(this, e)\r\n    },\r\n    selectArea: function (e) {\r\n      return diyform.selectArea(this, e)\r\n    },\r\n    bindChange: function (e) {\r\n      return diyform.bindChange(this, e)\r\n    },\r\n    onCancel: function (e) {\r\n      return diyform.onCancel(this, e)\r\n    },\r\n    onConfirm: function (e) {\r\n      return diyform.onConfirm(this, e)\r\n    },\r\n    getIndex: function (str, areas) {\r\n      return diyform.getIndex(str, areas)\r\n    },\r\n    changevoice: function () {\r\n      if (this.data.sound) {\r\n        this.setData({\r\n          sound: false,\r\n          soundpic: true\r\n        })\r\n      } else{\r\n        this.setData({\r\n          sound: true,\r\n          soundpic: false\r\n        })\r\n      }\r\n    },\r\n    phone:function(){\r\n      var phoneNumber = this.data.phonenumber+''\r\n      wx.makePhoneCall({\r\n        phoneNumber: phoneNumber\r\n      })\r\n    },\r\n    /*用户授权-取消*/                                                                                                                                                                                                                                                                                                                     \r\n    cancelclick:  function(){\r\n   \t  this.setData({modelShow: false})\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      this.setData({modelShow: false})\r\n      wx.openSetting({\r\n    \tsuccess: function(res) {}\r\n      })\r\n    },\r\n    navigate:function(e){\r\n        var url = e.currentTarget.dataset.url\r\n        var phone = e.currentTarget.dataset.phone\r\n        var appid = e.currentTarget.dataset.appid\r\n        var appurl = e.currentTarget.dataset.appurl\r\n        if(url){\r\n          wx.navigateTo({\r\n            url: url,\r\n            fail: function () {\r\n              wx.switchTab({\r\n                url: url,\r\n              })\r\n            }\r\n          })\r\n        }\r\n        if (phone) {\r\n          wx.makePhoneCall({\r\n            phoneNumber: phone\r\n          })\r\n        }\r\n        if(appid){\r\n          wx.navigateToMiniProgram({\r\n            appId: appid,\r\n            path: appurl\r\n          })\r\n        }\r\n    },\r\n    // 新人优惠券弹层关闭\r\n    closecoupon: function(){\r\n      this.setData({ showcoupon: false})\r\n    },\r\n\r\n    // 顶部新优惠券提示条关闭\r\n    closecoupontips: function(){\r\n      this.setData({ showcoupontips: false })\r\n    },\r\n    // 顶部菜单切换\r\n    tabtopmenu: function (e) {\r\n      \r\n      var $this = this,\r\n        diypages = $this.data.diypages,\r\n        list = diypages.items,\r\n        id = e.currentTarget.dataset.id,\r\n        dataurl = e.currentTarget.dataset.url,\r\n        type = e.currentTarget.dataset.type,\r\n        topmenu = $this.data.topmenu,\r\n        topmenuindex = e.currentTarget.dataset.index;\r\n      $this.setData({ topmenuindex: topmenuindex})\r\n      if (e.currentTarget.id == 'm0' && dataurl == '') {\r\n        core.get('diypage', { type: 'home' }, function (result) {\r\n          var diypage = result.diypage;\r\n          $.each(diypage.items, function (id, item) {\r\n            if (item.id == 'topmenu') {\r\n              item.status = type\r\n            }\r\n          });\r\n          if (result.error == 0) {\r\n            $this.setData({ diypages: result.diypage })\r\n          }\r\n        }); \r\n      }\r\n      if (dataurl == '' || dataurl == undefined){\r\n        return;\r\n      }\r\n      if (dataurl.indexOf('pages') == 1){\r\n        var index = dataurl.lastIndexOf(\"=\");\r\n        var pageid = dataurl.substring(index + 1, dataurl.length);\r\n        core.get('diypage',{id:pageid},function(result){\r\n          if(result.error == 0){\r\n            var arr = [];\r\n            for (var i in result.diypage.items) {\r\n              arr.push(result.diypage.items[i]); //属性\r\n            }\r\n            arr.unshift(topmenu);\r\n            var obj = new Object();\r\n            for (var x in arr) {\r\n              obj[x] = arr[x];\r\n              if (arr[x].id == 'topmenu'){\r\n                arr[x].status = type\r\n              }\r\n            }\r\n            result.diypage.items = obj;\r\n            $this.setData({ diypages: result.diypage, topmenuDataType: '' })\r\n          }  \r\n        });\r\n      }else{\r\n        core.get('diypage/getInfo',{dataurl:dataurl},function(ret){\r\n          var topmenu = $this.data.topmenu;\r\n          core.get('diypage', { type: 'home' }, function (result) {\r\n            var diypage = result.diypage;\r\n            $.each(diypage.items,function(id,item){\r\n              if(item.id == 'topmenu'){\r\n                item.status = type\r\n                for (var i in item.data) {\r\n                  if (i == type) {\r\n                    item.data[i]['data'] = ret.goods.list;\r\n                    if (ret.goods.list.length <= 8) {\r\n                      item.data[i]['showmore'] = true\r\n                    }\r\n                  }\r\n                } \r\n              }\r\n            });\r\n            if (result.error == 0) {\r\n              $this.setData({ diypages: result.diypage, topmenuDataType:ret.type })\r\n            }\r\n          }); \r\n        });  \r\n      }\r\n      $this.setData({diypages: diypages})\r\n    },\r\n    // 选项卡切换\r\n    tabwidget: function (e) {\r\n      var $this = this,\r\n        diypages = $this.data.diypages,\r\n        list = diypages.items,\r\n        id = e.currentTarget.dataset.id,\r\n        dataurl = e.currentTarget.dataset.url,\r\n        type = e.currentTarget.dataset.type;\r\n\r\n      if (dataurl == '' || dataurl == undefined) {\r\n        return;\r\n      }\r\n \r\n      core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n        for (var i in diypages.items){\r\n          if(i == id){\r\n            diypages.items[i].data[type].data = ret.goods.list;\r\n            diypages.items[i].data[type].type = ret.type;\r\n            diypages.items[i].type = ret.type;\r\n            diypages.items[i].status = type;\r\n            if (ret.goods.list.length <= 8) {\r\n              diypages.items[i].data[type].showmore = true;\r\n            }\r\n            // $this.data.diypages.items[i].data[type].data = ret.goods.list;\r\n            var obj = \"diypages.items.\"+i+\".data[\"+type+\"].data\";\r\n            $this.setData({ diypages: diypages})\r\n          }\r\n        }   \r\n        // $this.setData({ tabbarData: ret.goods, tabbarDataType:ret.type})\r\n      });\r\n    },\r\n    getstoremore:function(e){\r\n      var $this = this;\r\n      var itemid = e.currentTarget.dataset.id;\r\n      var diypages = $this.data.diypages;\r\n      $.each(diypages.items,function(id,item){\r\n        if (id == itemid){\r\n          if (item.status == undefined || item.status == ''){\r\n            if (item.data[0].linkurl.indexOf('stores') != -1){\r\n              var paramsType = 'stores';\r\n            }else{\r\n              var paramsType = 'goods';\r\n            }\r\n            var dataurl = item.data[0].linkurl;\r\n            var num = item.data[0].data.length;\r\n            core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType }, function (ret){\r\n                item.data[0].data = ret.goods.list;\r\n              \r\n                if (item.data[0].data.length == ret.goods.count){\r\n                  item.data[0].showmore = true;\r\n                }\r\n                $this.setData({ diypages: diypages })\r\n            });\r\n          }else{\r\n            if (item.data[item.status].linkurl.indexOf('stores') != -1) {\r\n              var paramsType = 'stores';\r\n            } else {\r\n              var paramsType = 'goods';\r\n            }\r\n            var dataurl = item.data[item.status].linkurl;\r\n            var num = item.data[item.status].data.length;\r\n            core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType  }, function (ret) {\r\n              item.data[item.status].data = ret.goods.list;\r\n              \r\n              if (item.data[item.status].data.length == ret.goods.count) {\r\n                item.data[item.status].showmore = true;\r\n              }\r\n              $this.setData({ diypages: diypages })\r\n            });\r\n          }\r\n        }\r\n      })\r\n      \r\n    },\r\n    close:function(){\r\n      app.globalData.flag = true;\r\n      wx.reLaunch({\r\n        url: '../index/index',\r\n      })},\r\n    //秒杀时间初始化\r\n    initSeckill:function(seckillinfo){\r\n        var $this = this;\r\n        var status = parseInt(seckillinfo.status);\r\n        var starttime = seckillinfo.starttime;\r\n        var endtime = seckillinfo.endtime;\r\n        if (status != -1) {\r\n            var lasttime = 0;\r\n            var timer = 0;\r\n            var approot=app.globalData.approot;\r\n            wx.request({url:approot+'map.json',\r\n                success: function(x) {\r\n                    var currenttime = new Date(x.header.Date) / 1000;\r\n                    if (status == 0) {\r\n                        lasttime = endtime - currenttime;\r\n                    } else {\r\n                        lasttime = starttime - currenttime;\r\n                    }\r\n                    $this.setData({lasttime: lasttime});\r\n                    clearInterval($this.data.timer);\r\n                    $this.setTimer(seckillinfo);\r\n                    timer = $this.setTimerInterval(seckillinfo);\r\n\r\n                    $this.setData({timer: timer});\r\n                }\r\n            })\r\n        }\r\n\r\n    },\r\n    setTimer: function (seckillinfo) {\r\n        var $this = this;\r\n        var lasttime=0;\r\n        //每十秒请求一次服务器，获取时间\r\n        if (seckillinfo.status != -1) {\r\n            if(parseInt($this.data.lasttime)%10==0){\r\n                var approot=app.globalData.approot;\r\n                wx.request({url:approot+'map.json',\r\n                    success: function(x) {\r\n                        var currenttime = new Date(x.header.Date) / 1000;\r\n                        if (seckillinfo.status == 0) {\r\n                            lasttime = seckillinfo.endtime - currenttime;\r\n                        } else {\r\n                            lasttime = seckillinfo.starttime - currenttime;\r\n                        }\r\n                        $this.setData({lasttime: lasttime});\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        lasttime = parseInt($this.data.lasttime) - 1;\r\n        var times = $this.formatSeconds(lasttime);\r\n        $this.setData({lasttime: lasttime, hour: times.hour, min: times.min, sec: times.sec});\r\n        if (lasttime <= 0) {\r\n            $this.onLoad();\r\n        }\r\n    },\r\n    setTimerInterval: function (seckillinfo) {\r\n        var $this = this;\r\n        return setInterval(function () {\r\n            $this.setTimer(seckillinfo);\r\n        }, 1000);\r\n    },\r\n    formatSeconds: function (value) {\r\n        var theTime = parseInt(value);\r\n        var theTime1 = 0;\r\n        var theTime2 = 0;\r\n        if (theTime > 60) {\r\n            theTime1 = parseInt(theTime / 60);\r\n            theTime = parseInt(theTime % 60);\r\n            if (theTime1 > 60) {\r\n                theTime2 = parseInt(theTime1 / 60);\r\n                theTime1 = parseInt(theTime1 % 60)\r\n            }\r\n        }\r\n        return {\r\n            'hour': theTime2 < 10 ? '0' + theTime2 : theTime2,\r\n            'min': theTime1 < 10 ? '0' + theTime1 : theTime1,\r\n            'sec': theTime < 10 ? '0' + theTime : theTime\r\n        }\r\n    },\r\n    // 店铺装修商品组件\r\n    cutGoods: function(e){\r\n      var $this = this, \r\n          type = e.currentTarget.dataset.type, \r\n          num = e.currentTarget.dataset.num,\r\n          id = e.currentTarget.dataset.id,\r\n          diypages = $this.data.diypages;\r\n      for (var i in diypages.items){\r\n        if(i == id){\r\n          var current = diypages.items[i].current || 0;\r\n          if (type == 'advance') {\r\n            if (current < num - 1) {\r\n              diypages.items[i].current = current + 1 ;\r\n              $this.setData({ diypages: diypages })\r\n            } else {\r\n              diypages.items[i].current = 0;\r\n              $this.setData({ diypages: diypages })\r\n            }\r\n          } else {\r\n            if (current > 0) {\r\n              diypages.items[i].current = current - 1;\r\n              $this.setData({ diypages: diypages })\r\n            } else {\r\n              diypages.items[i].current = num - 1;\r\n              $this.setData({ diypages: diypages })\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n    }\r\n});\r\n","// pages/custom/index.js\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery')\r\nPage({\r\n  data: {\r\n    imgUrls: [\r\n      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963648306&di=1194f5980cccf9e5ad558dfb18e895ab&imgtype=0&src=http%3A%2F%2Fd.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F9c16fdfaaf51f3de87bbdad39ceef01f3a29797f.jpg',\r\n      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963737453&di=b1472a710a2c9ba30808fd6823b16feb&imgtype=0&src=http%3A%2F%2Fwww.qqzhi.com%2Fwenwen%2Fuploads%2Fpic.wenwen.soso.com%2Fp%2F20160830%2F20160830220016-586751007.jpg',\r\n      'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3004162400,3684436606&fm=11&gp=0.jpg'\r\n    ],\r\n    indicatorDotss: true,\r\n    autoplays: true,\r\n    intervals: 2000,\r\n    durations: 500,\r\n    circulars: true,\r\n    adveradmin: true,\r\n    clock: '',\r\n    diypage: 'true',\r\n    route: 'custom',\r\n    icons: app.requirejs('icons'),\r\n\r\n    /*广告结束*/\r\n    shop: {},\r\n    indicatorDots: true,\r\n    autoplay: true,\r\n    interval: 5000,\r\n    duration: 500,\r\n    circular: true,\r\n    /* 店铺推荐列表 */\r\n    storeRecommand: [],\r\n    total: 1,\r\n    page: 1,\r\n    loaded: false,\r\n    loading: true,\r\n    /*滚动*/\r\n    indicatorDotsHot: false,\r\n    autoplayHot: true,\r\n    intervalHot: 5000,\r\n    durationHOt: 1000,\r\n    circularHot: true,\r\n    hotimg: \"/static/images/hotdot.jpg\",\r\n    notification: \"/static/images/notification.png\",\r\n    saleout1: \"/static/images/saleout-1.png\",\r\n    saleout2: \"/static/images/saleout-2.png\",\r\n    saleout3: \"/static/images/saleout-3.png\",\r\n    play: \"/static/images/video_play.png\",\r\n    mute: \"/static/images/icon/mute.png\",\r\n    voice: \"/static/images/icon/voice.png\",\r\n    // 购物车\r\n    specs: [],\r\n    options: [],\r\n    diyform: {},\r\n    specsTitle: '',\r\n    total: 1,\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    buyType: '',\r\n    areas: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n\r\n    modelShow: false,\r\n    limits: true,\r\n    result: {},\r\n    audios: {},\r\n    audiosObj:{},\r\n    picture:{},\r\n    result:{},\r\n    pageid:0,\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    var $this = this;\r\n    var res = wx.getSystemInfoSync()\r\n    var pageid = $this.data.pageid;\r\n    core.get('diypage&id=' + pageid, {}, function (result) {\r\n      var data = { loading: false, diypage: result.diypage };\r\n      $this.setData(data);\r\n    });\r\n    $this.setData({\r\n      screenWidth: res.windowWidth\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    options = options || {};\r\n    var $this = this;\r\n    $this.pauseOther();\r\n\r\n    var pageid = options.pageid;\r\n\r\n    if (pageid==undefined){\r\n        var pages = getCurrentPages(); //获取页面栈\r\n        var url_arr = pages[pages.length - 1].route.split(\"/\");//当前页面路径/分割后的数组\r\n        pageid = url_arr[url_arr.length - 1];\r\n    }\r\n\r\n    $this.setData({ pageid: pageid, imgUrl: app.globalData.approot});\r\n    // diypage.get(this, 'home');\r\n    var scene = decodeURIComponent(options.scene);\r\n    if (!options.id && scene) {\r\n      var sceneObj = core.str2Obj(scene);\r\n      options.id = sceneObj.id;\r\n      if (sceneObj.mid) {\r\n        options.mid = sceneObj.mid;\r\n      }\r\n    }\r\n    setTimeout(function () {\r\n      $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n    }, 3000)\r\n    app.url(options);\r\n    \r\n    diypage.get(this, pageid, function (res) {\r\n      /*启动广告*/\r\n      if ($this.data.startadv == undefined || $this.data.startadv == '') {\r\n        return\r\n      }\r\n      if ($this.data.startadv.status == 0 || $this.data.startadv == '') {\r\n        wx.getSetting({\r\n          success: function (res) {\r\n            var limits = res.authSetting['scope.userInfo'];\r\n            if (limits) {\r\n              //$this.get_nopayorder();\r\n              return\r\n            }\r\n          }\r\n        })\r\n      }\r\n\r\n      var params = $this.data.startadv.params;\r\n      if (params.style == 'default') {\r\n        var timer = params.autoclose;\r\n        function count_down(that) {\r\n          $this.setData({ clock: timer });\r\n          if (timer <= 0) {\r\n            $this.setData({ adveradmin: false });\r\n            return;\r\n          }\r\n          setTimeout(function () {\r\n            timer -= 1;\r\n            count_down(that);\r\n          }, 1000)\r\n        }\r\n        count_down($this);\r\n      }\r\n\r\n      if (params.showtype == 1) {\r\n        var showtime = params.showtime;\r\n        var countdown = showtime * 1000 * 60;\r\n        var startadvtime = app.getCache('startadvtime');\r\n        var nowtime = + new Date();\r\n        var adveradmin = true;\r\n        $this.setData({ adveradmin: true })\r\n        if (startadvtime) {\r\n          if ((nowtime - startadvtime) < countdown) {\r\n            adveradmin = false;\r\n          }\r\n        }\r\n        $this.setData({ adveradmin: adveradmin });\r\n        if (adveradmin) {\r\n          app.setCache('startadvtime', nowtime);\r\n        }\r\n      }\r\n      var advstatus = $this.data.startadv.status;\r\n    });\r\n    $this.setData({\r\n      cover: true,\r\n      showvideo: false\r\n    });\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        var swiperheight = res.windowWidth / 1.7\r\n        $this.setData({\r\n          swiperheight: swiperheight\r\n        })\r\n      }\r\n    });\r\n  },\r\n  /* 获取首页信息 */\r\n  getShop: function () {\r\n    var $this = this;\r\n    core.get('shop/get_shopindex', {}, function (result) {\r\n      parser.wxParse('wxParseData', 'html', result.copyright, $this, '5');\r\n      $this.setData({ shop: result });\r\n    });\r\n  },\r\n\r\n  /*加载推荐商品*/\r\n  onReachBottom: function () {\r\n    if (this.data.loaded || this.data.storeRecommand.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.getRecommand();\r\n  },\r\n  //店铺推荐\r\n  getRecommand: function () {\r\n    var $this = this;\r\n    if ($this.data.diypage == 'true') {\r\n      return\r\n    }\r\n    core.get('shop/get_recommand', { page: $this.data.page }, function (result) {\r\n      var data = { loading: false, total: result.total };\r\n      $this.setData({\r\n        loading: false,\r\n        total: result.total,\r\n        show: true\r\n      });\r\n      if (!result.list) {\r\n        result.list = [];\r\n      }\r\n      if (result.list.length > 0) {\r\n        $this.setData({\r\n          storeRecommand: $this.data.storeRecommand.concat(result.list),\r\n          page: result.page + 1\r\n        });\r\n        if (result.list.length < result.pagesize) {\r\n          data.loaded = true\r\n        }\r\n      }\r\n\r\n    });\r\n  },\r\n  imagesHeight: function (e) {\r\n    var width = e.detail.width, height = e.detail.height, type = e.target.dataset.type, $this = this;\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        $this.data.result[type] = res.windowWidth / width * height;\r\n        if (!$this.data[type] || ($this.data[type] && result[type] < $this.data[type])) {\r\n          $this.setData({ result: $this.data.result });\r\n        }\r\n      }\r\n    });\r\n  },\r\n  bindInput: function (e) {\r\n    this.setData({\r\n      inputValue: e.detail.value\r\n    })\r\n  },\r\n  t1: function (e) {\r\n    diypage.fixedsearch(this, e);\r\n  },\r\n  startplay: function (e) {\r\n    var cover = e.target.dataset.cover;\r\n    this.setData({\r\n      cover: cover,\r\n      showvideo: true\r\n    });\r\n    this.videoContext = wx.createVideoContext('Video');\r\n    this.videoContext.play()\r\n  },\r\n  /* 隐藏未付订单 */\r\n  unpaidcolse: function (e) {\r\n    var unpaid = '';\r\n    if (e.target.dataset.type == 'open') {\r\n      unpaid = true\r\n    } else {\r\n      unpaid = false\r\n    }\r\n    this.setData({\r\n      unpaid: unpaid\r\n    })\r\n  },\r\n  /* 关闭未付订单 */\r\n  unpaidcolse2: function (e) {\r\n    this.setData({\r\n      unpaidhide: true\r\n    })\r\n  },\r\n\r\n  //\r\n  get_nopayorder: function () {\r\n    var $this = this;\r\n    core.get('shop/get_nopayorder', {}, function (result) {\r\n      if (result.hasinfo == 1) {\r\n        $this.setData({\r\n          nopaygoods: result.goods,\r\n          nopaygoodstotal: result.goodstotal,\r\n          nopayorder: result.order,\r\n          unpaid: true\r\n        });\r\n      }\r\n    });\r\n  },\r\n\r\n  //是否有新的优惠券\r\n  get_hasnewcoupon: function () {\r\n    var $this = this;\r\n    core.get('shop/get_hasnewcoupon', {}, function (result) {\r\n      if (result.hasnewcoupon == 1) {\r\n        $this.setData({ showcoupontips: true });\r\n      }\r\n    });\r\n  },\r\n  //是否有新人优惠券\r\n  get_cpinfos: function () {\r\n    var $this = this;\r\n    core.get('shop/get_cpinfos', {}, function (result) {\r\n      if (result.hascpinfos == 1) {\r\n        $this.setData({ showcoupon: true, cpinfos: result.cpinfos, });\r\n\r\n\r\n      }\r\n    });\r\n  },\r\n  /*关闭广告*/\r\n  adverclose: function () {\r\n    this.setData({ adveradmin: false })\r\n    this.get_nopayorder();\r\n  },\r\n  /*广告点击跳转链接*/\r\n  indexChangebtn: function (e) {\r\n    var urls = e.currentTarget.dataset.type;\r\n    wx.navigateTo({\r\n      url: urls\r\n    })\r\n  },\r\n  /* 隐藏未付订单 */\r\n  unpaidcolse: function (e) {\r\n    var unpaid = '';\r\n    if (e.target.dataset.type == 'open') {\r\n      unpaid = true\r\n    } else {\r\n      unpaid = false\r\n    }\r\n    this.setData({\r\n      unpaid: unpaid\r\n    })\r\n  },\r\n\r\n  /* 关闭未付订单 */\r\n  unpaidcolse2: function (e) {\r\n    this.setData({\r\n      unpaidhide: true\r\n    })\r\n  },\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    app.checkAuth();\r\n    var $this = this;\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        if (limits) {\r\n          var goodslist = 'goodslist';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          $this.setData({\r\n            cover: '',\r\n            showvideo: false\r\n          });\r\n        } else {\r\n          // $this.setData({ modelShow: true })\r\n          return\r\n        }\r\n      }\r\n    })\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', specsTitle: ''\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this)\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this\r\n    goodspicker.select($this)\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n  changevoice: function () {\r\n    if (this.data.sound) {\r\n      this.setData({\r\n        sound: false,\r\n        soundpic: true\r\n      })\r\n    } else {\r\n      this.setData({\r\n        sound: true,\r\n        soundpic: false\r\n      })\r\n    }\r\n  },\r\n  phone: function () {\r\n    var phoneNumber = this.data.phonenumber + ''\r\n    wx.makePhoneCall({\r\n      phoneNumber: phoneNumber\r\n    })\r\n  },\r\n  /*用户授权-取消*/\r\n  cancelclick: function () {\r\n    this.setData({ modelShow: false })\r\n  },\r\n  /*用户授权-去设置*/\r\n  confirmclick: function () {\r\n    this.setData({ modelShow: false })\r\n    wx.openSetting({\r\n      success: function (res) { }\r\n    })\r\n  },\r\n  navigate: function (e) {\r\n    var url = e.currentTarget.dataset.url\r\n    var phone = e.currentTarget.dataset.phone\r\n    var appid = e.currentTarget.dataset.appid\r\n    var appurl = e.currentTarget.dataset.appurl\r\n    if (url) {\r\n      wx.navigateTo({\r\n        url: url,\r\n        fail: function(e){\r\n          wx.switchTab({\r\n            url: url\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if (phone) {\r\n      wx.makePhoneCall({\r\n        phoneNumber: phone\r\n      })\r\n    }\r\n    if (appid) {\r\n      wx.navigateToMiniProgram({\r\n        appId: appid,\r\n        path: appurl\r\n      })\r\n    }\r\n  },\r\n  // 新人优惠券弹层关闭\r\n  closecoupon: function () {\r\n    this.setData({ showcoupon: false })\r\n  },\r\n\r\n  // 顶部新优惠券提示条关闭\r\n  closecoupontips: function () {\r\n    this.setData({ showcoupontips: false })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function (e) {\r\n    // innerAudioContext.play();\r\n\r\n  },\r\n\r\n  pauseOther: function (item_id){\r\n    var $this = this;\r\n    $.each(this.data.audiosObj, function(id, obj){\r\n      if(id == item_id){\r\n        return;\r\n      }\r\n      obj.pause();\r\n      var audios = $this.data.audios; \r\n      if (audios[id]){\r\n        audios[id].status = false;\r\n        $this.setData({ audios: audios });\r\n      }\r\n    });\r\n},\r\n\r\n  play: function (e) {\r\n    var item_id = e.target.dataset.id;\r\n    var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n    if (!innerAudioContext) {\r\n      innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n      var audiosObj = this.data.audiosObj;\r\n      audiosObj[item_id] = innerAudioContext;\r\n      this.setData({\r\n        audiosObj: audiosObj\r\n      })\r\n    }\r\n    var $this = this;\r\n    innerAudioContext.onPlay(() => {\r\n      var Time = setInterval(function () {\r\n        var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n        var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n        var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n        var seconds = Math.ceil(innerAudioContext.currentTime)\r\n        var audioicon = ''\r\n        if (minute < 10) {\r\n          minute = \"0\" + minute;\r\n        }\r\n        var time = minute + \":\" + second;\r\n        var audios = $this.data.audios;\r\n        audios[item_id].audiowidth = width;\r\n        audios[item_id].Time = Time;\r\n        audios[item_id].audiotime = time;\r\n        audios[item_id].seconds = seconds;\r\n        $this.setData({ audios: audios })\r\n      }, 1000)\r\n    })\r\n\r\n    var src = e.currentTarget.dataset.audio;\r\n    var time = e.currentTarget.dataset.time;\r\n    var pausestop = e.currentTarget.dataset.pausestop;\r\n    var loopplay = e.currentTarget.dataset.loopplay;\r\n    if (loopplay == 0) {\r\n      innerAudioContext.onEnded((res) => {\r\n        audios[item_id].status = false;\r\n        $this.setData({ audios: audios })\r\n      })\r\n    }\r\n    var audios = $this.data.audios;\r\n    if (!audios[item_id]) {\r\n      audios[item_id] = {};\r\n    }\r\n    if (innerAudioContext.paused && time == 0) {\r\n      innerAudioContext.src = src;\r\n      innerAudioContext.play();\r\n      if (loopplay == 1) {\r\n        innerAudioContext.loop = true;\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n\r\n    } else if (innerAudioContext.paused && time > 0) {\r\n      innerAudioContext.play();\r\n      if (pausestop == 0) {\r\n        innerAudioContext.seek(time);\r\n      } else {\r\n        innerAudioContext.seek(0);\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n    }\r\n    else {\r\n      innerAudioContext.pause();\r\n      audios[item_id].status = false;\r\n    }\r\n    $this.setData({ audios: audios })\r\n  },\r\n\r\n  imagesHeight: function (e) {\r\n    var width = e.detail.width, height = e.detail.height, type = e.target.dataset.type, $this = this;\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        $this.data.result[type] = res.windowWidth / width * height;\r\n        if (!$this.data[type] || ($this.data[type] && result[type] < $this.data[type])) {\r\n          $this.setData({ result: $this.data.result });\r\n        }\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    this.pauseOther();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    this.pauseOther();\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n      return {\r\n        title: this.data.diypages.page.title,\r\n      }\r\n  },\r\n\r\n  // 顶部菜单切换\r\n  tabtopmenu: function (e) {\r\n    var $this = this,\r\n      diypages = $this.data.diypages,\r\n      list = diypages.items,\r\n      id = e.currentTarget.dataset.id,\r\n      dataurl = e.currentTarget.dataset.url,\r\n      type = e.currentTarget.dataset.type,\r\n      topmenu = $this.data.topmenu,\r\n      topmenuindex = e.currentTarget.dataset.index;\r\n      pageid = $this.data.pageid;\r\n    $this.setData({ topmenuindex: topmenuindex })\r\n    if (dataurl == '' || dataurl == undefined) {\r\n      return;\r\n    }\r\n    if (dataurl.indexOf('pages') == 1) {\r\n     \r\n      var index = dataurl.lastIndexOf(\"=\");\r\n      var pageid = dataurl.substring(index + 1, dataurl.length);\r\n      core.get('diypage', { id: pageid }, function (result) {\r\n        if (result.error == 0) {\r\n          var arr = [];\r\n          for (var i in result.diypage.items) {\r\n            arr.push(result.diypage.items[i]); //属性\r\n          }\r\n          arr.unshift(topmenu);\r\n          var obj = new Object();\r\n          for (var x in arr) {\r\n            obj[x] = arr[x];\r\n            if (arr[x].id == 'topmenu') {\r\n              arr[x].status = type\r\n            }\r\n          }\r\n          result.diypage.items = obj;\r\n          $this.setData({ diypages: result.diypage, topmenuDataType: '' })\r\n        }\r\n      });\r\n    } else {\r\n      core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n        //console.error('dataurl' + dataurl)\r\n        var topmenu = $this.data.topmenu;\r\n        core.get('diypage', { type: pageid }, function (result) {\r\n          var diypage = result.diypage;\r\n          $.each(diypage.items, function (id, item) {\r\n            if (item.id == 'topmenu') {\r\n              item.status = type\r\n              for (var i in item.data) {\r\n                if (i == type) {\r\n                  item.data[i]['data'] = ret.goods.list;\r\n                  if (ret.goods.list.length <= 8) {\r\n                  \r\n                    item.data[i]['showmore'] = true\r\n                   \r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n          if (result.error == 0) {\r\n            $this.setData({ diypages: result.diypage, topmenuDataType: ret.type })\r\n          }\r\n        });\r\n      });\r\n    }\r\n    $this.setData({ diypages: diypages })\r\n  },\r\n  // 选项卡切换\r\n  tabwidget: function (e) {\r\n  \r\n    var $this = this,\r\n      diypages = $this.data.diypages,\r\n      list = diypages.items,\r\n      id = e.currentTarget.dataset.id,\r\n      dataurl = e.currentTarget.dataset.url,\r\n      type = e.currentTarget.dataset.type;\r\n\r\n    if (dataurl == '' || dataurl == undefined) {\r\n      return;\r\n    }\r\n\r\n    core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n      for (var i in diypages.items) {\r\n        if (i == id) {\r\n          diypages.items[i].data[type].data = ret.goods.list;\r\n          diypages.items[i].data[type].type = ret.type;\r\n          diypages.items[i].type = ret.type;\r\n          diypages.items[i].status = type;\r\n          if (ret.goods.list.length <= 8) {\r\n            diypages.items[i].data[type].showmore = true;\r\n          }\r\n          \r\n          $this.setData({ diypages: diypages })\r\n        }\r\n      }\r\n    });\r\n  },\r\n  getstoremore: function (e) {\r\n    var $this = this;\r\n    var itemid = e.currentTarget.dataset.id;\r\n    var diypages = $this.data.diypages;\r\n    $.each(diypages.items, function (id, item) {\r\n      if (id == itemid) {\r\n        if (item.status == undefined || item.status == '') {\r\n          if (item.data[0].linkurl.indexOf('stores') != -1) {\r\n            var paramsType = 'stores';\r\n          } else {\r\n            var paramsType = 'goods';\r\n          }\r\n          var dataurl = item.data[0].linkurl;\r\n          var num = item.data[0].data.length;\r\n          core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType }, function (ret) {\r\n            item.data[0].data = ret.goods.list;\r\n           \r\n            if (item.data[0].data.length == ret.goods.count) {\r\n              item.data[0].showmore = true;\r\n             \r\n            }\r\n            $this.setData({ diypages: diypages })\r\n          });\r\n        } else {\r\n          if (item.data[item.status].linkurl.indexOf('stores') != -1) {\r\n            var paramsType = 'stores';\r\n          } else {\r\n            var paramsType = 'goods';\r\n          }\r\n          var dataurl = item.data[item.status].linkurl;\r\n          var num = item.data[item.status].data.length;\r\n          core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType }, function (ret) {\r\n            item.data[item.status].data = ret.goods.list;\r\n           \r\n            if (item.data[item.status].data.length == ret.goods.count) {\r\n              item.data[item.status].showmore = true;\r\n            }\r\n            $this.setData({ diypages: diypages })\r\n          });\r\n        }\r\n      }\r\n    })\r\n\r\n  },\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-04\r\n * @author 咖啡\r\n *\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons'); \r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    limits: true,\r\n    tabinfo: 'active',\r\n    tabreplay: '',\r\n    tablog: '',\r\n    hasoption: false,\r\n    options: [],\r\n    goodsoptions:[],\r\n    optionid:0,\r\n    specs: [],\r\n    goods: [],\r\n    log: [],\r\n    logmore:false,\r\n    logpage:1,\r\n    replays: [],\r\n    replaysmore:false,\r\n    replaypage:1,\r\n    stores: [],\r\n    goodsrec: [],\r\n    goodspicker:false,\r\n    selectspecs:[],\r\n    optionselect:\"请选择规格\",\r\n    optionbtn:'确认',\r\n    timer:[],\r\n    day:0,\r\n    hour:0,\r\n    minute:0,\r\n    second:0,\r\n    windowWidth: 0,\r\n    windowHeight: 0,\r\n    indicatorDots: true,\r\n    autoplay: false,\r\n    interval: 5000,\r\n    duration: 1000\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({options:options});\r\n  },\r\n  onTab: function (e) {\r\n    var $this = this;\r\n    var active = e.currentTarget.dataset.tab;\r\n    if (active == \"tabreplay\") {\r\n      $this.setData({ tabinfo: '', tabreplay: 'active', tablog: '' });\r\n    } else if (active == \"tablog\") {\r\n      $this.setData({ tabinfo: '', tabreplay: '', tablog: 'active' });\r\n    } else {\r\n      $this.setData({ tabinfo: 'active', tabreplay: '', tablog: '' });\r\n    }\r\n  },\r\n  //参与记录翻页\r\n  getlog:function(){\r\n    var $this = this;\r\n    $this.setData({ logpage:$this.data.logpage+1 });\r\n    core.get('creditshop/detail/getlistlog', { id: $this.options.id , page:$this.data.logpage},function(msg){\r\n        msg.list = $this.data.log.concat(msg.list);\r\n        $this.setData({log:msg.list,logmore:msg.more});\r\n    });\r\n  },\r\n  getreply:function(){\r\n    var $this = this;\r\n    $this.setData({ replaypage: $this.data.replaypage + 1 });\r\n    core.get('creditshop/detail/getlistreply', { id: $this.options.id, page: $this.data.replaypage },\r\n    function (msg){\r\n      msg.list = $this.data.replays.concat(msg.list);\r\n      $this.setData({ replays: msg.list, replaysmore: msg.more });\r\n    });\r\n      \r\n  },\r\n  /*获取商品详情*/\r\n  getDetail: function () {\r\n    var $this = this;\r\n    var options = $this.data.options;\r\n    core.get('creditshop/detail', { id: options.id }, function (result) {\r\n      if(result.error>0){\r\n        foxui.toast($this, result.message);\r\n        setTimeout(function(){\r\n          wx.navigateBack();\r\n        },1000)\r\n        return;\r\n      }\r\n      parser.wxParse('wxParseData', 'html', result.goods.goodsdetail, $this, '0');\r\n      parser.wxParse('wxParseData_subdetail', 'html', result.goods.subdetail, $this, '0');\r\n      parser.wxParse('wxParseData_noticedetail', 'html', result.goods.noticedetail, $this, '0');\r\n      parser.wxParse('wxParseData_usedetail', 'html', result.goods.usedetail, $this, '0');\r\n      \r\n      $this.setData({\r\n        goods: result.goods,\r\n        log: result.log,\r\n        logmore:result.logmore,\r\n        replays: result.replys,\r\n        replaysmore: result.replymore,\r\n        stores: result.stores,\r\n        goodsrec: result.goodsrec,\r\n        hasoption:result.goods.hasoption,\r\n        sysset: result.sysset\r\n      });\r\n      /*倒计时*/\r\n      if (result.goods.istime > 0 && result.goods.timestart > 0 && result.goods.timeend>0){\r\n        clearInterval($this.data.timer);\r\n        var timer = setInterval(function () {\r\n          $this.countDown(result.goods.timestart, result.goods.timeend);\r\n        }, 1000);\r\n        $this.setData({ timer: timer });\r\n      }\r\n    });\r\n  },\r\n  /*倒计时控件*/\r\n  countDown: function (timestart, timeend) {\r\n    var now = parseInt(Date.now() / 1000);\r\n    var endDate = timestart > now ? timestart : timeend;\r\n    var leftTime = endDate - now;\r\n    var leftsecond = parseInt(leftTime);\r\n    var day = Math.floor(leftsecond / (60 * 60 * 24));\r\n    var hour = Math.floor((leftsecond - day * 24 * 60 * 60) / 3600);\r\n    var minute = Math.floor((leftsecond - day * 24 * 60 * 60 - hour * 3600) / 60);\r\n    var second = Math.floor(leftsecond - day * 24 * 60 * 60 - hour * 3600 - minute * 60);\r\n    var time = {day:day,hour:hour,minute:minute,second:second};\r\n    this.setData({ timer:time});\r\n  },\r\n  /*选择规格picker事件*/\r\n  optionclick:function(){\r\n    var $this = this;\r\n    var id = $this.data.goods.id;\r\n    var hasoption = $this.data.goods.hasoption;\r\n    var specs = $this.data.specs;\r\n    var canbuy = $this.data.goods.canbuy;\r\n    if(!canbuy){\r\n      foxui.toast($this, $this.data.goods.buymsg);\r\n      return;\r\n    }\r\n\r\n    if (hasoption){\r\n      if (specs.length == 0){\r\n        core.get('creditshop/detail/option', { id: id }, function (result) {\r\n          $this.setData({\r\n            goodspicker: true,\r\n            goodsoptions: result.options,\r\n            optiongoods: result.goods,\r\n            specs: result.specs\r\n          });\r\n        });\r\n      }else{\r\n        $this.setData({goodspicker: true});\r\n      }      \r\n    }else{\r\n      $this.setData({hasoption:false});\r\n      return;\r\n    }\r\n  },\r\n  /*选择规格*/\r\n  specselect: function (event){\r\n    var $this = this;\r\n    var selectspecs = $this.data.selectspecs;\r\n    var idx = event.target.dataset.idx;\r\n    var itemid = event.target.dataset.specid;\r\n    selectspecs[idx] = { id: itemid, title: event.target.dataset.title };\r\n    $this.setData({ selectspecs: selectspecs});\r\n    var specs = $this.data.specs;\r\n    var specsitem = specs[idx].items;\r\n    specsitem.forEach(function (e) {\r\n      if (itemid == e.id) {\r\n        e.class = \"btn-danger\";\r\n      } else {\r\n        e.class = \"\";\r\n      }\r\n    });\r\n    specs[idx].items = specsitem;\r\n    $this.setData({ specs: specs});\r\n\r\n    var title = '';\r\n    var optionTitle = '';\r\n    selectspecs.forEach(function (event) {\r\n      title = event.title + ';'+title;\r\n      optionTitle = event.id + '_' + optionTitle;\r\n    });\r\n    optionTitle = optionTitle.substring(0, optionTitle.length - 1);\r\n    var options = $this.data.goodsoptions;\r\n    if (event.target.dataset.thumb != '') {\r\n      $this.setData({\r\n        'optiongoods.thumb': event.target.dataset.thumb,\r\n      })\r\n    }\r\n    \r\n    options.forEach(function (event) {\r\n      if (event.specs == optionTitle) {\r\n        $this.setData({\r\n          optionid: event.id,\r\n          'optiongoods.total': event.total,\r\n          'goods.credit': event.credit,\r\n          'goods.money': event.money,\r\n          'optiongoods.credit': event.credit,\r\n          'optiongoods.money': event.money,\r\n          'optionselect': '已选 '+event.title\r\n        });\r\n        if (event.total < $this.data.total) {\r\n          $this.setData({\r\n            'goods.canbuy': false,\r\n            'goods.buymsg': '库存不足',\r\n            optionbtn: '库存不足',\r\n          })\r\n          foxui.toast($this, \"库存不足\");\r\n        } else {\r\n          $this.setData({\r\n            'goods.canbuy': true,\r\n            'goods.buymsg': '库存不足',\r\n            optionbtn: '确认',\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n\r\n  },\r\n  /*关闭picker*/\r\n  closepicker:function(){\r\n    this.setData({ goodspicker: false})\r\n  },\r\n  /*积分兑换绑定事件*/\r\n  openActionSheet: function () {\r\n    var $this = this;\r\n    var canbuy = $this.data.goods.canbuy;\r\n    var hasoption = $this.data.goods.hasoption;\r\n    var optionid = $this.data.optionid;\r\n    if (canbuy) {\r\n      if(hasoption>0){\r\n        if(optionid>0){\r\n          wx.redirectTo({\r\n            url: '/pages/creditshop/create/index?id=' + $this.data.goods.id + '&optionid=' + optionid,\r\n          });\r\n        }else{\r\n          $this.optionclick();\r\n        }\r\n      }else{\r\n        wx.redirectTo({\r\n          url: '/pages/creditshop/create/index?id=' + $this.data.goods.id,\r\n        });\r\n      }\r\n\r\n    } else {\r\n      return;\r\n    }\r\n  },\r\n  /*页面加载*/\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.getDetail();\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  }\r\n\r\n});","/**\r\n *\r\n * order/common/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),\r\n  core = app.requirejs('core');\r\nPage({\r\n  data: {\r\n    stars_class: ['text-default', 'text-primary', 'text-success', 'text-warning', 'text-danger'],\r\n    stars_text: ['差评', '一般', '挺好', '满意', '非常满意'],\r\n    normalSrc: 'icox icox-star',\r\n    selectedSrc: 'icox icox-xing selected',\r\n    key: -1,\r\n    content: '',\r\n    images: [],\r\n    imgs: [],\r\n    log:[],\r\n    is_openmerch:0,\r\n    shop:[],\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    this.setData({\r\n      options: options\r\n    });\r\n    app.url(options);\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    core.get('creditshop/comment', $this.data.options, function (list) {\r\n      if (list.error == 0) {\r\n        list.show = true;\r\n        $this.setData(list);\r\n        $this.setData({\r\n          log: list.log,\r\n          is_openmerch: list.is_openmerch,\r\n          shop: list.shop,\r\n        });\r\n      } else {\r\n        core.toast(list.message, 'loading');\r\n        wx.navigateBack();\r\n      }\r\n    }, true);\r\n  },\r\n  select: function (e) {\r\n    var key = e.currentTarget.dataset.key;\r\n    this.setData({\r\n      key: key\r\n    });\r\n  },\r\n  change: function (e) {\r\n    var name = core.data(e).name, data = {};\r\n    data[name] = e.detail.value;\r\n    this.setData(data);\r\n  },\r\n  submit: function () {\r\n    var $this = this, data = {\r\n      logid: this.data.log.id,\r\n      merchid:this.data.log.merchid,\r\n      comments: []\r\n    };\r\n    if (this.data.content == '' || this.data.key == -1) {\r\n      core.alert('有未填写项目!')\r\n      return false;\r\n    }\r\n    var g = {\r\n      goodsid: this.data.log.goodsid,\r\n      level: this.data.key + 1,\r\n      content: this.data.content,\r\n      images: this.data.images\r\n    };\r\n    data.comments.push(g);\r\n    core.post('creditshop/comment/submit', data, function (list) {\r\n      if (list.error != 0) {\r\n        core.toast(list.message, 'loading')\r\n      }\r\n      wx.navigateBack()\r\n    }, true);\r\n  },\r\n  upload: function (e) {\r\n    var $this = this, dataset = core.data(e), type = dataset.type, images = $this.data.images, imgs = $this.data.imgs, index = dataset.index;\r\n    if (type == 'image') {\r\n      core.upload(function (file) {\r\n        images.push(file.filename);\r\n        imgs.push(file.url);\r\n        $this.setData({\r\n          images: images,\r\n          imgs: imgs\r\n        })\r\n      });\r\n    } else if (type == 'image-remove') {\r\n      images.splice(index, 1);\r\n      imgs.splice(index, 1);\r\n      $this.setData({\r\n        images: images,\r\n        imgs: imgs\r\n      })\r\n    } else if (type == 'image-preview') {\r\n      wx.previewImage({\r\n        current: imgs[index],\r\n        urls: imgs\r\n      })\r\n    }\r\n  }\r\n});\r\n","/**\r\n *\r\n * order/express/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core');\r\nPage({\r\n    data: {},\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list( options.id );\r\n    },\r\n    get_list:function ( id ) {\r\n        var $this = this;\r\n        core.get('creditshop/log/express', {id:id}, function (list) {\r\n            if (list.error==0){\r\n                list.show = true;\r\n                $this.setData(list);\r\n            }else{\r\n                core.toast(list.message,'loading')\r\n            }\r\n        });\r\n    }\r\n});","//index.js\r\n//获取应用实例\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\n\r\nPage({\r\n    data: {\r\n        page: 1,\r\n        loaded: false,\r\n        loading: false,\r\n        list: []\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('shop/notice/get_list', {page: this.data.page}, function (result) {\r\n            $this.setData({loading: false,show:true});\r\n            if (result.list.length > 0) {\r\n                $this.setData({\r\n                    page: $this.data.page + 1,\r\n                    list: $this.data.list.concat(result.list)\r\n                });\r\n            } else {\r\n                if (result.list.length < result.pagesize) {\r\n                    $this.setData({\r\n                        loaded: true\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getList();\r\n    }\r\n})\r\n","//index.js\r\n//获取应用实例\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {\r\n        id:'-',\r\n        title:'-',\r\n        createtime:'-'\r\n    },\r\n    onLoad: function (options) {\r\n        var $this = this;\r\n        $this.setData({ id: options.id});\r\n        app.url(options);\r\n\r\n        core.get('shop/notice/detail',{'id': this.data.id},function(data){\r\n            var notice = data.notice;\r\n            parser.wxParse('wxParseData','html', notice.detail,$this,'5');\r\n            $this.setData({\r\n                show: true,\r\n                title: notice.title,\r\n                createtime: notice.createtime,\r\n            });\r\n\r\n        })\r\n\r\n    }\r\n})\r\n","// pages/shop/caregory/index.js\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n    data: {\r\n        route: 'category',\r\n        category: {},\r\n        icons: app.requirejs('icons'),\r\n        selector: 0,     //当前分类\r\n        advimg: '',      //分类广告\r\n        advurl:'',\r\n        recommands: {},  //推荐分类\r\n        level: 0,        //分类显示等级\r\n        back: 0,         //返回上一级\r\n        child: {},\r\n        parent: {},\r\n    },\r\n    // 二级分类绑定事件\r\n    tabCategory: function (event) {\r\n        this.setData({\r\n            selector: event.target.dataset.id,\r\n            advimg: event.target.dataset.src,\r\n            advurl: event.target.dataset.url,\r\n            child: event.target.dataset.child,\r\n            back: 0,\r\n        });\r\n        if ($.isEmptyObject(event.target.dataset.child)){\r\n            this.setData({level: 0});\r\n        } else {\r\n            this.setData({level: 1});\r\n        }\r\n     \r\n    },\r\n    //三级分类绑定事件\r\n    cateChild: function (event) { \r\n        this.setData({\r\n            parent: event.currentTarget.dataset.parent,\r\n            child: event.currentTarget.dataset.child,\r\n            back:1\r\n        });\r\n        \r\n    },\r\n    //返回上一级\r\n    backParent: function (event) {\r\n        this.setData({\r\n            child: event.currentTarget.dataset.parent,\r\n            back: 0\r\n        });\r\n    },\r\n    //\r\n    getCategory: function () {\r\n        var $this = this;\r\n        core.get('shop/get_category', {}, function (result) {\r\n            $this.setData({\r\n                category: result.category,\r\n                show: true,\r\n                set: result.set,\r\n                advimg: result.set.advimg,\r\n                recommands: result.recommands,\r\n                child: result.recommands\r\n                \r\n            });\r\n          \r\n        });\r\n    },\r\n    onShow: function () {\r\n        // 页面初始化\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getCategory();\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    }\r\n});","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data:{\r\n      specs:[],\r\n      options:[],\r\n      diyform: {},\r\n      specsTitle: '',\r\n      total: 1,\r\n        active: '',\r\n        slider: '',\r\n        tempname: '',\r\n        buyType: '',\r\n        icons: app.requirejs('icons'),\r\n        isFilterShow:false,\r\n        listmode:'block',\r\n        listsort:'',\r\n        page: 1,\r\n        loaded:false,\r\n        loading:true,\r\n        allcategory:[],\r\n        catlevel:-1,\r\n        opencategory:false,\r\n        category:{},\r\n        category_child:[],\r\n        category_third:[],\r\n        filterBtns:{},\r\n        isfilter: 0,\r\n        list: [],\r\n        params:{},\r\n        count: 0,\r\n        defaults: {\r\n            keywords: '',\r\n            isrecommand: '',\r\n            ishot: '',\r\n            isnew: '',\r\n            isdiscount: '',\r\n            issendfree: '',\r\n            istime: '',\r\n            cate: '',\r\n            order: '',\r\n            by: 'desc',\r\n            merchid: 0,\r\n        },\r\n        lastcat:'',\r\n        fromsearch: false,\r\n        searchRecords: [],\r\n        areas: [],\r\n        limits: true,\r\n        modelShow: false\r\n    },\r\n    onLoad:function(options){\r\n      var $this = this;\r\n      $this.setData({ imgUrl: app.globalData.approot });\r\n      setTimeout(function () {\r\n        $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n      }, 3000)\r\n        if(!$.isEmptyObject(options)){\r\n            var isfilter = options.isrecommand||options.isnew||options.ishot||options.isdiscount||options.issendfree||options.istime?1:0;\r\n            this.setData({params: options, isfilter: isfilter, filterBtns: options, fromsearch: options.fromsearch||false});\r\n        }\r\n        this.initCategory();\r\n        if(!options.fromsearch){\r\n            this.getList();\r\n        }\r\n        this.getRecord();\r\n       \r\n    },\r\n    onShow: function(){\r\n        if(this.data.fromsearch){\r\n            this.setFocus();\r\n        }\r\n        var $this = this;\r\n        wx.getSetting({\r\n    \t  success: function(res) {\r\n    \t    var limits = res.authSetting['scope.userInfo'];\r\n    \t    $this.setData({limits: limits})\t\r\n    \t  }\r\n        })\r\n    },\r\n    onReachBottom:function(){\r\n        if(this.data.loaded || this.data.list.length==this.data.total){\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    initCategory:function(){\r\n        var $this = this;\r\n        core.get('goods/get_category', {} ,function(result){\r\n            $this.setData({\r\n                allcategory: result.allcategory,\r\n                category_parent: result.allcategory.parent,\r\n                category_child:[],\r\n                category_third:[],\r\n                catlevel:result.catlevel,\r\n                opencategory: result.opencategory,\r\n                show: true\r\n            });\r\n        });\r\n    },\r\n    getList: function(){\r\n        var $this = this;\r\n        $this.setData({loading:true});\r\n        $this.data.params.page = $this.data.page;\r\n        core.get('goods/get_list', $this.data.params ,function(result){\r\n        \r\n          var data = { loading: false, count: result.total,show: true};\r\n            if(!result.list){\r\n                result.list = [];\r\n            }\r\n            if(result.list.length>0){\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    changeMode:function(){\r\n        if(this.data.listmode=='block'){\r\n            this.setData({listmode:''});\r\n        } else{\r\n            this.setData({listmode:'block'})\r\n        }\r\n    },\r\n    bindSort:function(e){\r\n        var order =  e.currentTarget.dataset.order;\r\n        var params = this.data.params;\r\n        if (order == '') {\r\n            if (params.order == order) {\r\n                return\r\n            }\r\n            params.order = '';\r\n            this.setData({listorder:''});\r\n        } else if (order == 'minprice') {\r\n            this.setData({listorder:''});\r\n            if (params.order == order) {\r\n                if (params.by == 'desc') {\r\n                    params.by = 'asc';\r\n                } else {\r\n                    params.by = 'desc';\r\n                }\r\n            } else {\r\n                params.by = 'asc';\r\n            }\r\n            params.order = order;\r\n            this.setData({listorder: params.by});\r\n        } else if (order == 'sales') {\r\n            if (params.order == order) {\r\n                return;\r\n            }\r\n            this.setData({listorder:''});\r\n            //params = this.data.defaults;\r\n            params.order = 'sales';\r\n            params.by = 'desc';\r\n        }\r\n        this.setData({\r\n            params:params,\r\n            page:1,\r\n            list:[],\r\n            loading:true,\r\n            loaded:false,\r\n            sort_selected: order\r\n        });\r\n        this.getList();\r\n    },\r\n    showFilter:function(){\r\n        this.setData({ isFilterShow: this.data.isFilterShow ? false: true });\r\n    },\r\n    btnFilterBtns:function(e){\r\n        var type = e.target.dataset.type;\r\n        if(!type){\r\n            return;\r\n        }\r\n        var filterBtns  = this.data.filterBtns;\r\n        if( !filterBtns.hasOwnProperty(type)){\r\n            filterBtns[type] = '';\r\n        }\r\n        if(filterBtns[type]){\r\n            delete filterBtns[type];\r\n        }else{\r\n            filterBtns[type] = 1;\r\n        }\r\n        var isfilter = $.isEmptyObject(filterBtns)?0:1;\r\n        this.setData({\r\n            filterBtns: filterBtns,\r\n            isfilter: isfilter\r\n        });\r\n    },\r\n    bindFilterCancel:function(){\r\n        this.data.defaults.cate = '';\r\n        var params = this.data.defaults;\r\n        this.setData({\r\n            page:1,\r\n            params:params,\r\n            isFilterShow:false,\r\n            lastcat:'',\r\n            cateogry_parent_selected:'',\r\n            category_child_selected:'',\r\n            category_third_selected:'',\r\n            category_child:[],\r\n            category_third:[],\r\n            filterBtns:{},\r\n            loading:true,\r\n            loaded:false,\r\n            listorder:'',\r\n            list: []\r\n        });\r\n        this.getList();\r\n    },\r\n    bindFilterSubmit:function(){\r\n        var params = this.data.params;\r\n        var filterBtns  = this.data.filterBtns;\r\n        for(var i in filterBtns){\r\n            params[i] = filterBtns[i];\r\n        }\r\n        if($.isEmptyObject(filterBtns)){\r\n            params = this.data.defaults;\r\n        }\r\n        params.cate = this.data.lastcat;\r\n        this.setData({\r\n            page:1,\r\n            params:params,\r\n            isFilterShow:false,\r\n            filterBtns: filterBtns ,\r\n            list:[],\r\n            loading:true,\r\n            loaded:false\r\n        });\r\n        this.getList();\r\n    },\r\n    bindCategoryEvents:function(e){\r\n        var lastcat = e.target.dataset.id;\r\n        this.setData({\r\n           lastcat: lastcat \r\n        });\r\n        var level =e.target.dataset.level; \r\n        if(level==1){\r\n            this.setData({\r\n                category_child:[],\r\n                category_third:[]\r\n            });\r\n           this.setData({\r\n            category_parent_selected: lastcat,\r\n            category_child:this.data.allcategory['children'][lastcat]\r\n           });\r\n        }else if(level==2){\r\n             this.setData({\r\n                category_third:[]\r\n            });\r\n            this.setData({\r\n                category_child_selected: lastcat,\r\n                category_third:this.data.allcategory['children'][lastcat]\r\n            });\r\n        } else{       \r\n            this.setData({\r\n                category_third_selected: lastcat,\r\n            });\r\n        }   \r\n    },\r\n    bindSearch:function(e){\r\n        var input = e.target;\r\n        this.setData({list:[],loading:true,loaded:false});\r\n        var value = $.trim(e.detail.value);\r\n        var params = this.data.defaults;\r\n        if( value!= '') {\r\n            params.keywords = value;\r\n            this.setData({\r\n                page:1,\r\n                params:params,\r\n                fromsearch: false\r\n            })\r\n            this.getList();\r\n            this.setRecord(value);\r\n        }else{\r\n            params.keywords = '';\r\n            this.setData({\r\n                page:1,\r\n                params:params,\r\n                listorder:'',\r\n                fromsearch: false\r\n            });\r\n            this.getList();\r\n        }\r\n     },\r\n     bindInput:function(e){\r\n         var value = $.trim(e.detail.value);\r\n         var params = this.data.defaults;\r\n         params.keywords = '';\r\n         params.order = this.data.params.order;\r\n         params.by = this.data.params.by;\r\n         if (value == '') {\r\n             this.setData({\r\n                 page: 1,\r\n                 list: [],\r\n                 loading: true,\r\n                 loaded: false,\r\n                 params: params,\r\n                 listorder: params.by,\r\n                 fromsearch: true\r\n             })\r\n             //this.getList();\r\n             this.getRecord();\r\n         }\r\n    },\r\n    bindFocus: function (e) {\r\n        var value = $.trim(e.detail.value);\r\n        if(value==''){\r\n            this.setData({\r\n                fromsearch: true\r\n            });\r\n        }\r\n    },\r\n    bindback: function () {\r\n        wx.navigateBack();\r\n    },\r\n    bindnav: function (e) {\r\n        var text = $.trim(e.currentTarget.dataset.text);\r\n        var params = this.data.defaults;\r\n        params.keywords = text;\r\n        this.setData({params: params, page: 1, fromsearch: false});\r\n        this.getList();\r\n        this.setRecord(text);\r\n    },\r\n    getRecord: function () {\r\n        var records = app.getCache(\"searchRecords\");\r\n        this.setData({searchRecords: records});\r\n    },\r\n    setRecord: function (value) {\r\n        if (value!=''){\r\n            var records = app.getCache(\"searchRecords\");\r\n            if(!$.isArray(records)){\r\n                records = [];\r\n                records.push(value);\r\n            }else{\r\n                var newArr = [];\r\n                newArr.push(value);\r\n                for (var i in records){\r\n                    if(newArr.length>20){\r\n                        break;\r\n                    }\r\n                    if(records[i]==value || records==null || records=='null'){\r\n                        continue;\r\n                    }else{\r\n                        newArr.push(records[i]);\r\n                    }\r\n                }\r\n                records = newArr;\r\n            }\r\n            app.setCache(\"searchRecords\", records);\r\n        }else{\r\n            app.setCache(\"searchRecords\", []);\r\n        }\r\n        this.getRecord();\r\n    },\r\n    delRecord: function () {\r\n        this.setRecord('');\r\n        this.setData({fromsearch: true});\r\n    },\r\n    setFocus: function(){\r\n        var $this = this;\r\n        setTimeout(function(){\r\n            $this.setData({focusin: true})\r\n        }, 1000);\r\n    },\r\n    // 购买picker\r\n    selectPicker:function(e){\r\n      app.checkAuth();\r\n      var $this = this;\r\n      \r\n      // if(!$this.data.limits){\r\n      // \t$this.setData({modelShow: true})\r\n      // \treturn\r\n      // }\r\n      \r\n      var goodslist = 'goodslist';\r\n      goodspicker.selectpicker(e,$this,goodslist)\r\n    },\r\n    // 选规格\r\n    specsTap:function(event){\r\n      var $this = this\r\n      goodspicker.specsTap(event, $this)\r\n    },\r\n  // 选赠品\r\n  chooseGift(e) {\r\n    goodspicker.chooseGift(e, this)\r\n  },\r\n    //关闭pickerpicker\r\n    emptyActive: function () {\r\n      this.setData({\r\n        active: '', slider: 'out', tempname: '',specsTitle:''\r\n      });\r\n    },\r\n    // 立即购买\r\n    buyNow: function (event){\r\n      var $this = this\r\n      goodspicker.buyNow(event, $this)\r\n    },\r\n    //加入购物车\r\n    getCart: function (event){\r\n      var $this = this\r\n      goodspicker.getCart(event, $this)\r\n    },\r\n    select:function(){\r\n      var $this = this\r\n      goodspicker.select($this)\r\n    },\r\n    //数量输入绑定事件\r\n    inputNumber: function (e){\r\n      var $this = this\r\n      goodspicker.inputNumber(e,$this)\r\n    },\r\n    number:function(e){\r\n      var $this = this\r\n      goodspicker.number(e, $this)\r\n    },\r\n    onChange: function (e) {\r\n      return diyform.onChange(this, e)\r\n    },\r\n    DiyFormHandler: function (e) {\r\n      return diyform.DiyFormHandler(this, e)\r\n    },\r\n    selectArea: function (e) {\r\n      return diyform.selectArea(this, e)\r\n    },\r\n    bindChange: function (e) {\r\n      return diyform.bindChange(this, e)\r\n    },\r\n    onCancel: function (e) {\r\n      return diyform.onCancel(this, e)\r\n    },\r\n    onConfirm: function (e) {\r\n      return diyform.onConfirm(this, e)\r\n    },\r\n    getIndex: function (str, areas) {\r\n      return diyform.getIndex(str, areas)\r\n    },\r\n    \r\n     /*用户授权-取消*/\r\n    cancelclick:  function(){\r\n   \t  this.setData({modelShow: false})\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      this.setData({modelShow: false})\r\n      wx.openSetting({\r\n    \tsuccess: function(res) {}\r\n      })\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-02-10\r\n * @author 咖啡\r\n *\r\n * \r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n    data:{\r\n        region:[],        \r\n    },\r\n    onLoad:function(options){\r\n        var $this = this;\r\n        var region = options.region;\r\n        var onlysent = options.onlysent;\r\n        $this.setData({ region: region, onlysent: onlysent});\r\n    }\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-04\r\n * @author 咖啡\r\n *\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar $ = app.requirejs('jquery');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar hasOption = 0;\r\nvar selectdate=app.requirejs('biz/selectdate');\r\nPage({\r\n  data: {\r\n    diypages: {},\r\n    usediypage:false,\r\n    specs: [],\r\n    options: [],\r\n    icons: app.requirejs('icons'),\r\n    goods: {},\r\n    indicatorDots: true,\r\n    autoplay: true,\r\n    interval: 5000,\r\n    duration: 500,\r\n    circular: true,\r\n    play: \"/static/images/video_play.png\",\r\n    mute: \"/static/images/icon/mute.png\",\r\n    voice: \"/static/images/icon/voice.png\",\r\n    //pick\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    info: 'active',\r\n    preselltimeend: '',\r\n    presellsendstatrttime: '',\r\n    advWidth: 0,\r\n    dispatchpriceObj: 0,\r\n    now: parseInt(Date.now() / 1000),\r\n    day: 0,\r\n    hour: 0,\r\n    minute: 0,\r\n    second: 0,\r\n    timer: 0,\r\n    discountTitle: '',\r\n    istime: 1,\r\n    istimeTitle: '',\r\n    isSelected: false,\r\n    params: {},\r\n    total: 1,\r\n    optionid: 0,\r\n    audios: {},\r\n    audiosObj: {},\r\n    defaults: {\r\n      id: 0,\r\n      merchid: 0\r\n    },\r\n    buyType: '',\r\n    pickerOption: {},\r\n    specsData: [],\r\n    specsTitle: '',\r\n    canBuy: '',\r\n    diyform: {},\r\n    showPicker: false,\r\n    showcoupon: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],\r\n    noArea: true,\r\n    commentObj: {},\r\n    commentObjTab: 1,\r\n    loading: false,\r\n    commentEmpty: false,\r\n    commentPage: 1,\r\n      commentTotal: 1,\r\n    commentLevel: 'all',\r\n    commentList: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n    animationData: {},\r\n    uid: '',\r\n    stararr: ['all', 'good', 'normal', 'bad', 'pic'],\r\n    nav_mask: false,\r\n    nav_mask2: false,\r\n    nav: 0,\r\n    giftid: '',\r\n    limits: true,\r\n    modelShow: false,\r\n    showgoods: true,\r\n\r\n      //秒杀\r\n      timer:0,\r\n      lasttime: 0,\r\n      hour: '-',\r\n      min: '-',\r\n      sec: '-',\r\n\r\n    // 以下 周期购\r\n    currentDate: \"\",\r\n    dayList: '',\r\n    currentDayList: '',\r\n    currentObj: '',\r\n    currentDay: '',\r\n    checkedDate:'',\r\n    showDate:'',\r\n    scope: '',\r\n    goods_hint_show:false,\r\n    presellisstart:0,\r\n    advHeight: 1,\r\n    show_goods: true\r\n  },\r\n\r\n  //商品详情轮播图按照第一张图片显示\r\n  imageLoad: function (e) {\r\n    let h = e.detail.height,\r\n      w = e.detail.width,\r\n      height = Math.floor((750 * h) / w);\r\n    if (h == w) {\r\n      this.setData({ advHeight: 750 })\r\n    } else {\r\n      this.setData({ advHeight: height })\r\n    }\r\n  },\r\n\r\n  favorite: function (event) {\r\n    app.checkAuth();\r\n    var $this = this;\r\n    var limits = $this.data.limits;\r\n    if (limits) {\r\n      var isfavorite = event.currentTarget.dataset.isfavorite ? 0 : 1;\r\n      core.get('member/favorite/toggle', { 'id': $this.data.options.id, 'isfavorite': isfavorite }, function (ret) {\r\n        if (ret.isfavorite) {\r\n          $this.setData({ 'goods.isfavorite': 1 });\r\n        } else {\r\n          $this.setData({ 'goods.isfavorite': 0 });\r\n        }\r\n      })\r\n\r\n    } else {\r\n      // this.setData({ modelShow: true })\r\n    }\r\n  },\r\n  /*购物车*/\r\n  // menucart: function () {\r\n  //   var $this = this;\r\n  //   var limits = $this.data.limits;\r\n  //   if (limits) {\r\n  //     wx.switchTab({\r\n  //       url: '/pages/member/cart/index'\r\n  //     })\r\n  //   } else {\r\n  //     this.setData({ modelShow: true })\r\n  //   }\r\n  // },\r\n  /*tab切换 */\r\n  goodsTab: function (event) {\r\n    var $this = this, tap = event.currentTarget.dataset.tap;\r\n    if (tap == 'info') {\r\n      this.setData({ info: 'active', para: '', comment: '' });\r\n    } else if (tap == 'para') {\r\n      this.setData({ info: '', para: 'active', comment: '' });\r\n    } else if (tap == 'comment') {\r\n      $this.setData({ info: '', para: '', comment: 'active' });\r\n      if ($this.data.commentList.length > 0) {\r\n        $this.setData({ loading: false });\r\n        return;\r\n      } else {\r\n        $this.setData({ loading: true });\r\n      }\r\n      core.get('goods/get_comment_list', {\r\n        'id': $this.data.options.id,\r\n        'level': $this.data.commentLevel,\r\n        'page': $this.data.commentPage\r\n      }, function (retlist) {\r\n        if (retlist.list.length > 0) {\r\n         // $this.setData({ loading: false, commentList: retlist.list, commentPage: retlist.page });\r\n            $this.setData({ loading: false, commentList: retlist.list, commentTotal: retlist.total,commentPage: retlist.page  });\r\n        } else {\r\n          $this.setData({ loading: false, commentEmpty: true });\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  //上拉加载下一页评论\r\n  onReachBottom: function () {\r\n    var $this = this;\r\n    if($this.data.commentTotal<=10)\r\n    {\r\n        return  false;\r\n    }\r\n    var commentType = $this.data.commentObjTab;\r\n    var objType = '';\r\n    if (commentType == 1) {\r\n      objType = 'all';\r\n    } else if (commentType == 2) {\r\n      objType = 'good';\r\n    } else if (commentType == 3) {\r\n      objType = 'normal';\r\n    } else if (commentType == 4) {\r\n      objType = 'bad';\r\n    } else if (commentType == 5) {\r\n      objType = 'pic';\r\n    }\r\n    $this.setData({ loading: true });\r\n    // var commentPage = $this.data.commentPage;\r\n    // if (commentPage == 1) {\r\n    //   commentPage = 2;\r\n    // }\r\n    core.get('goods/get_comment_list', {\r\n      'id': $this.data.options.id,\r\n      'level': objType,\r\n      'page': $this.data.commentPage\r\n    }, function (list) {\r\n      if (list.error == 0) {\r\n        $this.setData({ loading: false });\r\n        if (list.list.length > 0) {\r\n          $this.setData({\r\n            commentPage: $this.data.commentPage + 1,\r\n              commentTotal: list.total,\r\n            commentList: $this.data.commentList.concat(list.list)\r\n          });\r\n        }\r\n      }\r\n    });\r\n  },\r\n  //评价列表事件\r\n  comentTap: function (e) {\r\n    var $this = this;\r\n    var commentType = e.currentTarget.dataset.type;\r\n    var objType = '';\r\n    if (commentType == 1) {\r\n      objType = 'all';\r\n        $this.data.commentPage=1;\r\n    } else if (commentType == 2) {\r\n        $this.data.commentPage=1;\r\n      objType = 'good';\r\n    } else if (commentType == 3) {\r\n        $this.data.commentPage=1;\r\n      objType = 'normal';\r\n    } else if (commentType == 4) {\r\n        $this.data.commentPage=1;\r\n      objType = 'bad';\r\n    } else if (commentType == 5) {\r\n        $this.data.commentPage=1;\r\n      objType = 'pic';\r\n    }\r\n    if (commentType != $this.data.commentObjTab) {\r\n      //评价列表\r\n      core.get('goods/get_comment_list', {\r\n        'id': $this.data.options.id,\r\n        'level': objType,\r\n        'page': $this.data.commentPage\r\n      }, function (retlist) {\r\n        if (retlist.list.length > 0) {\r\n          $this.setData({\r\n            loading: false,\r\n            commentList: retlist.list,\r\n              commentTotal: retlist.total,\r\n            commentPage: retlist.page,\r\n            commentObjTab: commentType,\r\n            commentEmpty: false\r\n          });\r\n        }\r\n        // else {\r\n        //   $this.setData({\r\n        //     loading: false,\r\n        //     commentList: retlist.list,\r\n        //     commentPage: 1,\r\n        //     commentObjTab: commentType,\r\n        //     commentEmpty: true\r\n        //   });\r\n        // }\r\n      })\r\n    } else {\r\n      return;\r\n    }\r\n  },\r\n  // 评价图片点击预览\r\n  preview: function(e) {\r\n    wx.previewImage({\r\n      current: e.currentTarget.dataset.src, // 当前显示图片的http链接\r\n      urls: e.currentTarget.dataset.urls // 需要预览的图片http链接列表\r\n    })\r\n  },\r\n  /* 获取商品详情 */\r\n  getDetail: function (options) {\r\n    var $this = this;\r\n\r\n    var nowTime = parseInt(Date.now() / 1000);\r\n    \r\n    $this.setData({ loading: true });\r\n    core.get('goods/get_detail', { id: options.id }, function (result) {\r\n      if (result.error != 0) {\r\n        $this.setData({ show: true, showgoods: false });\r\n        foxui.toast($this, result.message);\r\n        setTimeout(function () {\r\n          wx.navigateBack();\r\n        }, 1500);\r\n        return;\r\n      }\r\n      // 需要强转为浮点型的数据\r\n      const needForceConvertToFloatData = ['marketprice', 'productprice']\r\n      // 处理价格比较的时候带有比较的不是浮点数，而是两个字符串出错的情况\r\n      needForceConvertToFloatData.forEach((value) => {\r\n        if(typeof result.goods[value] != 'undefined') {\r\n          result.goods[value] = parseFloat(result.goods[value])\r\n        }\r\n      })\r\n\r\n      var coupon = result.goods.coupons;\r\n      var MaxHeight = result.goods.thumbMaxHeight;\r\n      var MaxWidth = result.goods.thumbMaxWidth;\r\n      var ratio = MaxWidth / MaxHeight;\r\n\r\n      //轮播适配高度\r\n      // wx.getSystemInfo({\r\n      //   success: function (result) {\r\n      //     var advHeight = result.windowWidth / ratio;\r\n      //     $this.setData({\r\n      //       advWidth: result.windowWidth,\r\n      //       advHeight: advHeight\r\n      //     });\r\n      //   }\r\n      // });\r\n\r\n      $this.setData({\r\n        coupon: coupon,\r\n        coupon_l: coupon.length,\r\n        packagegoods: result.goods.packagegoods,\r\n        packagegoodsid: result.goods.packagegoods.goodsid || 0,\r\n        credittext: result.goods.credittext,\r\n        activity: result.goods.activity,\r\n        bottomFixedImageUrls: result.goods.bottomFixedImageUrls, //底部固定信息\r\n        phonenumber: result.goods.phonenumber || '',\r\n        showDate: result.goods.showDate || '',\r\n        scope: result.goods.scope || '',\r\n        show_goods: result.goods.show_goods\r\n      })\r\n      if (result.goods.packagegoods) {\r\n        $this.package();\r\n      }\r\n      parser.wxParse('wxParseData', 'html', result.goods.content, $this, '0');\r\n      parser.wxParse('wxParseData_buycontent', 'html', result.goods.buycontent, $this, '0');\r\n      $this.setData({\r\n        show: true, goods: result.goods, minprice: result.goods.minprice, maxprice: result.goods.maxprice, preselltimeend: result.goods.preselltimeend, style: result.goods.labelstyle.style || '', navbar: result.goods.navbar, labels: result.goods.labels\r\n      });\r\n\r\n      if (result.goods.gifts && result.goods.gifts.length == 1) {\r\n        $this.setData({ giftid: result.goods.gifts[0].id })\r\n      }\r\n   \r\n      wx.setNavigationBarTitle({\r\n        title: result.goods.title || '商品详情'\r\n      });\r\n      hasOption = result.goods.hasoption;\r\n      if ($.isEmptyObject(result.goods.dispatchprice) || typeof (result.goods.dispatchprice) == 'string') {\r\n        $this.setData({ dispatchpriceObj: 0 });\r\n      } else {\r\n        $this.setData({ dispatchpriceObj: 1 });\r\n      }\r\n      /*促销start*/\r\n      if (result.goods.isdiscount > 0 && result.goods.isdiscount_time >= nowTime) {\r\n        clearInterval($this.data.timer);\r\n        var timer = setInterval(function () {\r\n          $this.countDown(0, result.goods.isdiscount_time);\r\n        }, 1000);\r\n        $this.setData({ timer: timer });\r\n      } else {\r\n        $this.setData({ discountTitle: '活动已结束' });\r\n      }\r\n      /*促销end*/\r\n      /*限时购 start*/\r\n      if (result.goods.istime > 0) {\r\n        clearInterval($this.data.timer);\r\n        var timer = setInterval(function () {\r\n          $this.countDown(result.goods.timestart, result.goods.timeend, 'istime');\r\n        }, 1000);\r\n        $this.setData({ timer: timer });\r\n      }\r\n      /*限时购 end*/\r\n      /*预售 start*/\r\n      if (result.goods.ispresell > 0) {\r\n        var timer = setInterval(function () {\r\n          if (result.goods.canbuy == 0){\r\n            $this.countDown(nowTime, result.goods.preselltimestart, 'istime');\r\n          } else if (result.goods.canbuy == 1){\r\n            $this.countDown(nowTime, result.goods.preselltimeend, 'istime');\r\n          }\r\n        }, 1000);\r\n        $this.setData({ timer: timer, presellisstart: result.goods.presellisstart });\r\n        $this.setData({\r\n          preselltimeend: result.goods.preselltimeend || result.goods.preselltimeend.getMonth() + '月' + result.goods.preselltimeend || result.goods.preselltimeend.getDate() + '日 ' + result.goods.preselltimeend || result.goods.preselltimeend.getHours() + ':' + result.goods.preselltimeend || result.goods.preselltimeend.getMinutes() + ':' + result.goods.preselltimeend || result.goods.preselltimeend.getSeconds(),\r\n          presellsendstatrttime: result.goods.presellsendstatrttime || result.goods.presellsendstatrttime.getMonth() + '月' + result.goods.presellsendstatrttime || result.goods.presellsendstatrttime.getDate() + '日',\r\n        });\r\n      }\r\n      /*预售 end*/\r\n      /*评价start*/\r\n      if (result.goods.getComments > 0) {\r\n        core.get('goods/get_comments', { 'id': $this.data.options.id }, function (ret) {\r\n          $this.setData({\r\n            commentObj: ret,\r\n          });\r\n        })\r\n      }\r\n      /*评价end*/\r\n      /*全返*/\r\n      if (result.goods.fullbackgoods) {\r\n        $this.setData({ fullbackgoods: result.goods.fullbackgoods })\r\n      }\r\n\r\n      var fullbackgoods = $this.data.fullbackgoods;\r\n      if (fullbackgoods != undefined) {\r\n       \r\n        var maxfullbackratio = fullbackgoods.maxfullbackratio;\r\n        var maxallfullbackallratio = fullbackgoods.maxallfullbackallratio;\r\n        var maxfullbackratio = Math.round(maxfullbackratio);\r\n        var maxallfullbackallratio = Math.round(maxallfullbackallratio);\r\n        $this.setData({ maxfullbackratio: maxfullbackratio, maxallfullbackallratio: maxallfullbackallratio });\r\n      }\r\n\r\n      if(result.goods.type == 9){\r\n        $this.setData({ checkedDate: result.goods.nowDate});\r\n        $this.show_cycelbuydate();\r\n      }\r\n\r\n      if(result.goods.seckillinfo){\r\n          $this.initSeckill(result.goods);\r\n      }\r\n     \r\n    });\r\n  },\r\n\r\n    //秒杀时间初始化\r\n    initSeckill:function (goods){\r\n        var $this = this;\r\n        var status = parseInt(goods.seckillinfo.status);\r\n        var starttime = goods.seckillinfo.starttime;\r\n        var endtime = goods.seckillinfo.endtime;\r\n        if (status != -1) {\r\n            var lasttime = 0;\r\n            var timer = 0;\r\n            var approot=app.globalData.approot;\r\n            wx.request({url:approot+'map.json',\r\n                success: function(x) {\r\n                    var currenttime = new Date(x.header.Date) / 1000;\r\n                    if (status == 0) {\r\n                        lasttime = endtime - currenttime;\r\n                    } else {\r\n                        lasttime = starttime - currenttime;\r\n                    }\r\n                    $this.setData({lasttime: lasttime});\r\n                    clearInterval($this.data.timer);\r\n                    $this.setTimer(goods.seckillinfo);\r\n                    timer = $this.setTimerInterval(goods.seckillinfo);\r\n\r\n                    $this.setData({timer: timer});\r\n                }\r\n            })\r\n        }\r\n\r\n    },\r\n    setTimer: function (seckillinfo) {\r\n        var $this = this;\r\n        var lasttime=0;\r\n\r\n        //每十秒请求一次服务器，获取时间\r\n        if (seckillinfo.status != -1) {\r\n            if (parseInt($this.data.lasttime) % 10 == 0) {\r\n                var status = parseInt(seckillinfo.status);\r\n                var starttime = seckillinfo.starttime;\r\n                var endtime = seckillinfo.endtime;\r\n                if (status != -1) {\r\n                    var approot = app.globalData.approot;\r\n                    wx.request({\r\n                        url: approot + 'map.json',\r\n                        success: function (x) {\r\n                            var currenttime = new Date(x.header.Date) / 1000;\r\n                            if (status == 0) {\r\n                                lasttime = endtime - currenttime;\r\n                            } else {\r\n                                lasttime = starttime - currenttime;\r\n                            }\r\n                            $this.setData({lasttime: lasttime});\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        lasttime = parseInt($this.data.lasttime) - 1;\r\n        var times = $this.formatSeconds(lasttime);\r\n        $this.setData({lasttime: lasttime, hour: times.hour, min: times.min, sec: times.sec});\r\n        if (lasttime <= 0) {\r\n            $this.onLoad();\r\n        }\r\n    },\r\n    setTimerInterval: function (seckillinfo) {\r\n        var $this = this;\r\n        return setInterval(function () {\r\n            $this.setTimer(seckillinfo);\r\n        }, 1000);\r\n    },\r\n    formatSeconds: function (value) {\r\n        var theTime = parseInt(value);\r\n        var theTime1 = 0;\r\n        var theTime2 = 0;\r\n        if (theTime > 60) {\r\n            theTime1 = parseInt(theTime / 60);\r\n            theTime = parseInt(theTime % 60);\r\n            if (theTime1 > 60) {\r\n                theTime2 = parseInt(theTime1 / 60);\r\n                theTime1 = parseInt(theTime1 % 60)\r\n            }\r\n        }\r\n        return {\r\n            'hour': theTime2 < 10 ? '0' + theTime2 : theTime2,\r\n            'min': theTime1 < 10 ? '0' + theTime1 : theTime1,\r\n            'sec': theTime < 10 ? '0' + theTime : theTime\r\n        }\r\n    },\r\n\r\n  /*倒计时js start\r\n   timestart----开始时间\r\n   timeend----结束时间\r\n   type-------类型\r\n   */\r\n  countDown: function (timestart, timeend, type) {\r\n    var now = parseInt(Date.now() / 1000);\r\n    var endDate = timestart > now ? timestart : timeend;\r\n    var leftTime = endDate - now;\r\n    var leftsecond = parseInt(leftTime);\r\n    var day = Math.floor(leftsecond / (60 * 60 * 24));\r\n    var hour = Math.floor((leftsecond - day * 24 * 60 * 60) / 3600);\r\n    var minute = Math.floor((leftsecond - day * 24 * 60 * 60 - hour * 3600) / 60);\r\n    var second = Math.floor(leftsecond - day * 24 * 60 * 60 - hour * 3600 - minute * 60);\r\n    var time = [day, hour, minute, second]\r\n    this.setData({\r\n      time: time\r\n    });\r\n    if (type = 'istime') {\r\n      var istimeTitle = '';\r\n      if (timestart > now) {\r\n        istimeTitle = '距离限时购开始';\r\n      } else if (timestart <= now && timeend > now) {\r\n        istimeTitle = '距离限时购结束';\r\n      } else {\r\n        istimeTitle = '活动已经结束，下次早点来~';\r\n        this.setData({ istime: 0 });\r\n      }\r\n      this.setData({ istimeTitle: istimeTitle });\r\n    }\r\n  },\r\n  //不配送区域picker\r\n  cityPicker: function (event) {\r\n    var $this = this;\r\n    var active = event.currentTarget.dataset.tap;\r\n    wx.navigateTo({\r\n      url: '/pages/goods/region/index?id=' + $this.data.goods.id + '&region=' + $this.data.goods.citys.citys + '&onlysent=' + $this.data.goods.citys.onlysent,\r\n    });\r\n  },\r\n  //赠品弹层\r\n  giftPicker: function () {\r\n    this.setData({\r\n      active: 'active',\r\n      gift: true\r\n    })\r\n  },\r\n  //优惠券picker\r\n  couponPicker: function () {\r\n    this.setData({\r\n      active: 'active',\r\n      showcoupon: true\r\n    })\r\n  },\r\n  couponrecived: function (e) {\r\n    var id = e.currentTarget.dataset.id\r\n    var $this = this\r\n    core.post('goods.pay_coupon', { id: id }, function (result) {\r\n     \r\n      if (result.error == 0) {\r\n        $this.setData({\r\n          showcoupon: false,\r\n          active: ''\r\n        })\r\n        foxui.toast($this, \"已领取\");\r\n      } else {\r\n        foxui.toast($this, result.message);\r\n      }\r\n    });\r\n  },\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    app.checkAuth();\r\n    var $this = this;\r\n    var timeType = e.currentTarget.dataset.time;\r\n    var timeOut = e.currentTarget.dataset.timeout;\r\n    var limits = $this.data.limits;\r\n    if (!limits) {\r\n      // $this.setData({ modelShow: true })\r\n      return\r\n    }\r\n   \r\n    if (timeType == 'timeout' || timeType == 'access_time'){\r\n      if (timeOut == 'false'){\r\n        $this.setData({ goods_hint_show: true });\r\n        return;\r\n      } else if (timeOut == 'true'){\r\n        if (timeType == 'access_time') {\r\n          $this.setData({ goods_hint_show: false });\r\n          var goodslist = 'goodsdetail';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          return;\r\n        }\r\n        if (timeType == 'timeout') {\r\n          $this.setData({ goods_hint_show: false });\r\n          return;\r\n        }\r\n      }\r\n    }\r\n   \r\n    var goodslist = 'goodsdetail';\r\n    goodspicker.selectpicker(e, $this, goodslist)\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', showcoupon: false, gift: false, cycledate: false\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this, \"goods_detail\")\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this;\r\n    var optionid = $this.data.optionid;\r\n    var diydata = $this.data.diyform;\r\n    //是否有规格\r\n    if (hasOption > 0 && optionid == 0) {\r\n      foxui.toast($this, \"请选择规格\");\r\n      return;\r\n    }\r\n    this.setData({ active: '', slider: 'out', isSelected: true, tempname: '' });\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    $this.setData({\r\n      imgUrl: app.globalData.approot\r\n    });\r\n    core.get('black', {}, function (res) {\r\n      if (res.isblack) {\r\n        wx.showModal({\r\n          title: '无法访问',\r\n          content: '您在商城的黑名单中，无权访问！',\r\n          success: function (res) {\r\n            if (res.confirm) {\r\n              this.close()\r\n            }\r\n            if (res.cancel) {\r\n              this.close()\r\n            }\r\n          }\r\n        })\r\n      }\r\n    });\r\n\r\n    diypage.get(this, 'goodsdetail', function (res) {\r\n      var diypage = res.diypage.items;\r\n      for (var i in diypage){\r\n        if (diypage[i].id == 'copyright' ){\r\n          $this.setData({ copyright: diypage[i]})\r\n        }\r\n      }\r\n\r\n    });\r\n    options = options || {};\r\n    // 处理扫码scene\r\n    var scene = decodeURIComponent(options.scene);\r\n    if (!options.id && scene) {\r\n      var sceneObj = core.str2Obj(scene);\r\n      options.id = sceneObj.id;\r\n      if (sceneObj.mid) {\r\n        options.mid = sceneObj.mid;\r\n      }\r\n    }\r\n    this.setData({ id: options.id });\r\n    app.url(options);\r\n   \r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.getDetail(options);\r\n    $this.setData({\r\n      uid: options.id,\r\n      options: options,\r\n      success: true,\r\n      cover: true,\r\n      showvideo: true\r\n    });\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          advWidth: result.windowWidth\r\n        });\r\n      }\r\n    });\r\n    setTimeout(function () {\r\n      $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n    }, 3000)\r\n  },\r\n\r\n  show_cycelbuydate: function () {\r\n    var $this = this;\r\n    /*周期购时间选择器初始化*/\r\n    var currentObj = selectdate.getCurrentDayString(this, $this.data.showDate);\r\n    var week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n    $this.setData({\r\n      currentObj: currentObj,\r\n      currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate() + '日 ' + week[currentObj.getDay()],\r\n      currentYear: currentObj.getFullYear(),\r\n      currentMonth: (currentObj.getMonth() + 1),\r\n      currentDay: currentObj.getDate(),\r\n      initDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      checkedDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      maxday: $this.data.scope,//可选的天数\r\n    })\r\n  },\r\n  \r\n  package: function () {\r\n    var $this = this;\r\n    core.get('package.get_list', { goodsid: this.data.packagegoodsid }, function (result) {\r\n     \r\n      $this.setData({\r\n        packageList: result.list[0]\r\n      })\r\n    });\r\n  },\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    wx.getStorage({\r\n      key: 'mydata',\r\n      success: function (res) {\r\n        wx.removeStorage({\r\n          key: 'mydata',\r\n          success: function (res) {\r\n          }\r\n        })\r\n        $this.getDetail(res.data);\r\n        wx.pageScrollTo({\r\n          scrollTop: 0\r\n        })\r\n      }\r\n    })\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n  onShareAppMessage: function () {\r\n    this.setData({ closeBtn: false });\r\n    return core.onShareAppMessage('/pages/goods/detail/index?id=' + this.data.options.id, this.data.goods.title);\r\n  },\r\n  showpic: function () {\r\n    this.setData({\r\n      showpic: true,\r\n      cover: false,\r\n      showvideo: false\r\n    });\r\n    this.videoContext = wx.createVideoContext('myVideo');\r\n    this.videoContext.pause()\r\n  },\r\n  showvideo: function () {\r\n    this.setData({\r\n      showpic: false,\r\n      showvideo: true\r\n    });\r\n    this.videoContext = wx.createVideoContext('myVideo');\r\n    this.videoContext.play()\r\n  },\r\n  startplay: function () {\r\n    this.setData({\r\n      cover: false\r\n    });\r\n    this.videoContext = wx.createVideoContext('myVideo');\r\n    this.videoContext.play()\r\n  },\r\n  bindfullscreenchange: function (e) {\r\n    if (e.detail.fullScreen == true) {\r\n      this.setData({\r\n        success: false,\r\n      });\r\n    } else {\r\n      this.setData({\r\n        success: true,\r\n      });\r\n    }\r\n  },\r\n  phone: function () {\r\n    var phoneNumber = this.data.phonenumber + ''\r\n    wx.makePhoneCall({\r\n      phoneNumber: phoneNumber\r\n    })\r\n  },\r\n  /*分享生成海报*/\r\n  sharePoster: function () {\r\n    wx.navigateTo({\r\n      url: '/pages/goods/poster/poster?id=' + this.data.uid\r\n    })\r\n  },\r\n  /*分享弹层上的关闭*/\r\n  closeBtn: function () {\r\n    this.setData({ closeBtn: false })\r\n  },\r\n  onHide: function () {\r\n    this.setData({ closeBtn: false })\r\n  },\r\n  /*点击分享*/\r\n  showshade: function () {\r\n    app.checkAuth();\r\n    this.setData({ closeBtn: true })\r\n  },\r\n  nav: function () {\r\n    this.setData({ nav_mask: !this.data.nav_mask })\r\n  },\r\n  nav2: function () {\r\n    this.setData({ nav_mask2: !this.data.nav_mask2 })\r\n  },\r\n  changevoice: function () {\r\n    if (this.data.sound) {\r\n      this.setData({\r\n        sound: false,\r\n        soundpic: true\r\n      })\r\n    } else {\r\n      this.setData({\r\n        sound: true,\r\n        soundpic: false\r\n      })\r\n    }\r\n  },\r\n  radioChange: function (e) {\r\n    this.setData({\r\n      giftid: e.currentTarget.dataset.giftgoodsid,\r\n      gift_title: e.currentTarget.dataset.title,\r\n    })\r\n  },\r\n\r\n  /*活动弹层*/\r\n  activityPicker: function () {\r\n    var $this = this;\r\n    $this.setData({ fadein: 'in' })\r\n  },\r\n  actOutPicker: function () {\r\n    var $this = this;\r\n    $this.setData({ fadein: '' })\r\n  },\r\n  /*顶部提示授权*/\r\n  hintclick: function () {\r\n    wx.openSetting({\r\n      success: function (res) { }\r\n    })\r\n  },\r\n\r\n  /*用户授权-取消*/\r\n  cancelclick: function () {\r\n    this.setData({ modelShow: false })\r\n  },\r\n  /*用户授权-去设置*/\r\n  confirmclick: function () {\r\n    this.setData({ modelShow: false })\r\n    wx.openSetting({\r\n      success: function (res) { }\r\n    })\r\n  },\r\n  /*同城配送*/\r\n  sendclick: function () {\r\n    wx.navigateTo({\r\n      url: '/pages/map/index'\r\n    });\r\n  },\r\n\r\n  // 取消时间选择时间\r\n  syclecancle: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  //确定选择时间\r\n  sycleconfirm: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  // 周期购 修改送达时间\r\n  editdate: function (e) {\r\n    selectdate.setSchedule(this);\r\n    this.setData({\r\n      cycledate: true\r\n    });\r\n  },\r\n\r\n    //时间选择器 前后月份选择\r\n    doDay: function (e) {\r\n    selectdate.doDay(e,this);\r\n    },\r\n    //周期购选择时间\r\n    selectDay: function (e) {\r\n        selectdate.selectDay(e,this);\r\n        selectdate.setSchedule(this);\r\n    },\r\n\r\n\r\n  play: function (e) {\r\n    var item_id = e.target.dataset.id;\r\n    var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n    if (!innerAudioContext) {\r\n      innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n      var audiosObj = this.data.audiosObj;\r\n      audiosObj[item_id] = innerAudioContext;\r\n      this.setData({\r\n        audiosObj: audiosObj\r\n      })\r\n    }\r\n    var $this = this;\r\n    innerAudioContext.onPlay(() => {\r\n      var Time = setInterval(function () {\r\n        var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n        var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n        var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n        var seconds = Math.ceil(innerAudioContext.currentTime)\r\n        var audioicon = ''\r\n        if (minute < 10) {\r\n          minute = \"0\" + minute;\r\n        }\r\n        var time = minute + \":\" + second;\r\n        var audios = $this.data.audios;\r\n        audios[item_id].audiowidth = width;\r\n        audios[item_id].Time = Time;\r\n        audios[item_id].audiotime = time;\r\n        audios[item_id].seconds = seconds;\r\n        $this.setData({ audios: audios })\r\n      }, 1000)\r\n    })\r\n\r\n    var src = e.currentTarget.dataset.audio;\r\n    var time = e.currentTarget.dataset.time;\r\n    var pausestop = e.currentTarget.dataset.pausestop;\r\n    var loopplay = e.currentTarget.dataset.loopplay;\r\n    if (loopplay == 0) {\r\n      innerAudioContext.onEnded((res) => {\r\n        audios[item_id].status = false;\r\n        $this.setData({ audios: audios })\r\n      })\r\n    }\r\n    var audios = $this.data.audios;\r\n\r\n    if (!audios[item_id]) {\r\n      audios[item_id] = {};\r\n    }\r\n    if (innerAudioContext.paused && time == 0) {\r\n      innerAudioContext.src = src;\r\n      innerAudioContext.play();\r\n      if (loopplay == 1) {\r\n        innerAudioContext.loop = true;\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n\r\n    } else if (innerAudioContext.paused && time > 0) {\r\n      innerAudioContext.play();\r\n      if (pausestop == 0) {\r\n        innerAudioContext.seek(time);\r\n      } else {\r\n        innerAudioContext.seek(0);\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n    }\r\n    else {\r\n      innerAudioContext.pause();\r\n      audios[item_id].status = false;\r\n    }\r\n    $this.setData({ audios: audios })\r\n  },\r\n  pauseOther: function (item_id) {\r\n    var $this = this;\r\n    $.each(this.data.audiosObj, function (id, obj) {\r\n      if (id == item_id) {\r\n        return;\r\n      }\r\n      obj.pause();\r\n      var audios = $this.data.audios;\r\n      if (audios[id]) {\r\n        audios[id].status = false;\r\n        $this.setData({ audios: audios });\r\n      }\r\n    });\r\n  },\r\n  /**\r\n * 生命周期函数--监听页面隐藏\r\n */\r\n  onHide: function () {\r\n    this.pauseOther();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    this.pauseOther();\r\n  },\r\n  navigate: function (e) {\r\n    var url = e.currentTarget.dataset.url\r\n    var phone = e.currentTarget.dataset.phone\r\n    var appid = e.currentTarget.dataset.appid\r\n    var appurl = e.currentTarget.dataset.appurl\r\n    if (url) {\r\n      wx.navigateTo({\r\n        url: url,\r\n        fail: function () {\r\n          wx.switchTab({\r\n            url: url,\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if (phone) {\r\n      wx.makePhoneCall({\r\n        phoneNumber: phone\r\n      })\r\n    }\r\n    if (appid) {\r\n      wx.navigateToMiniProgram({\r\n        appId: appid,\r\n        path: appurl\r\n      })\r\n    }\r\n  },\r\n  close: function () {\r\n    app.globalData.flag = true;\r\n    wx.reLaunch({\r\n      url: '../index/index',\r\n    })\r\n  },\r\n});","/**\r\n *\r\n * package\\index.js\r\n *\r\n * @create 2017-11-22\r\n * @author 牟俊羽\r\n *\r\n */\r\n  var app = getApp();\r\n  var core = app.requirejs('core');\r\n  var icons = app.requirejs('icons');\r\n  var $ = app.requirejs('jquery');\r\n  Page({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    show:true\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this =this;\r\n    core.get('package.get_list', { goodsid: options.id }, function (result) {\r\n      \r\n      $this.setData({\r\n        list: result.list\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","/**\r\n *\r\n * detail\\index.js\r\n *\r\n * @create 2017-11-22\r\n * @author 牟俊羽\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar $ = app.requirejs('jquery');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    show: true,\r\n    option_mask:false\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this =this;\r\n    $this.setData({\r\n      pid: options.id\r\n    })\r\n    core.get('package.get_detail', { pid: options.id }, function (result) {\r\n      var packgoods = result.packgoods;\r\n      var good=[];\r\n      wx.setNavigationBarTitle({\r\n        title: result.package.title || '套餐'\r\n      });\r\n      for (var i = 0; i < packgoods.length;i++){\r\n        if (packgoods[i].option==\"\"){\r\n          good[i] = { goodsid: packgoods[i].goodsid, optionid: '' }\r\n\r\n        }else{\r\n          good[i] = { goodsid: packgoods[i].goodsid, optionid: null }\r\n        }\r\n      }\r\n    \r\n      $this.setData({\r\n        packgoods:packgoods,\r\n        package: result.package,\r\n        good: good\r\n      })\r\n    });\r\n  },\r\n  option:function(e){\r\n    var $this = this;\r\n\r\n    var goodsid = e.currentTarget.dataset.goodsid;\r\n    var index = e.currentTarget.dataset.index;\r\n    core.get('package.get_option', { pid: $this.data.pid, goodsid: goodsid}, function (result) {\r\n      $this.setData({\r\n        option_mask:true,\r\n        option: result.option,\r\n        index: index\r\n      })\r\n    });\r\n  },\r\n  back: function (e) {\r\n    var $this = this;\r\n    wx.setStorage({\r\n      key: \"mydata\",\r\n      data: {id:e.currentTarget.dataset.id},\r\n      success: function () {\r\n        wx.navigateBack();   //返回上一个页面\r\n      }\r\n    })\r\n  },\r\n  close:function(){\r\n    this.setData({\r\n      option_mask:false\r\n    })\r\n  },\r\n  choose: function (e) {\r\n    var optionid = e.currentTarget.dataset.optionid;\r\n    var option_title = e.currentTarget.dataset.title;\r\n    var index = e.currentTarget.dataset.index;//option下标\r\n    var packgoods = this.data.packgoods;\r\n    var packageprice = this.data.option[index].packageprice;//所选option价格\r\n    packgoods[this.data.index].packageprice = packageprice;//所选option价格替换商品价格\r\n    var sum =0;//套餐价格\r\n    \r\n    for (var i = 0; i < packgoods.length;i++){\r\n      sum += packgoods[i].packageprice*1\r\n    }\r\n   \r\n    this.setData({\r\n      option_active: optionid,\r\n      option_title: option_title,\r\n      sum: sum\r\n    })\r\n  },\r\n  confirm: function (){\r\n    var packgoods = this.data.packgoods;\r\n    var index = this.data.index;\r\n    var option_active = this.data.option_active;\r\n    var option_title = this.data.option_title;\r\n    var good = this.data.good;\r\n    packgoods[index].optionname = option_title;\r\n    good[index].optionid = option_active;\r\n    this.setData({\r\n      option_mask: false,\r\n      packgoods: packgoods,\r\n      good: good\r\n    })\r\n  },\r\n  buy:function(){\r\n    var $this = this;\r\n    var good = this.data.good;\r\n  \r\n    var all=true;\r\n    for(var i=0;i<good.length;i++){\r\n      if (good[i].optionid == null){\r\n        all=false\r\n      }\r\n    }\r\n    if(!all){\r\n      foxui.toast(this, '请选择规格！')\r\n    }else{\r\n      good = JSON.stringify(good);\r\n      wx.redirectTo({\r\n        url: '/pages/order/create/index?packageid=' + $this.data.package.id + '&goods=' + good,\r\n      });\r\n    }\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data: {\r\n        show: false,\r\n        accredit: '',\r\n        errMsg: '',\r\n        Image: ''\r\n    },\r\n\r\n    onLoad: function (options) {\r\n        options = options || {};\r\n        if (!options.id) {\r\n            wx.redirectTo({\r\n                url: '/pages/goods/index/index'\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.getImage(options.id);\r\n    },\r\n\r\n    // 获取图片\r\n    getImage: function (goodsid) {\r\n        var $this = this;\r\n        core.json('goods/poster/getimage', {\r\n            id: goodsid\r\n        }, function (ret) {\r\n           \r\n            if(ret.error==0){\r\n                $this.setData({\r\n                    Image: ret.url\r\n                });\r\n                return;\r\n            }\r\n            foxui.toast($this, ret.message);\r\n        });\r\n    },\r\n\r\n    loadImg: function (e) {\r\n        this.setData({\r\n            show: true\r\n        });\r\n    },\r\n\r\n    // 预览图片\r\n    previewImage: function(){\r\n        var $this = this;\r\n        wx.previewImage({\r\n            current: $this.data.Image,\r\n            urls: [$this.data.Image]\r\n        })\r\n    },\r\n\r\n    // 保存图片\r\n    savePicture: function () {\r\n        var $this = this;\r\n        wx.getSetting({\r\n            success: function (res) {\r\n                var accredit = res.authSetting['scope.writePhotosAlbum']\r\n                if (accredit) {\r\n                    wx.showLoading({\r\n                        title: '图片下载中...',\r\n                    });\r\n                    setTimeout(function () {\r\n                        wx.hideLoading()\r\n                    }, 1000)\r\n                    wx.downloadFile({\r\n                        url: $this.data.Image,\r\n                        success: function (res) {\r\n                            wx.saveImageToPhotosAlbum({\r\n                                filePath: res.tempFilePath,\r\n                                success: function (ret) {\r\n                                    foxui.toast($this, \"保存图片成功\");\r\n                                },\r\n                                fail: function (ret) {\r\n                                    $this.setData({errMsg: ret.errMsg})\r\n                                    foxui.toast($this, \"保存图片失败\");\r\n                                }\r\n                            })\r\n                        }\r\n                    })\r\n                } else {\r\n                    wx.authorize({\r\n                        scope: 'scope.writePhotosAlbum',\r\n                        success:function(){\r\n                          wx.showLoading({\r\n                            title: '图片下载中...',\r\n                          });\r\n                          setTimeout(function () {\r\n                            wx.hideLoading()\r\n                          }, 1000)\r\n                          wx.downloadFile({\r\n                            url: $this.data.Image,\r\n                            success: function (res) {\r\n                              wx.saveImageToPhotosAlbum({\r\n                                filePath: res.tempFilePath,\r\n                                success: function (ret) {\r\n                                  foxui.toast($this, \"保存图片成功\");\r\n                                },\r\n                                fail: function (ret) {\r\n                                  $this.setData({ errMsg: ret.errMsg })\r\n                                  foxui.toast($this, \"保存图片失败\");\r\n                                }\r\n                              })\r\n                            }\r\n                          })\r\n                        },\r\n                        fail: function () {\r\n                            /*获取权限时点击了拒绝以后的弹窗*/\r\n                            wx.showModal({\r\n                                title: '警告',\r\n                                content: '您点击了拒绝授权，将无法正常使用保存图片或视频的功能体验，请删除小程序重新进入。'\r\n                            })\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n});","/**\r\n *\r\n * order/index.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-02-04\r\n *\r\n */\r\nvar app = getApp(), \r\ncore = app.requirejs('core'),\r\norder = app.requirejs('biz/order');\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        status: '',\r\n        list:[],\r\n        page:1,\r\n        code: false,\r\n        cancel:order.cancelArray,\r\n        cancelindex:0\r\n    },\r\n    onLoad: function (options) {\r\n        app.checkAuth();\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options,\r\n            status: options.status || ''\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('order/get_list', {page: $this.data.page, status: $this.data.status, merchid: 0}, function (list) {\r\n            if (list.error==0){\r\n                $this.setData({loading:false,show:true,total:list.total,empty:true});\r\n                if(list.list.length>0){\r\n                    $this.setData({\r\n                        page: $this.data.page+1,\r\n                        list: $this.data.list.concat(list.list)\r\n                    });\r\n                }\r\n                if(list.list.length<list.pagesize) {\r\n                    $this.setData({\r\n                        loaded: true\r\n                    });\r\n                }\r\n            }else{\r\n                core.toast(list.message,'loading')\r\n            }\r\n        },this.data.show);\r\n    },\r\n    selected: function (e) {\r\n        var status = core.data(e).type;\r\n        this.setData({\r\n            list:[],\r\n            page:1,\r\n            status: status,\r\n            empty: false\r\n        });\r\n        this.get_list();\r\n    },\r\n    onReachBottom:function(){\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.get_list();\r\n    },\r\n    code: function (e) {\r\n        var $this=this,orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    close: function () {\r\n        this.setData({\r\n            code: false\r\n        })\r\n    },\r\n    cancel:function (e) {\r\n        var orderid = core.data(e).orderid;\r\n        order.cancel(orderid,e.detail.value,'/pages/order/index?status='+this.data.status);\r\n    },\r\n    delete:function (e) {\r\n        var type = core.data(e).type,orderid = core.data(e).orderid;\r\n        order.delete(orderid,type,'/pages/order/index',this);\r\n    },\r\n    finish:function (e) {\r\n        var type = core.data(e).type,orderid = core.data(e).orderid;;\r\n        order.finish(orderid,'/pages/order/index');\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    }\r\n});","/**\r\n *\r\n * order/detail/index.js\r\n *\r\n * @create 2017-1-12\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core'),order = app.requirejs('biz/order');\r\nPage({\r\n    data: {\r\n        code: false,\r\n        consume: false,\r\n        store: false,\r\n        cancel:order.cancelArray,\r\n        cancelindex:0,\r\n        diyshow:{},\r\n        city_express_state: 0\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n    },\r\n    onShow:function () {\r\n        this.get_list();\r\n        var $this = this;\r\n        var isIpx = app.getCache('isIpx');\r\n        if (isIpx) {\r\n          $this.setData({\r\n            isIpx: true,\r\n            iphonexnavbar: 'fui-iphonex-navbar',\r\n            paddingb: 'padding-b'\r\n          })\r\n        } else {\r\n          $this.setData({\r\n            isIpx: false,\r\n            iphonexnavbar: '',\r\n            paddingb: ''\r\n          })\r\n        }\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/detail', $this.data.options, function (list) {\r\n          if (list.error>0){\r\n            if (list.error != 50000) {\r\n              core.toast(list.message, 'loading');\r\n            }\r\n            wx.redirectTo({\r\n              url: '/pages/order/index'\r\n            })\r\n          }\r\n            if(list.nogift[0].fullbackgoods != undefined ){\r\n            \tvar fullbackratio = list.nogift[0].fullbackgoods.fullbackratio;\r\n\t       \t\tvar maxallfullbackallratio = list.nogift[0].fullbackgoods.maxallfullbackallratio;\r\n\t       \t\tvar fullbackratio = Math.round(fullbackratio);\r\n\t       \t\tvar maxallfullbackallratio = Math.round(maxallfullbackallratio);\r\n            }\r\n\t\t\t\r\n            if (list.error==0){\r\n                list.show = true;\r\n                var ordervirtualtype = Array.isArray(list.ordervirtual);\r\n                $this.setData(list);\r\n                $this.setData({ ordervirtualtype: ordervirtualtype, fullbackgoods: list.nogift[0].fullbackgoods, maxallfullbackallratio: maxallfullbackallratio, fullbackratio: fullbackratio, invoice: list.order.invoicename, membercard_info: list.membercard_info })\r\n            }\r\n        });\r\n    },\r\n    more:function(){\r\n      this.setData({all:true})\r\n    },\r\n    code: function (e) {\r\n        var $this=this,orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    diyshow: function (e) {\r\n        var diyshow=this.data.diyshow,goodsid=core.data(e).id;\r\n        diyshow[goodsid] = !diyshow[goodsid];\r\n        this.setData({\r\n            diyshow:diyshow\r\n        });\r\n    },\r\n    close: function () {\r\n        this.setData({\r\n            code: false,\r\n        })\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id,type=data.type,d={};\r\n        (id == 0 || typeof id =='undefined') ? d[type] = 1 : d[type] = 0;\r\n        this.setData(d);\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    },\r\n    cancel:function (e) {\r\n        order.cancel(this.data.options.id,e.detail.value,'/pages/order/detail/index?id='+this.data.options.id);\r\n    },\r\n    delete:function (e) {\r\n        var type = core.data(e).type;\r\n        order.delete(this.data.options.id,type,'/pages/order/index');\r\n    },\r\n    finish:function (e) {\r\n        order.finish(this.data.options.id,'/pages/order/index');\r\n    },\r\n    refundcancel:function (e) {\r\n        var $this = this;\r\n        order.refundcancel(this.data.options.id,function () {\r\n            $this.get_list();\r\n        });\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    }\r\n})","/**\r\n *\r\n * order/express/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core');\r\nPage({\r\n    data: {},\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list:function () {\r\n        var $this = this;\r\n        core.get('order/express', $this.data.options, function (list) {\r\n            if (list.error==0){\r\n                list.show = true;\r\n                $this.setData(list);\r\n            }else{\r\n                core.toast(list.message,'loading')\r\n            }\r\n        });\r\n    }\r\n});","/**\r\n *\r\n * order/common/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),\r\ncore=app.requirejs('core');\r\nPage({\r\n    data: {\r\n      stars_class: ['text-default', 'text-primary', 'text-success', 'text-warning', 'text-danger'],\r\n        stars_text: ['差评', '一般', '挺好', '满意', '非常满意'],\r\n        normalSrc: 'icox icox-star',\r\n        selectedSrc: 'icox icox-xing selected',\r\n        key: -1,\r\n        content: '',\r\n        images:[],\r\n        imgs:[]\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/comment', $this.data.options, function (list) {\r\n            if (list.error == 0) {\r\n                list.show = true;\r\n                $this.setData(list);\r\n            } else {\r\n                core.toast(list.message, 'loading');\r\n                wx.navigateBack();\r\n            }\r\n        }, true);\r\n    },\r\n    select: function (e) {\r\n        var key = e.currentTarget.dataset.key;\r\n        this.setData({\r\n            key: key\r\n        });\r\n    },\r\n    change:function (e) {\r\n        var name=core.data(e).name,data={};\r\n        data[name] = e.detail.value;\r\n        this.setData(data);\r\n    },\r\n    submit:function () {\r\n        var $this = this,data = {\r\n            orderid:this.data.options.id,\r\n            comments:[]\r\n        };\r\n        if (this.data.content == '' || this.data.key==-1){\r\n            core.alert('有未填写项目!')\r\n            return false;\r\n        }\r\n        for(var i=0,len=this.data.goods.length;i<len;i++){\r\n            var g = {\r\n                goodsid:this.data.goods[i].goodsid,\r\n                level:this.data.key+1,\r\n                content:this.data.content,\r\n                images:this.data.images\r\n            };\r\n            data.comments.push(g);\r\n        }\r\n        core.post('order/comment/submit', data, function (list) {\r\n            if (list.error != 0) {\r\n                core.toast(list.message, 'loading')\r\n            }\r\n            wx.navigateBack()\r\n        },true);\r\n    },\r\n    upload: function (e) {\r\n        var $this=this,dataset = core.data(e),type = dataset.type,images=$this.data.images,imgs=$this.data.imgs,index=dataset.index;\r\n        if(type=='image'){\r\n            core.upload(function(file){\r\n                images.push(file.filename);\r\n                imgs.push(file.url);\r\n                $this.setData({\r\n                    images:images,\r\n                    imgs:imgs\r\n                })\r\n            });\r\n        }else if(type=='image-remove'){\r\n            images.splice(index,1);\r\n            imgs.splice(index,1);\r\n            $this.setData({\r\n                images:images,\r\n                imgs:imgs\r\n            })\r\n        }else if(type=='image-preview'){\r\n            wx.previewImage({\r\n                current: imgs[index],\r\n                urls: imgs\r\n            })\r\n        }\r\n    }\r\n});\r\n","/**\r\n *\r\n * order/detail/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core'),order = app.requirejs('biz/order');;\r\nPage({\r\n    data: {\r\n        code:1,\r\n        tempFilePaths: '',\r\n        delete: '',\r\n        rtypeArr: ['退款(仅退款不退货)','退货退款','换货'],\r\n        rtypeArrText: ['退款','退款','换货'],\r\n        rtypeIndex: 1,\r\n        reasonArr: ['不想要了','卖家缺货','拍错了/订单信息错误','其它'],\r\n        reasonIndex:0,\r\n        images:[]\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/refund', $this.data.options, function (list) {\r\n          $this.setData({ show: true })\r\n            if (list.error == 0) {\r\n                if (list.order.status<2){\r\n                    list.rtypeArr=['退款(仅退款不退货)'];\r\n                }\r\n                // list.show = true;\r\n                $this.setData(list);\r\n               \r\n            } else {\r\n                core.toast(list.message, 'loading');\r\n                setTimeout(function() {\r\n                  wx.navigateBack()\r\n                },1500)\r\n            }\r\n        });\r\n    },\r\n    submit:function () {\r\n        var data = {\r\n            id:this.data.options.id,\r\n            rtype:this.data.rtypeIndex,\r\n            reason:this.data.reasonArr[this.data.reasonIndex],\r\n            content:this.data.content,\r\n            price:this.data.price,\r\n            images:this.data.images\r\n        };\r\n        core.post('order/refund/submit', data, function (list) {\r\n         \r\n            if (list.error == 0) {\r\n                wx.navigateBack()\r\n            } else {\r\n                core.toast(list.message, 'loading')\r\n            }\r\n        },true);\r\n    },\r\n    change:function (e) {\r\n        var $this=this,name=core.data(e).name,data={};\r\n        data[name] = e.detail.value;\r\n        this.setData(data);\r\n    },\r\n    upload: function (e) {\r\n        var $this=this,dataset = core.data(e),type = dataset.type,images=$this.data.images,imgs=$this.data.imgs,index=dataset.index;\r\n        if(type=='image'){\r\n            core.upload(function(file){\r\n                images.push(file.filename);\r\n                imgs.push(file.url);\r\n                $this.setData({\r\n                    images:images,\r\n                    imgs:imgs\r\n                })\r\n            });\r\n        }else if(type=='image-remove'){\r\n            images.splice(index,1);\r\n            imgs.splice(index,1);\r\n            $this.setData({\r\n                images:images,\r\n                imgs:imgs\r\n            })\r\n        }else if(type=='image-preview'){\r\n            wx.previewImage({\r\n                current: imgs[index],\r\n                urls: imgs\r\n            })\r\n        }\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id;\r\n        (id == 0 || typeof id =='undefined') ? id = 1 : id = 0;\r\n        this.setData({code:id});\r\n    },\r\n    edit:function (e) {\r\n        this.setData({'order.refundstate':0});\r\n    },\r\n    refundcancel:function (e) {\r\n        var $this = this;\r\n        order.refundcancel(this.data.options.id,function () {\r\n            wx.navigateBack()\r\n        });\r\n    }\r\n});","/**\r\n *\r\n * order/detail/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core'),order = app.requirejs('biz/order');;\r\nPage({\r\n    data: {\r\n        code:1,\r\n        tempFilePaths: '',\r\n        delete: '',\r\n        rtypeArr: ['退款(仅退款不退货)','退货退款','换货'],\r\n        rtypeArrText: ['退款','退款','换货'],\r\n        rtypeIndex: 1,\r\n        reasonArr: ['不想要了','卖家缺货','拍错了/订单信息错误','其它'],\r\n        reasonIndex:0,\r\n        images:[]\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/single_refund', $this.data.options, function (list) {\r\n          $this.setData({ show: true })\r\n            if (list.error == 0) {\r\n                if (list.order.status<2 && list.order.sendtime<=0){\r\n                    list.rtypeArr=['退款(仅退款不退货)'];\r\n                }\r\n                // list.show = true;\r\n                $this.setData(list);\r\n               \r\n            } else {\r\n                core.toast(list.message, 'none');\r\n                setTimeout(function() {\r\n                  wx.navigateBack()\r\n                },1500)\r\n            }\r\n        });\r\n    },\r\n    submit:function () {\r\n        var $this=this;\r\n        var data = {\r\n            id:this.data.options.id,\r\n            rtype:this.data.rtypeIndex,\r\n            reason:this.data.reasonArr[this.data.reasonIndex],\r\n            content:this.data.content,\r\n            price:this.data.price,\r\n            images:this.data.images\r\n        };\r\n        core.post('order/single_refund/submit', data, function (list) {\r\n         \r\n            if (list.error == 0) {\r\n                // wx.navigateTo({\r\n                //     url: '/pages/order/detail/index?id='+$this.data.order.id,\r\n                // })\r\n                wx.navigateBack();\r\n            } else {\r\n                core.toast(list.message, 'none')\r\n            }\r\n        },true);\r\n    },\r\n    change:function (e) {\r\n        var $this=this,name=core.data(e).name,data={};\r\n        data[name] = e.detail.value;\r\n        this.setData(data);\r\n    },\r\n    upload: function (e) {\r\n        var $this=this,dataset = core.data(e),type = dataset.type,images=$this.data.images,imgs=$this.data.imgs,index=dataset.index;\r\n        if(type=='image'){\r\n            core.upload(function(file){\r\n                images.push(file.filename);\r\n                imgs.push(file.url);\r\n                $this.setData({\r\n                    images:images,\r\n                    imgs:imgs\r\n                })\r\n            });\r\n        }else if(type=='image-remove'){\r\n            images.splice(index,1);\r\n            imgs.splice(index,1);\r\n            $this.setData({\r\n                images:images,\r\n                imgs:imgs\r\n            })\r\n        }else if(type=='image-preview'){\r\n            wx.previewImage({\r\n                current: imgs[index],\r\n                urls: imgs\r\n            })\r\n        }\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id;\r\n        (id == 0 || typeof id =='undefined') ? id = 1 : id = 0;\r\n        this.setData({code:id});\r\n    },\r\n    edit:function (e) {\r\n        this.setData({'order.single_refundstate':0});\r\n    },\r\n    refundcancel:function (e) {\r\n        var $this = this;\r\n        core.confirm('您确定要取消申请?',function () {\r\n            core.post('order/single_refund/cancel', {id: $this.data.options.id}, function (data) {\r\n                if (data.error == 0) {\r\n                    // wx.navigateTo({\r\n                    //     url: '/pages/order/detail/index?id='+$this.data.order.id,\r\n                    // })\r\n                    wx.navigateBack();\r\n                }\r\n                core.toast(data.message,'none');\r\n            }, true)\r\n        });\r\n    },\r\n    back:function () {\r\n        wx.navigateBack();\r\n    },\r\n    fefundreceive:function (e) {\r\n        var $this = this;\r\n        core.confirm('确认您已经收到换货物品?',function () {\r\n            core.post('order/single_refund/receive', {id: $this.data.options.id,single_refundid:$this.data.refund.id}, function (data) {\r\n                if (data.error == 0) {\r\n                    // wx.navigateTo({\r\n                    //     url: '/pages/order/detail/index?id='+$this.data.order.id,\r\n                    // })\r\n                    wx.navigateBack();\r\n                }\r\n                core.toast(data.message,'none');\r\n            }, true)\r\n        });\r\n    }\r\n\r\n});","/**\r\n *\r\n * order/create/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar $ = app.requirejs('jquery');\r\nvar selectdate = app.requirejs('biz/selectdate');\r\n\r\nPage({\r\n  data: {\r\n    icons: app.requirejs('icons'),\r\n    list: {},\r\n    goodslist: {},\r\n    data: {\r\n      dispatchtype: 0,\r\n      remark: ''\r\n    },\r\n    areaDetail: {\r\n      detail: {\r\n        realname: '',\r\n        mobile: '',\r\n        areas: '',\r\n        street: '',\r\n        address: ''\r\n      },\r\n    },\r\n    merchid: 0,\r\n    showPicker: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],\r\n    street: [],\r\n    streetIndex: 0,\r\n    noArea: false,\r\n    showaddressview: false,\r\n    city_express_state: false,\r\n\r\n    // 以下 周期购\r\n    currentDate: \"\",\r\n    dayList: '',\r\n    currentDayList: '',\r\n    currentObj: '',\r\n    currentDay: '',\r\n    cycelbuy_showdate: '',\r\n    receipttime: '',\r\n    scope: '',\r\n    bargainid: '',\r\n\r\n    //会员卡\r\n    selectcard: ''\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    var $this = this, goodslist = [];\r\n\r\n\r\n    if (options.goods) {\r\n      var goods = JSON.parse(options.goods);\r\n      options.goods = goods;\r\n      this.setData({ ispackage: true })\r\n    }\r\n    $this.setData({ options: options });\r\n    $this.setData({ bargainid: options.bargainid });\r\n    app.url(options);\r\n    \r\n    core.get('order/create', $this.data.options, function (list) {\r\n     \r\n      if (list.error == 0) {\r\n        \r\n        goodslist = $this.getGoodsList(list.goods);\r\n        var comboprice = ($this.data.originalprice - list.goodsprice).toFixed(2);\r\n        $this.setData({\r\n          list: list,\r\n          goods: list,\r\n          show: true,\r\n          address: true,\r\n          card_info: list.card_info || {},\r\n          cardid: list.card_info.cardid || '',\r\n          cardname: list.card_info.cardname || '',\r\n          carddiscountprice: list.card_info.carddiscountprice,\r\n          goodslist: goodslist,\r\n          merchid: list.merchid,\r\n          comboprice: comboprice,\r\n          diyform: {\r\n            f_data: list.f_data,\r\n            fields: list.fields\r\n          },\r\n          city_express_state: list.city_express_state,\r\n          cycelbuy_showdate: list.selectDate,\r\n          receipttime: list.receipttime,\r\n          iscycel: list.iscycel,\r\n          scope: list.scope,\r\n          fromquick: list.fromquick,\r\n          hasinvoice: list.hasinvoice\r\n        });\r\n\r\n        app.setCache(\"goodsInfo\", {\r\n          goodslist: goodslist,\r\n          merchs: list.merchs\r\n        }, 1800);\r\n\r\n      } else {\r\n        core.toast(list.message, 'loading');\r\n        setTimeout(function () {\r\n          wx.navigateBack();\r\n        }, 1000);\r\n      }\r\n\r\n      if (list.fullbackgoods != '') {\r\n        if (list.fullbackgoods == undefined) {\r\n          return\r\n        }\r\n        var fullbackratio = list.fullbackgoods.fullbackratio;\r\n        var maxallfullbackallratio = list.fullbackgoods.maxallfullbackallratio;\r\n        var fullbackratio = Math.round(fullbackratio);\r\n        var maxallfullbackallratio = Math.round(maxallfullbackallratio);\r\n        $this.setData({ fullbackratio: fullbackratio, maxallfullbackallratio: maxallfullbackallratio })\r\n      }\r\n      if (list.iscycel == 1) {\r\n        $this.show_cycelbuydate();\r\n      }\r\n\r\n    });\r\n\r\n    this.getQuickAddressDetail();\r\n    app.setCache(\"coupon\", '');\r\n    setTimeout(function () {\r\n      $this.setData({ areas: app.getCache(\"cacheset\").areas })\r\n    }, 3000)\r\n\r\n  },\r\n\r\n\r\n  show_cycelbuydate: function () {\r\n    var $this = this;\r\n    /*周期购时间选择器初始化*/\r\n    var currentObj = selectdate.getCurrentDayString(this, $this.data.cycelbuy_showdate);\r\n    var week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n    $this.setData({\r\n      currentObj: currentObj,\r\n      currentDate: currentObj.getFullYear() + '.' + (currentObj.getMonth() + 1) + '.' + currentObj.getDate() + ' ' + week[currentObj.getDay()],\r\n      currentYear: currentObj.getFullYear(),\r\n      currentMonth: (currentObj.getMonth() + 1),\r\n      currentDay: currentObj.getDate(),\r\n      initDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      checkedDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      maxday: $this.data.scope,//可选的天数\r\n    })\r\n  },\r\n\r\n  onShow: function () {\r\n    var $this = this, address = app.getCache(\"orderAddress\"), shop = app.getCache(\"orderShop\");\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar',\r\n        paddingb: 'padding-b'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: '',\r\n        paddingb: ''\r\n      })\r\n    }\r\n\r\n\r\n    if (address) {\r\n      this.setData({\r\n        'list.address': address\r\n      });\r\n      $this.caculate($this.data.list);\r\n    }\r\n    if (shop) {\r\n\r\n      this.setData({\r\n        'list.carrierInfo': shop,\r\n        'list.storeInfo': shop\r\n      });\r\n    }\r\n\r\n    var coupon = app.getCache(\"coupon\");\r\n\r\n    if (typeof coupon == 'object' && coupon.id != 0) {\r\n      this.setData({ 'data.couponid': coupon.id, 'data.couponname': coupon.name });\r\n      core.post('order/create/getcouponprice', {\r\n        couponid: coupon.id,\r\n        goods: this.data.goodslist,\r\n        goodsprice: this.data.list.goodsprice,\r\n        discountprice: this.data.list.discountprice,\r\n        isdiscountprice: this.data.list.isdiscountprice\r\n      }, function (data) {\r\n        if (data.error == 0) {\r\n          delete data.$goodsarr;\r\n          $this.setData({ coupon: data });\r\n          $this.caculate($this.data.list);\r\n        } else {\r\n          core.alert(data.message);\r\n        }\r\n      }, true);\r\n    } else {\r\n      this.setData({ 'data.couponid': 0, 'data.couponname': null, coupon: null });\r\n      if (!$.isEmptyObject($this.data.list)) {\r\n        $this.caculate($this.data.list);\r\n      }\r\n    }\r\n  },\r\n\r\n  // 获取商品列表\r\n  getGoodsList: function (list) {\r\n    var goodslist = [];\r\n    $.each(list, function (k, v) {\r\n      $.each(v.goods, function (kk, vv) {\r\n        goodslist.push(vv);\r\n      });\r\n    });\r\n    \r\n    var originalprice = 0;\r\n    for (var i = 0; i < goodslist.length; i++) {\r\n      originalprice += goodslist[i].price;\r\n    }\r\n    \r\n    this.setData({\r\n      originalprice: originalprice\r\n    })\r\n    return goodslist;\r\n  },\r\n\r\n\r\n  toggle: function (e) {\r\n    var data = core.pdata(e), id = data.id, type = data.type, d = {};\r\n    (id == 0 || typeof id == 'undefined') ? d[type] = 1 : d[type] = 0;\r\n    this.setData(d);\r\n  },\r\n  phone: function (e) {\r\n    core.phone(e);\r\n  },\r\n  dispatchtype: function (e) {\r\n    var type = core.data(e).type;\r\n    this.setData({\r\n      'data.dispatchtype': type\r\n    });\r\n    this.caculate(this.data.list);\r\n  },\r\n  number: function (e) {\r\n    var $this = this,\r\n      dataset = core.pdata(e),\r\n      val = foxui.number(this, e),\r\n      id = dataset.id,\r\n      list = $this.data.list,\r\n      total = 0, goodsprice = 0.0;\r\n    $.each(list.goods, function (k, v) {\r\n      $.each(v.goods, function (kk, vv) {\r\n        if (vv.id == id) {\r\n          list.goods[k].goods[kk].total = val;\r\n        }\r\n        total += parseInt(list.goods[k].goods[kk].total);\r\n        goodsprice += parseFloat(total * list.goods[k].goods[kk].price);\r\n      });\r\n    });\r\n    list.total = total;\r\n    list.goodsprice = $.toFixed(goodsprice, 2);\r\n    $this.setData({\r\n      list: list,\r\n      goodslist: $this.getGoodsList(list.goods)\r\n    });\r\n    this.caculate(list);\r\n  },\r\n  caculate: function (list) {\r\n    var $this = this;\r\n    var couponid = 0;\r\n    if ($this.data.data && $this.data.data.couponid != 0) {\r\n      couponid = $this.data.data.couponid\r\n    }\r\n\r\n    core.post('order/create/caculate', {\r\n      goods: this.data.goodslist,\r\n      dflag: this.data.data.dispatchtype,\r\n      addressid: this.data.list.address ? this.data.list.address.id : 0,\r\n      packageid: this.data.list.packageid,\r\n      bargain_id: this.data.bargainid,\r\n      discountprice: this.data.list.discountprice,\r\n      cardid: this.data.cardid,\r\n      couponid: couponid,\r\n    }, function (data) {\r\n      //console.error(data)\r\n      list.dispatch_price = data.price;\r\n      list.enoughdeduct = data.deductenough_money;\r\n      list.enoughmoney = data.deductenough_enough;\r\n      list.taskdiscountprice = data.taskdiscountprice;\r\n      list.discountprice = data.discountprice;\r\n      list.isdiscountprice = data.isdiscountprice;\r\n      list.seckill_price = data.seckill_price;\r\n      list.deductcredit2 = data.deductcredit2;\r\n      list.deductmoney = data.deductmoney;\r\n      list.deductcredit = data.deductcredit;\r\n      list.gifts = data.gifts;\r\n      if ($this.data.data.deduct) {\r\n        data.realprice -= data.deductmoney  //减去积分抵扣的金额\r\n      }\r\n      if ($this.data.data.deduct2) {\r\n        data.realprice -= data.deductcredit2\r\n      }\r\n      if ($this.data.coupon && typeof ($this.data.coupon.deductprice) != 'undefined') {\r\n        $this.setData({ \"coupon.deductprice\": data.coupon_deductprice });\r\n        data.realprice -= data.coupon_deductprice;\r\n      }\r\n      if (data.card_info) {\r\n        list.card_free_dispatch = data.card_free_dispatch;\r\n      }\r\n      if ($this.data.goods.giftid == 0) {\r\n        $this.setData({ \"goods.gifts\": data.gifts });\r\n      }\r\n      if (list.realprice <= 0) {\r\n        list.realprice = 0.000001;\r\n      }\r\n      list.realprice = $.toFixed(data.realprice, 2);\r\n      $this.setData({\r\n        list: list,\r\n        cardid: data.card_info.cardid,\r\n        cardname: data.card_info.cardname,\r\n        goodsprice: data.card_info.goodsprice ? data.card_info.goodsprice:0,\r\n        carddiscountprice: data.card_info.carddiscountprice,\r\n        city_express_state: data.city_express_state\r\n      });\r\n    }, true);\r\n  },\r\n  submit: function () {\r\n    var data = this.data, $this = this, diydata = this.data.diyform;\r\n    var giftid = data.goods.giftid || data.giftid;\r\n    if (this.data.goods.giftid == 0 && this.data.goods.gifts.length == 1) {\r\n      giftid = this.data.goods.gifts[0].id;\r\n     \r\n    }\r\n    \r\n    if (data.submit) {\r\n      return;\r\n    }\r\n\r\n    var verify = diyform.verify(this, diydata);\r\n    if (!verify) {\r\n      return;\r\n    }\r\n\r\n    data.list.carrierInfo = data.list.carrierInfo || {};\r\n\r\n    var subdata = {\r\n      'id': data.options.id ? data.options.id : 0,\r\n      'goods': data.goodslist,\r\n      'gdid': data.options.gdid,\r\n      'dispatchtype': data.data.dispatchtype,\r\n      'fromcart': data.list.fromcart,\r\n      'carrierid': (data.data.dispatchtype == 1 && data.list.carrierInfo) ? data.list.carrierInfo.id : 0,\r\n      'addressid': data.list.address ? data.list.address.id : 0,\r\n      'carriers': (data.data.dispatchtype == 1 || data.list.isvirtual || data.list.isverify) ? {\r\n        'carrier_realname': data.list.member.realname,\r\n        'carrier_mobile': data.list.member.mobile,\r\n        'realname': data.list.carrierInfo.realname,\r\n        'mobile': data.list.carrierInfo.mobile,\r\n        'storename': data.list.carrierInfo.storename,\r\n        'address': data.list.carrierInfo.address\r\n      } : '',\r\n      'remark': data.data.remark,\r\n      'deduct': data.data.deduct,\r\n      'deduct2': data.data.deduct2,\r\n      'couponid': data.data.couponid,\r\n      'cardid': data.cardid,\r\n      'invoicename': data.list.invoicename,\r\n      'submit': true,\r\n      'packageid': data.list.packageid,\r\n      'giftid': giftid,\r\n      'diydata': data.diyform.f_data,\r\n      'receipttime': data.receipttime,\r\n      'bargain_id': $this.data.options.bargainid,\r\n      'fromquick': data.fromquick\r\n    };\r\n\r\n    if (data.list.storeInfo) {\r\n      subdata.carrierid = data.list.storeInfo.id;\r\n    }\r\n    if (data.data.dispatchtype == 1 || data.list.isvirtual || data.list.isverify) {\r\n      if ($.trim(data.list.member.realname) == '' && data.list.set_realname == '0') {\r\n        core.alert('请填写联系人!');\r\n        return;\r\n      }\r\n      if ($.trim(data.list.member.mobile) == '' && data.list.set_mobile == '0') {\r\n        core.alert('请填写联系方式!');\r\n        return;\r\n      }\r\n\r\n      if (!/^[1][3-9]\\d{9}$|^([6|9])\\d{7}$|^[0][9]\\d{8}$|^[6]([8|6])\\d{5}$/.test($.trim(data.list.member.mobile))) {\r\n        core.alert(\"请填写正确联系电话!\");\r\n        return;\r\n      }\r\n\r\n      if (data.list.isforceverifystore) {\r\n        if (!data.list.storeInfo) {\r\n          core.alert('请选择门店!');\r\n          return;\r\n        }\r\n      }\r\n      subdata.addressid = 0;\r\n    } else {\r\n      if (!subdata.addressid && !data.list.isonlyverifygoods) {\r\n        core.alert('地址没有选择!');\r\n        return;\r\n      }\r\n    }\r\n    $this.setData({\r\n      submit: true\r\n    });\r\n    core.post('order/create/submit', subdata, function (ret) {\r\n      $this.setData({\r\n        submit: false\r\n      });\r\n      if (ret.error != 0) {\r\n        core.alert(ret.message);\r\n        return;\r\n      }\r\n      wx.navigateTo({\r\n        url: '/pages/order/pay/index?id=' + ret.orderid\r\n      });\r\n    }, true)\r\n  },\r\n  dataChange: function (e) {\r\n    var data = this.data.data, list = this.data.list, id = e.target.id;\r\n    switch (id) {\r\n      case 'remark': data.remark = e.detail.value; break;\r\n      case 'deduct':\r\n        data.deduct = e.detail.value;\r\n        if (data.deduct2) {\r\n          return;\r\n        }\r\n        var realprice = parseFloat(list.realprice);\r\n        realprice += data.deduct ? - parseFloat(list.deductmoney) : parseFloat(list.deductmoney);\r\n        list.realprice = realprice;\r\n        break;\r\n      case 'deduct2':\r\n        data.deduct2 = e.detail.value;\r\n        if (data.deduct) {\r\n          return;\r\n        }\r\n        var realprice = parseFloat(list.realprice);\r\n        realprice += data.deduct2 ? - parseFloat(list.deductcredit2) : parseFloat(list.deductcredit2);\r\n        list.realprice = realprice;\r\n        break;\r\n    }\r\n\r\n    if (list.realprice <= 0) {\r\n      list.realprice = 0.000001;\r\n    }\r\n    list.realprice = $.toFixed(list.realprice, 2);\r\n\r\n    this.setData({\r\n      data: data,\r\n      list: list\r\n    })\r\n  },\r\n  listChange: function (e) {\r\n    var list = this.data.list, id = e.target.id;\r\n    switch (id) {\r\n      case 'invoicename': list.invoicename = e.detail.value; break;\r\n      case 'realname': list.member.realname = e.detail.value; break;\r\n      case 'mobile': list.member.mobile = e.detail.value; break;\r\n    }\r\n    this.setData({\r\n      list: list\r\n    })\r\n  },\r\n  url: function (e) {\r\n    var url = core.pdata(e).url;\r\n    wx.redirectTo({\r\n      url: url\r\n    });\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    diyform.onConfirm(this, e)\r\n\r\n    var val = this.data.pval;\r\n    var areas = this.data.areas;\r\n    var detail = this.data.areaDetail.detail;\r\n    detail.province = areas[val[0]].name;\r\n    detail.city = areas[val[0]].city[val[1]].name;\r\n    detail.datavalue = areas[val[0]].code + \" \" + areas[val[0]].city[val[1]].code;\r\n    if (areas[val[0]].city[val[1]].area && areas[val[0]].city[val[1]].area.length > 0) {\r\n\r\n      detail.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n      detail.datavalue += \" \" + areas[val[0]].city[val[1]].area[val[2]].code;\r\n      this.getStreet(areas, val);\r\n    } else {\r\n      detail.area = \"\";\r\n    }\r\n\r\n    detail.street = '';\r\n    this.setData({ 'areaDetail.detail': detail, streetIndex: 0, showPicker: false });\r\n\r\n    return\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n  //快速添加收货地址\r\n  showaddressview: function (e) {\r\n\r\n    var showaddressview = '';\r\n    if (e.target.dataset.type == 'open') {\r\n      showaddressview = true\r\n    } else {\r\n      showaddressview = false\r\n    }\r\n    this.setData({\r\n      showaddressview: showaddressview\r\n    })\r\n  },\r\n  onChange2: function (event) {\r\n    var $this = this;\r\n    var vname = $this.data.areaDetail.detail;\r\n    var bindtype = event.currentTarget.dataset.type;\r\n\r\n    var value = $.trim(event.detail.value);\r\n    if (bindtype == 'street') {\r\n      vname.streetdatavalue = $this.data.street[value].code\r\n      value = $this.data.street[value].name;\r\n    }\r\n    vname[bindtype] = value;\r\n    $this.setData({ 'areaDetail.detail': vname });\r\n  },\r\n  getStreet: function (areas, val) {\r\n    if (!areas || !val) {\r\n      return;\r\n    }\r\n    var $this = this;\r\n    if (!$this.data.areaDetail.detail.province || !$this.data.areaDetail.detail.city || !this.data.openstreet) {\r\n      return;\r\n    }\r\n    var city = areas[val[0]].city[val[1]].code;\r\n    var area = areas[val[0]].city[val[1]].area[val[2]].code;\r\n\r\n    core.get('getstreet', { city: city, area: area }, function (result) {\r\n      var street = result.street;\r\n      var data = { street: street };\r\n      if (street && $this.data.areaDetail.detail.streetdatavalue) {\r\n        for (var i in street) {\r\n          if (street[i].code == $this.data.areaDetail.detail.streetdatavalue) {\r\n            data.streetIndex = i;\r\n            $this.setData({ 'areaDetail.detail.street': street[i].name });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  }, getQuickAddressDetail: function () {\r\n    var $this = this;\r\n    var id = $this.data.id;\r\n    core.get('member/address/get_detail', { id: id }, function (result) {\r\n      var data = { openstreet: result.openstreet, show: true };\r\n      if (!$.isEmptyObject(result.detail)) {\r\n        var area = result.detail.province + \" \" + result.detail.city + \" \" + result.detail.area;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        data.pval = index;\r\n        data.pvalOld = index;\r\n        data.areaDetail.detail = result.detail;\r\n      }\r\n      $this.setData(data);\r\n      if (result.openstreet && index) {\r\n        $this.getStreet($this.data.areas, index);\r\n      }\r\n    });\r\n  },\r\n  submitaddress: function () {\r\n    var $this = this;\r\n    var detail = $this.data.areaDetail.detail;\r\n    if ($this.data.posting) {\r\n      return;\r\n    }\r\n    if (detail.realname == '' || !detail.realname) {\r\n      foxui.toast($this, \"请填写收件人\");\r\n      return;\r\n    } if (detail.mobile == '' || !detail.mobile) {\r\n      foxui.toast($this, \"请填写联系电话\");\r\n      return;\r\n    }\r\n    if (detail.city == '' || !detail.city) {\r\n      foxui.toast($this, \"请选择所在地区\");\r\n      return;\r\n    }\r\n    if ($this.data.street.length > 0 && (detail.street == '' || !detail.street)) {\r\n      foxui.toast($this, \"请选择所在街道\");\r\n      return;\r\n    }\r\n    if (detail.address == '' || !detail.address) {\r\n      foxui.toast($this, \"请填写详细地址\");\r\n      return;\r\n    }\r\n\r\n    if (!detail.datavalue) {\r\n      foxui.toast($this, \"地址数据出错，请重新选择\");\r\n      return;\r\n    }\r\n\r\n    detail.id = 0;\r\n    $this.setData({ posting: true });\r\n    core.post('member/address/submit', detail, function (result) {\r\n      if (result.error != 0) {\r\n        $this.setData({ posting: false });\r\n        foxui.toast($this, result.message);\r\n        return;\r\n      }\r\n\r\n      detail.id = result.addressid;\r\n\r\n      $this.setData({ showaddressview: false, 'list.address': detail });\r\n      core.toast(\"保存成功\");\r\n    });\r\n\r\n  },\r\n  //赠品弹层\r\n  giftPicker: function () {\r\n    this.setData({\r\n      active: 'active',\r\n      gift: true\r\n    })\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', showcoupon: false, gift: false\r\n    });\r\n  },\r\n  radioChange: function (e) {\r\n    \r\n    this.setData({\r\n      giftid: e.currentTarget.dataset.giftgoodsid,\r\n      gift_title: e.currentTarget.dataset.title,\r\n    })\r\n  },\r\n  /*同城配送*/\r\n  sendclick: function () {\r\n    wx.navigateTo({\r\n      url: '/pages/map/index'\r\n    });\r\n  },\r\n  // 清除表单内容\r\n  clearform: function () {\r\n    var diyform = this.data.diyform;\r\n    var new_fdata = {};\r\n    $.each(diyform, function (k, v) {  //lgt 清除表单时保留图片上传功能\r\n      $.each(v, function (key, value) {\r\n        if (value.data_type == 5) {\r\n          diyform.f_data[value.diy_type].count = 0;\r\n          diyform.f_data[value.diy_type].images = [];\r\n          new_fdata[value.diy_type] = diyform.f_data[value.diy_type];\r\n        }\r\n      });\r\n    });\r\n    diyform.f_data = new_fdata;\r\n    this.setData({\r\n      diyform: diyform\r\n    })\r\n  },\r\n\r\n  // 取消时间选择时间\r\n  syclecancle: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  //确定选择时间\r\n  sycleconfirm: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  // 周期购 修改送达时间\r\n  editdate: function (e) {\r\n    selectdate.setSchedule(this);\r\n    this.setData({\r\n      cycledate: true,\r\n      create: true,\r\n    });\r\n  },\r\n\r\n  //时间选择器 前后月份选择\r\n  doDay: function (e) {\r\n    selectdate.doDay(e, this);\r\n  },\r\n  //周期购选择时间\r\n  selectDay: function (e) {\r\n    selectdate.selectDay(e, this);\r\n    selectdate.setSchedule(this);\r\n  },\r\n\r\n  // 弹出发票picker\r\n  showinvoicepicker: function () {\r\n    var tempdata = this.data.list;\r\n    if (tempdata.invoice_type == 0) { //only纸质\r\n      tempdata.invoice_info.entity = true;\r\n    }\r\n    if (tempdata.invoice_type == 1) { //only电子\r\n      tempdata.invoice_info.entity = false;\r\n    }\r\n    this.setData({\r\n      invoicepicker: true,\r\n      list: tempdata\r\n    })\r\n  },\r\n  noinvoicepicker: function () {\r\n    this.setData({\r\n      invoicepicker: false\r\n    })\r\n  },\r\n  // 清空数据\r\n  clearinvoice: function () {\r\n    var tempdata = this.data.list;\r\n    tempdata.invoicename = '';\r\n    this.setData({\r\n      invoicepicker: false,\r\n      list: tempdata\r\n    })\r\n  },\r\n  // 修改电子纸质类型发票\r\n  chaninvoice: function (e) {\r\n    var tempdata = this.data.list;\r\n    if (e.currentTarget.dataset.type == '0') {\r\n      tempdata.invoice_info.entity = false;\r\n    } else {\r\n      tempdata.invoice_info.entity = true;\r\n    }\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n  // 修改发票类型\r\n  changeType: function (e) {\r\n    var tempdata = this.data.list;\r\n    if (e.currentTarget.dataset.type == '0') {\r\n      tempdata.invoice_info.company = false;\r\n    } else {\r\n      tempdata.invoice_info.company = true;\r\n    }\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n  // input发票抬头\r\n  invoicetitle: function (e) {\r\n    var tempdata = this.data.list;\r\n    tempdata.invoice_info.title = e.detail.value.replace(/\\s+/g, '')\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n\r\n  // input发票税号\r\n  invoicenumber: function (e) {\r\n    var tempdata = this.data.list;\r\n    tempdata.invoice_info.number = e.detail.value.replace(/\\s+/g, '')\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n\r\n  // 发票确定按钮\r\n  confirminvoice: function () {\r\n    var tempdata = this.data.list;\r\n    if (!tempdata.invoice_info.company) {\r\n      this.setData({\r\n        invoicenumber: ''\r\n      })\r\n    }\r\n    var str1 = tempdata.invoice_info.entity ? '[纸质] ' : '[电子] ';\r\n    var str2 = tempdata.invoice_info.title + ' ';\r\n    var str3 = tempdata.invoice_info.company ? '（单位: ' + tempdata.invoice_info.number + '）' : '（个人）';\r\n   \r\n    tempdata.invoicename = str1 + str2 + str3;\r\n    if (!tempdata.invoice_info.title) {\r\n      foxui.toast(this, \"请填写发票抬头\");\r\n    } else if (tempdata.invoice_info.company && !tempdata.invoice_info.number) {\r\n      foxui.toast(this, \"请填写税号\");\r\n    } else {\r\n      this.setData({\r\n        list: tempdata,\r\n        invoicepicker: false\r\n      })\r\n    }\r\n  },\r\n\r\n  // 选择会员卡\r\n  selectCard: function () {\r\n    var $this = this;\r\n    $this.setData({ selectcard: 'in' })\r\n  },\r\n\r\n  // 不使用会员卡\r\n  cancalCard: function () {\r\n    this.setData({ cardid: '' })\r\n  },\r\n\r\n  // 切换会员卡\r\n  changecard: function (e) {\r\n    var $this = this, card_info = $this.data.card_info;\r\n    $this.setData({ selectcard: '', cardid: e.currentTarget.dataset.id })\r\n    var id = e.currentTarget.dataset.id;\r\n\r\n    var args = {\r\n      cardid: id,\r\n      goodsprice: this.data.list.goodsprice,\r\n      dispatch_price: this.data.list.dispatch_price,\r\n      discountprice: this.data.list.discountprice\r\n    }\r\n    core.post('order/create/getcardprice', args, function (data) {\r\n      if (id != '') {\r\n        if (data.error == 0) {\r\n          var obj = {\r\n            carddiscount_rate: data.carddiscount_rate,\r\n            carddiscountprice: data.carddiscountprice,\r\n            cardid: data.cardid,\r\n            cardname: data.name,\r\n            dispatch_price: data.dispatch_price,\r\n            totalprice: data.totalprice,\r\n            comboprice: 0\r\n          }\r\n          $this.setData(obj);\r\n          $this.caculate($this.data.list);\r\n        } else {\r\n          core.alert(data.message);\r\n        }\r\n      } else {\r\n        var card_obj = {\r\n          cardid: '',\r\n          selectcard: '',\r\n          cardname: '',\r\n          carddiscountprice: 0,\r\n          ispackage: false\r\n        }\r\n        var comboprice = ($this.data.originalprice - $this.data.list.goodsprice).toFixed(2);\r\n        if ($this.data.options.goods) {\r\n          card_obj.ispackage = true;\r\n          card_obj.comboprice = comboprice;\r\n        }\r\n        $this.setData(card_obj);\r\n        if (!$.isEmptyObject($this.data.list)) {\r\n          $this.caculate($this.data.list);\r\n        }\r\n      }\r\n    }, true);\r\n\r\n  },\r\n\r\n  // 关闭选择会员卡弹窗\r\n  closeCardModal: function () {\r\n    var $this = this;\r\n    $this.setData({ selectcard: '' })\r\n  }\r\n});","/**\r\n *\r\n * order/pay/index.js\r\n *\r\n * @create 2017-1-12\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-12\r\n *\r\n */\r\nvar app=getApp(),core=app.requirejs('core'),$=app.requirejs('jquery');\r\nPage({\r\n    data: {\r\n        search: false,\r\n        show_distance:false\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n    },\r\n    onReady: function () { \r\n        // 页面渲染完成\r\n    },\r\n    onShow: function () { \r\n        // 页面显示\r\n      this.get_list();\r\n    },\r\n    onHide: function () {\r\n        // 页面隐藏\r\n    },\r\n    get_list: function () {\r\n      var $this = this;\r\n      var obj = { \r\n        ids: $this.data.options.ids, \r\n        type: $this.data.options.type, \r\n        merchid: $this.data.options.merchid \r\n      }; \r\n      wx.getSetting({\r\n        success: function (res) {  \r\n          var accredit = res.authSetting['scope.userLocation'];\r\n          if (accredit){\r\n            wx.getLocation({\r\n              type: 'wgs84',\r\n              success: function (res) { \r\n                obj.lat = res.latitude;\r\n                obj.lng = res.longitude;\r\n                $this.setData({ show_distance: true })\r\n                core.get('store/selector', obj, function (result) {\r\n                  $this.setData({ list: result.list, show: true });\r\n                });\r\n              },\r\n              fail: function (ret) {  \r\n                setTimeout(function () {\r\n                  core.toast(\"位置获取失败\");\r\n                }, 1000);\r\n                core.get('store/selector', obj, function (result) {\r\n                  $this.setData({ list: result.list, show: true });\r\n                });\r\n              }\r\n            })\r\n          }else{  \r\n            wx.authorize({\r\n              scope: 'scope.userLocation',\r\n              success: function () {\r\n                wx.getLocation({\r\n                  type: 'wgs84',\r\n                  success: function (res) { \r\n                    obj.lat = res.latitude;\r\n                    obj.lng = res.longitude;\r\n                    $this.setData({ show_distance: true })\r\n                    core.get('store/selector', obj, function (result) {\r\n                      $this.setData({ list: result.list, show: true });\r\n                    });\r\n                  },\r\n                  fail: function (ret) {  \r\n                    setTimeout(function () {\r\n                      core.toast(\"位置获取失败\");\r\n                    }, 1000);\r\n                    core.get('store/selector', obj, function (result) {\r\n                      $this.setData({ list: result.list, show: true });\r\n                    });\r\n                  }\r\n                })\r\n              },\r\n              fail: function (ret) { \r\n                \r\n                var accredit = res.authSetting['scope.userLocation'];\r\n                if (accredit){\r\n                  wx.showModal({\r\n                    title: '警告',\r\n                    content: '位置信息获取受限，请点击确定打开授权页面,在打开的页面中开启位置信息授权',\r\n                    success(res) {\r\n                      if (res.confirm) {\r\n                        wx.openSetting({\r\n                          success(res) {\r\n                            wx.navigateBack();\r\n                          }\r\n                        })\r\n                      }\r\n                      if (res.cancel) {\r\n                        app.close();\r\n                      }\r\n                    }\r\n                  })\r\n                } \r\n              }\r\n            })\r\n          }\r\n        }\r\n      });   \r\n    },\r\n    bindSearch: function (e) {\r\n        this.setData({\r\n            search: true\r\n        })\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    },\r\n    select: function (e) {\r\n        var index = core.pdata(e).index;\r\n        app.setCache(\"orderShop\", this.data.list[index], 30);\r\n        wx.navigateBack();\r\n    },\r\n    search: function (e) {\r\n        var val = e.detail.value,old_list=this.data.old_list,list=this.data.list,new_list=[];\r\n        if ($.isEmptyObject(old_list)){\r\n            old_list = list;\r\n        }\r\n        if (!$.isEmptyObject(old_list)){\r\n            $.each(old_list,function (index,item) {\r\n                if (item.storename.indexOf(val)!=-1){\r\n                    new_list.push(item);\r\n                }\r\n            })\r\n        }\r\n        this.setData({list:new_list,old_list:old_list});\r\n    }\r\n})","/**\r\n *\r\n * order/store/map.js\r\n *\r\n * @create 2017-1-16\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core');\r\nPage({\r\n    data: {\r\n        storeid: 0,\r\n        merchid:0,\r\n        markers: [],\r\n        store: {}\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({storeid: options.id,merchid:options.merchid});\r\n        this.getInfo();\r\n    },\r\n    getInfo: function () {\r\n        var $this = this;\r\n     \r\n        core.get('store/map', { id: this.data.storeid, merchid: this.data.merchid}, function (result) {\r\n            $this.setData({store: result.store,markers: [{id: 1, latitude: Number(result.store.lat), longitude: Number(result.store.lng)}],show:true});\r\n        });\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    }\r\n})","/**\r\n *\r\n * order/pay/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data: {\r\n        icons:app.requirejs('icons'),\r\n        success:false,\r\n        successData:{},\r\n\r\n        coupon: false\r\n    },\r\n    onLoad: function (options) {\r\n        var $this = this, goodslist = {};\r\n        this.setData({\r\n          options: options,\r\n          imgUrl: app.globalData.approot\r\n        });\r\n        app.url(options);\r\n    },\r\n    onShow:function () {\r\n        this.get_list();\r\n    },\r\n    get_list:function () {\r\n        var $this=this;\r\n        core.get('order/pay', $this.data.options, function (list) {\r\n            if (list.error == 50018) {\r\n                wx.navigateTo({\r\n                    url: '/pages/order/details/index?id='+$this.data.options.id\r\n                });\r\n                return;\r\n            }\r\n            if (!list.wechat.success && list.order.price != '0.00' && list.wechat.payinfo){\r\n                core.alert(list.wechat.payinfo.message + '\\n不能使用微信支付!');\r\n            }\r\n            $this.setData({\r\n                list: list,\r\n                show:true\r\n            });\r\n        });\r\n    },\r\n    pay: function (e) {\r\n        var $this = this;\r\n        var type = core.pdata(e).type,$this=this,wechat = this.data.list.wechat;\r\n        core.post('order/pay/checkstock', { id: $this.data.options.id }, function (check_json) {\r\n        if (check_json.error != 0) {\r\n          foxui.toast($this, check_json.message);\r\n          return;\r\n        }\r\n        if (type == 'wechat') {\r\n          core.pay(wechat.payinfo, function (res) {\r\n            if (res.errMsg == \"requestPayment:ok\") {\r\n              $this.complete(type)\r\n              // $this.setData({coupon: true})\r\n            }\r\n          });\r\n        } else if (type == 'credit') {\r\n          core.confirm('确认要支付吗?', function () {\r\n            $this.complete(type)\r\n            // $this.setData({ coupon: true })\r\n          }, function () {\r\n          })\r\n        } else if (type == 'cash') {\r\n          core.confirm('确认要使用货到付款吗?', function () {\r\n            $this.complete(type)\r\n            // $this.setData({ coupon: true })\r\n          }, function () {\r\n          })\r\n        } else {\r\n          $this.complete(type)\r\n          // $this.setData({ coupon: true })\r\n        }\r\n      }, true, true) \r\n    },\r\n    complete: function (type) {\r\n        var $this = this;\r\n        core.post('order/pay/complete', {id: $this.data.options.id, type: type}, function (pay_json) {\r\n            if (pay_json.error == 0) {\r\n                wx.setNavigationBarTitle({title: '支付成功'});\r\n                var ordervirtualtype = Array.isArray(pay_json.ordervirtual);\r\n                $this.setData({\r\n                    success: true,\r\n                    successData: pay_json,\r\n                    order: pay_json.order,\r\n                    ordervirtual: pay_json.ordervirtual,\r\n                    ordervirtualtype\r\n                });\r\n                return\r\n            }\r\n            foxui.toast($this,pay_json.message)\r\n        }, true, true)\r\n    },\r\n    shop:function(e){\r\n        var send = core.pdata(e).id;\r\n        if(send==0){\r\n            this.setData({ shop:1 });\r\n        }else{\r\n            this.setData({ shop:0 });\r\n        }\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    },\r\n\r\n    closecoupon: function(){\r\n      this.setData({ coupon: false})\r\n    }\r\n});","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n      route: \"member\",\r\n      icons: app.requirejs('icons'),\r\n      member:{},\r\n      diypages:{},\r\n      audios: {},\r\n      audiosObj:{},\r\n      modelShow: false, \r\n      //轮播\r\n      autoplay: true,\r\n      interval: 5000,\r\n      duration: 500,\r\n      swiperheight:0,\r\n      iscycelbuy:false,\r\n      bargain:false,\r\n      result: {}\r\n    },\r\n    onLoad: function (options) {\r\n      app.checkAuth();\r\n      var $this = this;\r\n      $this.setData({ options: options });\r\n    },\r\n    getInfo: function(){\r\n        var $this = this;\r\n        core.get('member', {}, function(result){\r\n          if (result.isblack == 1){\r\n            wx.showModal({\r\n              title: '无法访问',\r\n              content: '您在商城的黑名单中，无权访问！',\r\n              success: function (res) {\r\n                if (res.confirm) {\r\n                  $this.close()\r\n                }\r\n                if (res.cancel){\r\n                  $this.close()\r\n                }\r\n              }\r\n            })\r\n          }\r\n            if(result.error!=0){\r\n              // $this.setData({ modelShow: true });\r\n                wx.redirectTo({\r\n                  url: '/pages/message/auth/index'\r\n                })\r\n            }else{\r\n              $this.setData({\r\n                member: result, \r\n                show: true, \r\n                customer: result.customer, \r\n                customercolor: result.customercolor || '', \r\n                phone: result.phone, \r\n                phonecolor: result.phonecolor || '', \r\n                phonenumber: result.phonenumber || '', \r\n                iscycelbuy: result.iscycelbuy,\r\n                bargain:result.bargain\r\n              });\r\n            }\r\n            parser.wxParse('wxParseData','html', result.copyright,$this,'5');\r\n        });\r\n    },\r\n    onShow: function(){\r\n      app.checkAuth();\r\n      var $this = this;\r\n      this.getInfo();      \r\n      wx.getSystemInfo({\r\n        success: function (result) {\r\n          var swiperheight = result.windowWidth / 1.7\r\n          $this.setData({\r\n            windowWidth: result.windowWidth,\r\n            windowHeight: result.windowHeight,\r\n            swiperheight: swiperheight\r\n          });\r\n        }\r\n      });\r\n      // 店铺装修 会员中心\r\n      $this.setData({\r\n        imgUrl: app.globalData.approot\r\n      });\r\n      diypage.get(this, 'member', function (res) { });\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    },\r\n  imagesHeight: function (e) {\r\n    var width = e.detail.width, height = e.detail.height, type = e.target.dataset.type, $this = this;\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        $this.data.result[type] = res.windowWidth / width * height;\r\n        if (!$this.data[type] || ($this.data[type] && result[type] < $this.data[type])) {\r\n          $this.setData({ result: $this.data.result });\r\n        }\r\n      }\r\n    });\r\n  },\r\n    \r\n    /*用户授权-取消*/\r\n    cancelclick:  function(){\r\n   \t  wx.switchTab({\r\n          url: '/pages/index/index'\r\n  \t  })\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      // this.setData({modelShow: false})\r\n      wx.openSetting({\r\n        success: function (res) { }\r\n      })\r\n    },\r\n    phone: function () {\r\n      var phoneNumber = this.data.phonenumber + ''\r\n      wx.makePhoneCall({\r\n        phoneNumber: phoneNumber\r\n      })\r\n    },\r\n    play: function (e) {\r\n      var item_id = e.target.dataset.id;\r\n      var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n      if (!innerAudioContext) {\r\n        innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n        var audiosObj = this.data.audiosObj;\r\n        audiosObj[item_id] = innerAudioContext;\r\n        this.setData({\r\n          audiosObj: audiosObj\r\n        })\r\n      }\r\n      var $this = this;\r\n      innerAudioContext.onPlay(() => {\r\n        var Time = setInterval(function () {\r\n          var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n          var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n          var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n          var seconds = Math.ceil(innerAudioContext.currentTime)\r\n          var audioicon = ''\r\n          if (minute < 10) {\r\n            minute = \"0\" + minute;\r\n          }\r\n          var time = minute + \":\" + second;\r\n          var audios = $this.data.audios;\r\n          audios[item_id].audiowidth = width;\r\n          audios[item_id].Time = Time;\r\n          audios[item_id].audiotime = time;\r\n          audios[item_id].seconds = seconds;\r\n          $this.setData({ audios: audios })\r\n        }, 1000)\r\n      })\r\n\r\n      var src = e.currentTarget.dataset.audio;\r\n      var time = e.currentTarget.dataset.time;\r\n      var pausestop = e.currentTarget.dataset.pausestop;\r\n      var loopplay = e.currentTarget.dataset.loopplay;\r\n      if (loopplay == 0) {\r\n        innerAudioContext.onEnded((res) => {\r\n          audios[item_id].status = false;\r\n          $this.setData({ audios: audios })\r\n        })\r\n      }\r\n      var audios = $this.data.audios;\r\n      \r\n      if (!audios[item_id]) {\r\n        audios[item_id] = {};\r\n      }\r\n      if (innerAudioContext.paused && time == 0) {\r\n        innerAudioContext.src = src;\r\n        innerAudioContext.play();\r\n        if (loopplay == 1) {\r\n          innerAudioContext.loop = true;\r\n        }\r\n        audios[item_id].status = true;\r\n        $this.pauseOther(item_id)\r\n\r\n      } else if (innerAudioContext.paused && time > 0) {\r\n        innerAudioContext.play();\r\n        if (pausestop == 0) {\r\n          innerAudioContext.seek(time);\r\n        } else {\r\n          innerAudioContext.seek(0);\r\n        }\r\n        audios[item_id].status = true;\r\n        $this.pauseOther(item_id)\r\n      }\r\n      else {\r\n        innerAudioContext.pause();\r\n        audios[item_id].status = false;\r\n      }\r\n      $this.setData({ audios: audios })\r\n    },\r\n    pauseOther: function (item_id) {\r\n      var $this = this;\r\n      $.each(this.data.audiosObj, function (id, obj) {\r\n        if (id == item_id) {\r\n          return;\r\n        }\r\n        obj.pause();\r\n        var audios = $this.data.audios;\r\n        if (audios[id]) {\r\n          audios[id].status = false;\r\n          $this.setData({ audios: audios });\r\n        }\r\n      });\r\n    },\r\n    /**\r\n * 生命周期函数--监听页面隐藏\r\n */\r\n    onHide: function () {\r\n      this.pauseOther();\r\n      // this.setData({ modelShow: false })\r\n    },\r\n\r\n    /**\r\n     * 生命周期函数--监听页面卸载\r\n     */\r\n    onUnload: function () {\r\n      this.pauseOther();\r\n    },\r\n    navigate: function (e) {\r\n      var url = e.currentTarget.dataset.url\r\n      var phone = e.currentTarget.dataset.phone\r\n      var appid = e.currentTarget.dataset.appid\r\n      var appurl = e.currentTarget.dataset.appurl\r\n      if (url) {\r\n        wx.navigateTo({\r\n          url: url,\r\n          fail: function () {\r\n            wx.switchTab({\r\n              url: url,\r\n        })\r\n      }\r\n        })\r\n      }\r\n      if (phone) {\r\n        wx.makePhoneCall({\r\n          phoneNumber: phone\r\n        })\r\n      }\r\n      if (appid) {\r\n        wx.navigateToMiniProgram({\r\n          appId: appid,\r\n          path: appurl\r\n        })\r\n      }\r\n    },\r\n    close: function () {\r\n      app.globalDataClose.flag = true;\r\n      wx.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n});","/**\r\n *\r\n * member\\info\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        member: {},\r\n        diyform: {},\r\n        postData: {},\r\n        openbind: false,\r\n        index: 0,\r\n        submit: false,\r\n\r\n        showPicker: false,\r\n        pvalOld: [0,0,0],\r\n        pval: [0,0,0],\r\n        areas: [],\r\n        noArea: true\r\n    },\r\n    onLoad: function (options) {\r\n    \tapp.url(options);\r\n    \tvar $this = this;\r\n    \tsetTimeout(function(){\r\n    \t\t$this.setData({areas: app.getCache(\"cacheset\").areas});\r\n    \t},1000)\r\n    },\r\n    onShow: function () {\r\n        this.getInfo();\r\n    },\r\n    getInfo: function () {\r\n        var $this = this;\r\n        core.get('member/info', {}, function(result){\r\n            var member = result.member;\r\n            var data = {member: member,diyform: result.diyform, openbind: result.openbind,show:true};\r\n            if(result.diyform.template_flag==0){\r\n                data.postData = {realname: member.realname, mobile: member.mobile, weixin: member.weixin, birthday: member.birthday, city: member.city};\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    onChange: function (event) {\r\n        var value = event.detail.value;\r\n        var type = core.pdata(event).type;\r\n        var postData = this.data.postData;\r\n        postData[type] = $.trim(value);\r\n        this.setData({postData: postData});\r\n    },\r\n    DiyFormHandler: function(e){\r\n        return diyform.DiyFormHandler(this, e)\r\n    },\r\n    submit: function () {\r\n        if(this.data.submit){\r\n            return;\r\n        }\r\n        var $this = this;\r\n        var data = $this.data;\r\n        var diydata = data.diyform;\r\n        if(diydata.template_flag==0){\r\n            if(!data.postData.realname){\r\n                foxui.toast($this, \"请填写姓名\");\r\n                return;\r\n            }\r\n            if(!$.isMobile(data.postData.mobile) && !data.openbind){\r\n                foxui.toast($this, \"请填写正确手机号码\");\r\n                return;\r\n            }\r\n        }else{\r\n            var verify = diyform.verify(this, diydata);\r\n            if(!verify){\r\n                return;\r\n            }\r\n        }\r\n        $this.setData({submit: true});\r\n        var postData = {memberdata: data.postData};\r\n        if(diydata.template_flag){\r\n            postData.memberdata = diydata.f_data;\r\n        }\r\n\r\n        core.post('member/info/submit', postData, function(result){\r\n            if(result.error!=0){\r\n                foxui.toast($this, result.message);\r\n                return;\r\n            }\r\n            $this.setData({submit: false});\r\n            foxui.toast($this, \"修改成功\");\r\n            setTimeout(function () {\r\n                wx.navigateBack();\r\n            }, 500);\r\n        });\r\n    },\r\n\r\n    selectArea: function (e) {\r\n        return diyform.selectArea(this, e)\r\n    },\r\n    bindChange: function(e) {\r\n        return diyform.bindChange(this, e)\r\n    },\r\n    onCancel: function (e) {\r\n        return diyform.onCancel(this, e)\r\n    },\r\n    onConfirm: function (e) {\r\n        if(!this.data.diyform.template_flag){\r\n            var val = this.data.pval;\r\n            var areas = this.data.areas;\r\n            var postData = this.data.postData;\r\n            postData.city = areas[val[0]].name+\" \"+areas[val[0]].city[val[1]].name;\r\n            this.setData({postData: postData, showPicker: false});\r\n        }else{\r\n            return diyform.onConfirm(this, e)\r\n        }\r\n    },\r\n    getIndex: function (str, areas) {\r\n        return diyform.getIndex(str, areas)\r\n    }\r\n})\r\n","/**\r\n *\r\n * bind\\index.js\r\n *\r\n * @create 2017-01-11\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-12\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        member: {},\r\n        binded: false,\r\n        endtime: 0,\r\n        postData: {},\r\n        submit: false,\r\n        subtext: \"立即绑定\",\r\n        smsimgcode:'',\r\n        verifycode_img:''\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        core.loading();\r\n        this.getInfo();\r\n    },\r\n    getInfo: function () {\r\n        var $this = this,title;\r\n        core.get('member/bind', {}, function(result){\r\n            if(result.error){\r\n                wx.redirectTo({url: \"/pages/member/index/index\"});\r\n                return;\r\n            }\r\n            var data = { member: result.member, binded: result.binded, endtime: result.endtime, show: true, smsimgcode: result.smsimgcode, verifycode_img: result.verifycode_img};\r\n            data.postData = {mobile: result.member.mobile, code: '', password: '', password1: ''};\r\n            $this.setData(data);\r\n            if(result.endtime>0){\r\n                $this.endTime();\r\n            }\r\n            if(result.binded){\r\n                title = \"更换绑定手机号\";\r\n            }else{\r\n                title = \"绑定手机号\";\r\n            }\r\n            wx.setNavigationBarTitle({title: title});\r\n        }, true, true, true);\r\n    },\r\n    endTime: function () {\r\n        var $this = this;\r\n        var endtime = $this.data.endtime;\r\n        if(endtime>0){\r\n            $this.setData({endtime: endtime-1});\r\n            var end = setTimeout(function () {\r\n                $this.endTime();\r\n            },1000);\r\n        }\r\n        return;\r\n    },\r\n    inputChange: function (event) {\r\n        var postData = this.data.postData;\r\n        var type = core.pdata(event).type;\r\n        var value = event.detail.value;\r\n        postData[type] = $.trim(value);\r\n        this.setData({postData: postData});\r\n    },\r\n    getCode: function (event) {\r\n        var $this = this;\r\n        if($this.data.endtime>0){\r\n            return;\r\n        }\r\n        var mobile = $this.data.postData.mobile;\r\n        if(!$.isMobile(mobile)){\r\n            foxui.toast($this, \"请填写正确的手机号\");\r\n            return;\r\n        }\r\n\r\n        if ($this.data.smsimgcode == 1){\r\n          var verifyImg = $this.data.postData.verifyImg;\r\n          if (verifyImg == undefined){\r\n            foxui.toast($this, \"请填写图形验证码\");\r\n            return;\r\n          }\r\n\r\n        }\r\n\r\n        core.get('sms/changemobile', { mobile: mobile, verifyImgCode: verifyImg, smsimgcode: $this.data.smsimgcode}, function(result){\r\n            if(result.error!=0){\r\n                foxui.toast($this, result.message);\r\n                return;\r\n            }\r\n            foxui.toast($this, \"短信发送成功\");\r\n            $this.setData({endtime: 60});\r\n            $this.endTime();\r\n            return;\r\n        }, true, true, true);\r\n    },\r\n    submit: function (event) {\r\n        if(this.data.submit){\r\n            return;\r\n        }\r\n        var $this = this;\r\n        var postData = this.data.postData;\r\n        if(!$.isMobile(postData.mobile)){\r\n            foxui.toast(this, \"请填写正确的手机号\");\r\n            return;\r\n        }\r\n        if(postData.code.length!=5){\r\n            foxui.toast(this, \"请填写5位短信验证码\");\r\n            return;\r\n        }\r\n        if(!postData.password || postData.password==''){\r\n            foxui.toast(this, \"请填写登录密码\");\r\n            return;\r\n        }\r\n        if(!postData.password1 || postData.password1==''){\r\n            foxui.toast(this, \"请确认登录密码\");\r\n            return;\r\n        }\r\n        if(postData.password != postData.password1){\r\n            foxui.toast(this, \"两次输入的密码不一致\");\r\n            return;\r\n        }\r\n        this.setData({submit: true, subtext: \"正在绑定...\"});\r\n\r\n        core.post('member/bind/submit', postData, function(ret){\r\n            if(ret.error==92001||ret.error==92002){\r\n                core.confirm(ret.message, function () {\r\n                    postData.confirm = 1;\r\n                    core.post('member/bind/submit', postData, function(ret2){\r\n                        if(ret2.error>0){\r\n                            foxui.toast($this, ret2.message);\r\n                        }else{\r\n                            wx.navigateBack();\r\n                        }\r\n                        $this.setData({submit: false, subtext: \"立即绑定\", \"postData.confirm\": 0});\r\n                    }, true, true, true);\r\n                })\r\n                return;\r\n            }\r\n            else if(ret.error!=0){\r\n                foxui.toast($this, ret.message);\r\n                $this.setData({submit: false, subtext: \"立即绑定\"});\r\n                return;\r\n            }\r\n            wx.navigateBack();\r\n        }, true, true, true);\r\n    },\r\n    imageChange:function(){\r\n      var $this = this;\r\n      core.get('member/bind/imageChange',{},function(result){\r\n         \r\n        $this.setData({ verifycode_img: result.verifycode_img});\r\n      });\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        isedit: false,\r\n        isCheckAll: false,\r\n        checkObj: {},\r\n        checkNum: 0,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getList();\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('member/favorite/get_list', {page: $this.data.page}, function (result) {\r\n            var data = {loading: false, loaded: true, total: result.total, pagesize: result.pagesize,show:true};\r\n            if (result.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    itemClick: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        var goodsid = core.pdata(event).goodsid;\r\n        if(!$this.data.isedit){\r\n            wx.navigateTo({url: '/pages/goods/detail/index?id='+goodsid});\r\n        }else{\r\n            var checkObj = $this.data.checkObj;\r\n            var checkNum = $this.data.checkNum\r\n            if(checkObj[id]){\r\n                checkObj[id] = false;\r\n                checkNum--;\r\n            }else{\r\n                checkObj[id] = true;\r\n                checkNum++;\r\n            }\r\n            var isCheckAll = true;\r\n            for (var i in checkObj){\r\n                if(!checkObj[i]){\r\n                    isCheckAll = false;\r\n                    break;\r\n                }\r\n            }\r\n            $this.setData({checkObj: checkObj, isCheckAll: isCheckAll, checkNum: checkNum});\r\n        }\r\n    },\r\n    btnClick: function (event) {\r\n        var $this = this;\r\n        var action = event.currentTarget.dataset.action;\r\n        if (action == 'edit') {\r\n            var checkObj = {};\r\n            for(var i in this.data.list){\r\n                var id = this.data.list[i].id;\r\n                checkObj[id] = false;\r\n            }\r\n            $this.setData({isedit: true, checkObj: checkObj, isCheckAll: false});\r\n        }\r\n        else if (action == 'delete') {\r\n            var checkObj = $this.data.checkObj;\r\n            var ids = [];\r\n            for (var i in checkObj){\r\n                if(checkObj[i]){\r\n                    ids.push(i);\r\n                }\r\n            }\r\n            if(ids.length<1){\r\n                return;\r\n            }\r\n            core.confirm(\"删除后不可恢复，确定要删除吗？\", function () {\r\n                core.post('member/favorite/remove', {ids: ids}, function (result) {\r\n                    $this.setData({isedit: false, checkNum: 0, page: 0, list: []});\r\n                    $this.getList();\r\n                });\r\n            });\r\n        }\r\n        else if (action == 'finish') {\r\n            $this.setData({isedit: false, checkNum: 0});\r\n        }\r\n    },\r\n    checkAllClick: function () {\r\n        var isCheckAll = this.data.isCheckAll?false:true;\r\n        var checkObj = this.data.checkObj;\r\n        var data = {isCheckAll: isCheckAll, checkObj: checkObj};\r\n        for(var i in checkObj){\r\n            data.checkObj[i] = isCheckAll?true:false;\r\n        }\r\n        data.checkNum = isCheckAll ? this.data.list.length :0;\r\n        this.setData(data);\r\n    }\r\n})","/**\r\n *\r\n * history\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        isedit: false,\r\n        isCheckAll: false,\r\n        checkObj: {},\r\n        checkNum: 0,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getList();\r\n    },\r\n    onShow: function(){\r\n      var isIpx = app.getCache('isIpx');\r\n      var $this = this;\r\n      if (isIpx) {\r\n        $this.setData({\r\n          isIpx: true,\r\n          iphonexnavbar: 'fui-iphonex-navbar',\r\n          paddingb: 'padding-b'\r\n        })\r\n      } else {\r\n        $this.setData({\r\n          isIpx: false,\r\n          iphonexnavbar: '',\r\n          paddingb: ''\r\n        })\r\n      }\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('member/history/get_list', {page: $this.data.page}, function (result) {\r\n            var data = {loading: false, loaded: true, total: result.total, pagesize: result.pagesize,show:true};\r\n            if (result.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    itemClick: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        var goodsid = core.pdata(event).goodsid;\r\n        if (!$this.data.isedit) {\r\n            wx.navigateTo({url: '/pages/goods/detail/index?id=' + goodsid});\r\n        } else {\r\n            var checkObj = $this.data.checkObj;\r\n            var checkNum = $this.data.checkNum\r\n            if (checkObj[id]) {\r\n                checkObj[id] = false;\r\n                checkNum--;\r\n            } else {\r\n                checkObj[id] = true;\r\n                checkNum++;\r\n            }\r\n            var isCheckAll = true;\r\n            for (var i in checkObj) {\r\n                if (!checkObj[i]) {\r\n                    isCheckAll = false;\r\n                    break;\r\n                }\r\n            }\r\n            $this.setData({checkObj: checkObj, isCheckAll: isCheckAll, checkNum: checkNum});\r\n        }\r\n    },\r\n    btnClick: function (event) {\r\n        var $this = this;\r\n        var action = event.currentTarget.dataset.action;\r\n        if (action == 'edit') {\r\n            var checkObj = {};\r\n            for (var i in this.data.list) {\r\n                var id = this.data.list[i].id;\r\n                checkObj[id] = false;\r\n            }\r\n            $this.setData({isedit: true, checkObj: checkObj, isCheckAll: false});\r\n        }\r\n        else if (action == 'delete') {\r\n            var checkObj = $this.data.checkObj;\r\n            var ids = [];\r\n            for (var i in checkObj) {\r\n                if (checkObj[i]) {\r\n                    ids.push(i);\r\n                }\r\n            }\r\n            if (ids.length < 1) {\r\n                return;\r\n            }\r\n            core.confirm(\"删除后不可恢复，确定要删除吗？\", function () {\r\n                core.post('member/history/remove', {ids: ids}, function (result) {\r\n                    $this.setData({isedit: false, checkNum: 0, page: 0, list: []});\r\n                    $this.getList();\r\n                });\r\n            });\r\n        }\r\n        else if (action == 'finish') {\r\n            $this.setData({isedit: false, checkNum: 0});\r\n        }\r\n    },\r\n    checkAllClick: function () {\r\n        var isCheckAll = this.data.isCheckAll ? false : true;\r\n        var checkObj = this.data.checkObj;\r\n        var data = {isCheckAll: isCheckAll, checkObj: checkObj};\r\n        for (var i in checkObj) {\r\n            data.checkObj[i] = isCheckAll ? true : false;\r\n        }\r\n        data.checkNum = isCheckAll ? this.data.list.length : 0;\r\n        this.setData(data);\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  Young 2017-01-18\r\n *\r\n */\r\nvar app=getApp(),core = app.requirejs('core'),$=app.requirejs('jquery');\r\nPage({\r\n    data: {\r\n        disabled: true,\r\n        coupon: {\r\n            count: 0\r\n        }\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    onShow: function () {\r\n        var coupon = app.getCache(\"coupon\");\r\n        this.setData({\"coupon.id\": coupon.id, \"coupon.name\": coupon.name||''});\r\n    },\r\n    get_list: function () {\r\n        var $this=this;\r\n        core.get('member/recharge',{},function (json) {\r\n            json.show = true;\r\n            $this.setData(json)\r\n        });\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id,type=data.type,d={};\r\n        (id == 0 || typeof id =='undefined') ? d[type] = 1 : d[type] = 0;\r\n        this.setData(d);\r\n    },\r\n    money: function (e) {\r\n     \r\n      var disabled = true, money = $.trim(e.detail.value), $this = this;\r\n      if (money>=this.data.minimumcharge){\r\n            disabled = false;\r\n        }\r\n        core.get('sale/coupon/query',{type:1, money: money},function (ret) {\r\n            $this.setData({money: money,disabled:disabled, coupon: {id:0,name:'',count:ret.count}});\r\n        });\r\n    },\r\n    submit: function () {\r\n        var money = $.toFixed(this.data.money,2),data={};\r\n        if (this.data.disabled){\r\n            return;\r\n        }\r\n        if (typeof money == 'undefined' || isNaN(money)){\r\n            core.alert('请填写正确的充值金额!');\r\n            return;\r\n        }\r\n        if (money<=0 || this.data.disabled){\r\n            core.alert('最低充值金额为'+this.data.minimumcharge+'元!');\r\n            return;\r\n        }\r\n        data.money = money;\r\n        data.type = 'wechat';\r\n        data.couponid = this.data.coupon.id;\r\n        core.post('member/recharge/submit',data,function (json) {\r\n            if (json.error==0){\r\n                if (json.wechat.success){\r\n                    core.pay(json.wechat.payinfo,function (res) {\r\n                        if (res.errMsg == \"requestPayment:ok\"){\r\n                            core.post('member/recharge/wechat_complete',{logid:json.logid},function (js) {\r\n                                if (js.error==0){\r\n                                    wx.navigateBack();\r\n                                }else{\r\n                                    core.alert(js.message);\r\n                                }\r\n                            },true)\r\n                        }\r\n                    })\r\n                }else{\r\n                    core.alert(list.wechat.payinfo.message + '\\n不能使用微信支付!')\r\n                }\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    }\r\n});","/**\r\n *\r\n * withdraw\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        loading: true,\r\n        objectArray: [],\r\n        checkedIndex: 1,\r\n        checked: {},\r\n        bankChecked: {},\r\n        money: 0,\r\n        chargeShow: false,\r\n        disabled: true,\r\n        info: {},\r\n        realInfo: {}\r\n    },\r\n    onShow: function (options) {\r\n        app.url(options);\r\n        this.getInfo();\r\n        this.setData({isSubmit: false});\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getInfo: function () {\r\n        var $this = this;\r\n        core.get('member/withdraw', {}, function (result) {\r\n          // result.type_array.push({ type: 0, title: \"提现到微信余额\"});\r\n            var data = {info: result, objectArray: [],show:true};\r\n            if(!$.isEmptyObject(result.last_data)){\r\n                data.realInfo = {alipay: result.last_data.alipay, alipay1: result.last_data.alipay, bankcard: result.last_data.bankcard, bankcard1: result.last_data.bankcard, bankname: result.last_data.bankname, realname: result.last_data.realname};\r\n            }\r\n            if(result.type_array){\r\n                $.each(result.type_array, function (index,val) {\r\n                    data.objectArray.push({id: val.type, name: val.title})\r\n                    if(val.checked){\r\n                        if(!data.checked){\r\n                            data.checked = {id: val.type, name: val.title};\r\n                        }\r\n                        data.checkedIndex = index;\r\n                    }\r\n                });\r\n            }\r\n            if(!data.checked){\r\n                data.checked = data.objectArray[0];\r\n                data.checkedIndex = 0;\r\n            }\r\n            data.bankCheckedIndex = result.lastbankindex||0;\r\n            $this.setData(data);\r\n            if(result.withdrawmoney>0 && result.credit>=result.withdrawmoney){\r\n                data.money = result.withdrawmoney;\r\n                $this.moneyChange({detail: {value: result.withdrawmoney}});\r\n            }\r\n            if(data.checked.id==3){\r\n                $this.bankChange({detail: {value: result.lastbankindex||0}});\r\n            }\r\n            wx.setNavigationBarTitle({title: result.moneytext+\"提现\"})\r\n        });\r\n    },\r\n    bindAll: function (event) {\r\n        if(this.data.info.credit<=0){\r\n            return;\r\n        }\r\n        this.setData({money: this.data.info.credit});\r\n        this.allow();\r\n        this.moneyChange({detail: {value: this.data.info.credit}});\r\n    },\r\n    allow: function () {\r\n        var info = this.data.info;\r\n        var money = parseFloat(this.data.money);\r\n        if(money<=0 || isNaN(money)){\r\n            return false;\r\n        }\r\n        if(info.withdrawmoney>0 && money<info.withdrawmoney){\r\n            return false;\r\n        }\r\n        if(money>info.credit){\r\n            return false;\r\n        }\r\n        if ($.isEmptyObject(this.data.checked)){\r\n            return false;\r\n        }\r\n        if (info.withdrawcharge>0 && money>0) {\r\n            var deductionmoney = money / 100 * info.withdrawcharge;\r\n            deductionmoney = Math.round(deductionmoney*100)/100;\r\n            if (deductionmoney >= info.withdrawbegin && deductionmoney <= info.withdrawend) {\r\n                deductionmoney = 0;\r\n            }\r\n            var realmoney = money - deductionmoney;\r\n            realmoney = Math.round(realmoney*100)/100;\r\n            this.setData({deductionmoney: deductionmoney, realmoney: realmoney, chargeShow: true})\r\n        }\r\n        return true;\r\n    },\r\n    moneyChange: function (event) {\r\n        var money = event.detail.value;\r\n        if(money<0 || isNaN(money)){\r\n            money = 0;\r\n        }\r\n        this.setData({money: money});\r\n        this.setData({disabled: this.allow()?false:true})\r\n    },\r\n   \r\n    typeChange: function (e) {\r\n      \r\n      var data = {};\r\n      var index = e.currentTarget.dataset.name;\r\n        data.checked = this.data.objectArray[index];\r\n        if(data.checked.id==3){\r\n            data.bankChecked = this.data.info.banklist[0];\r\n            data.bankCheckedIndex = 0;\r\n        }\r\n        this.setData(data);\r\n    },\r\n    inputChange: function (event) {\r\n        var realinfo = this.data.realInfo;\r\n        var bindtype = event.currentTarget.dataset.type;\r\n        var value = $.trim(event.detail.value);\r\n        realinfo[bindtype]=value;\r\n        this.setData({realInfo: realinfo});\r\n    },\r\n    bankChange: function (event) {\r\n        var index=$.trim(event.detail.value), bank=this.data.info.banklist[index];\r\n        this.setData({bankChecked: bank});\r\n    },\r\n    submit: function (event) {\r\n        var $this=this, data=this.data;\r\n        if(data.disabled || data.isSubmit){\r\n            return;\r\n        }\r\n        if(data.money<=0){\r\n            foxui.toast($this, \"请填写提现金额\");\r\n            return;\r\n        }\r\n        if($.isEmptyObject(data.checked)){\r\n            foxui.toast($this, \"请选择提现方式\");\r\n            return;\r\n        }\r\n        var html = data.checked.name;\r\n        var postData = {applytype: data.checked.id, money: data.money};\r\n        if(data.checked.id==2){\r\n            if(!data.realInfo.realname){\r\n                foxui.toast($this, \"请填写姓名\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.alipay){\r\n                foxui.toast($this, \"请填写支付宝帐号\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.alipay1){\r\n                foxui.toast($this, \"请确认支付宝帐号\");\r\n                return;\r\n            }\r\n            if(data.realInfo.alipay != data.realInfo.alipay1){\r\n                foxui.toast($this, \"两次填写的支付宝不一致\");\r\n                return;\r\n            }\r\n            html += \"？姓名:\" + data.realInfo.realname + \" 支付宝帐号:\" + data.realInfo.alipay;\r\n            postData.realname = data.realInfo.realname;\r\n            postData.alipay = data.realInfo.alipay;\r\n            postData.alipay1 = data.realInfo.alipay1;\r\n        }\r\n        else if(data.checked.id==3){\r\n            if($.isEmptyObject(data.bankChecked)){\r\n                foxui.toast($this, \"请选择提现银行\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.realname){\r\n                foxui.toast($this, \"请填写姓名\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.bankcard){\r\n                foxui.toast($this, \"请填写银行卡号\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.bankcard1){\r\n                foxui.toast($this, \"请确认银行卡号\");\r\n                return;\r\n            }\r\n            if(data.realInfo.bankcard != data.realInfo.bankcard1){\r\n                foxui.toast($this, \"两次填写的银行卡号不一致\");\r\n                return;\r\n            }\r\n            html += \"？姓名:\" + data.realInfo.realname + \" 银行:\" + data.bankChecked.bankname + \" 卡号:\" + data.realInfo.bankcard;\r\n            postData.realname = data.realInfo.realname;\r\n            postData.bankname = data.bankChecked.bankname;\r\n            postData.bankcard = data.realInfo.bankcard;\r\n            postData.bankcard1 = data.realInfo.bankcard1;\r\n        }\r\n        if (data.checked.id < 2) {\r\n            var confirm_msg = '确认要' + html + \"？\";\r\n        } else {\r\n            var confirm_msg = '确认要' + html;\r\n        }\r\n        if (data.info.withdrawcharge > 0) {\r\n            confirm_msg += ' 扣除手续费 ' + data.deductionmoney + ' 元,实际到账金额 ' + data.realmoney + ' 元';\r\n        }\r\n        core.confirm(confirm_msg, function () {\r\n            $this.setData({isSubmit: true});\r\n            core.post('member/withdraw/submit', postData, function (result) {\r\n                if(result.error){\r\n                    foxui.toast($this, result.message);\r\n                    $this.setData({isSubmit: false});\r\n                    return;\r\n                }\r\n                foxui.toast($this, \"提现申请成功，请等待审核\");\r\n                setTimeout(function () {\r\n                    wx.navigateTo({url: '/pages/member/log/index?type=1'});\r\n                }, 500);\r\n            });\r\n        });\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        type: 0,\r\n        isopen: false,\r\n        page: 1,\r\n        loaded: false,\r\n        loading: true,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        if(options.type>0){\r\n            this.setData({type: 1});\r\n        }\r\n        app.url(options);\r\n        this.getList();\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    onReachBottom:function(){\r\n        if(this.data.loaded || this.data.list.length==this.data.total){\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading:true});\r\n        core.get('member/log/get_list', {type: $this.data.type, page: $this.data.page}, function(result){\r\n            var data = {loading: false, total: result.total,show:true};\r\n            if($this.data.page==1){\r\n                data.isopen = result.isopen;\r\n                var title = \"充值记录\";\r\n                if (result.isopen==1){\r\n                    title = result.moneytext +\"明细\"\r\n                }\r\n                wx.setNavigationBarTitle({title: title})\r\n            }\r\n            if(!result.list){\r\n                result.list = [];\r\n            }\r\n            if(result.list.length>0){\r\n                data.page = $this.data.page+1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    myTab: function (event) {\r\n        var $this = this;\r\n        var type = core.pdata(event).type;\r\n        $this.setData({type: type, page: 1, list: [], loading: true});\r\n        $this.getList();\r\n    }\r\n})","/**\r\n *\r\n * address\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        loaded: false,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n    },\r\n    onShow: function () {\r\n        this.getList();\r\n        var $this = this;\r\n        var isIpx = app.getCache('isIpx');\r\n        if (isIpx) {\r\n          $this.setData({\r\n            isIpx: true,\r\n            iphonexnavbar: 'fui-iphonex-navbar',\r\n            paddingb: 'padding-b'\r\n          })\r\n        } else {\r\n          $this.setData({\r\n            isIpx: false,\r\n            iphonexnavbar: '',\r\n            paddingb: ''\r\n          })\r\n        }\r\n    },\r\n    onPullDownRefresh: function(){\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        core.get('member/address/get_list',{}, function(result){\r\n            $this.setData({loaded: true, list: result.list,show:true});\r\n        });\r\n    },\r\n    setDefault: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        $this.setData({loaded: false});\r\n        core.get('member/address/set_default',{id: id}, function(result){\r\n            core.toast(\"设置成功\");\r\n            $this.getList();\r\n        });\r\n    },\r\n    deleteItem: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        core.confirm(\"删除后无法恢复, 确认要删除吗 ?\", function () {\r\n            $this.setData({loaded: false});\r\n            core.get('member/address/delete',{id : id}, function(result){\r\n                core.toast(\"删除成功\");\r\n                $this.getList();\r\n            });\r\n        });\r\n    }\r\n})","/**\r\n *\r\n * address\\post.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-18\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar fui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        id: null,\r\n        posting:false,\r\n        subtext: \"保存地址\",\r\n        detail: {\r\n            realname: '',\r\n            mobile: '',\r\n            areas: '',\r\n            street: '',\r\n            address: ''\r\n        },\r\n        showPicker: false,\r\n        pvalOld: [0,0,0],\r\n        pval: [0,0,0],\r\n        areas: [],  // 原始数据\r\n        street: [],\r\n        streetIndex: 0,\r\n        noArea: false\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({id: Number(options.id)});\r\n        app.url(options);\r\n        this.getDetail();\r\n        if(!options.id){\r\n            wx.setNavigationBarTitle({title: '添加收货地址'})\r\n        }\r\n        //处理一个客户切换新版地址库之后 无法清除地址库缓存的问题\r\n       \r\n        this.setData({areas: app.getCache(\"cacheset\").areas,type:options.type});\r\n    },\r\n    getDetail: function () {\r\n        var $this = this;\r\n        var id = $this.data.id;\r\n        core.get('member/address/get_detail',{id :id}, function(result){\r\n            var data = {openstreet: result.openstreet,show:true};\r\n            if(!$.isEmptyObject(result.detail)){\r\n                wx.setNavigationBarTitle({title: '编辑收货地址'});\r\n                var area = result.detail.province+\" \"+result.detail.city+\" \"+result.detail.area;\r\n                var index = $this.getIndex(area, $this.data.areas);\r\n                data.pval = index;\r\n                data.pvalOld = index;\r\n                data.detail = result.detail;\r\n            }\r\n            $this.setData(data);\r\n            if(result.openstreet && index){\r\n                $this.getStreet($this.data.areas, index);\r\n            }\r\n        });\r\n    },\r\n    submit: function () {\r\n        var $this = this;\r\n        var detail = $this.data.detail;\r\n        if($this.data.posting){\r\n            return;\r\n        }\r\n        if(detail.realname=='' || !detail.realname){\r\n            fui.toast($this, \"请填写收件人\");\r\n            return;\r\n        }if(detail.mobile=='' || !detail.mobile){\r\n            fui.toast($this, \"请填写联系电话\");\r\n            return;\r\n        }\r\n        if(detail.city=='' || !detail.city){\r\n            fui.toast($this, \"请选择所在地区\");\r\n            return;\r\n        }\r\n        if($this.data.street.length>0 && (detail.street=='' || !detail.street)){\r\n            fui.toast($this, \"请选择所在街道\");\r\n            return;\r\n        }\r\n        if(detail.address=='' || !detail.address){\r\n            fui.toast($this, \"请填写详细地址\");\r\n            return;\r\n        }\r\n\r\n        if(!detail.datavalue){\r\n            fui.toast($this, \"地址数据出错，请重新选择\");\r\n            return;\r\n        }\r\n        // 手机号验证更换为大陆港澳台地区都适用\r\n        if (!/^[1][3-9]\\d{9}$|^([6|9])\\d{7}$|^[0][9]\\d{8}$|^[6]([8|6])\\d{5}$/.test(detail.mobile)){\r\n          fui.toast($this, \"请填写正确联系电话\");\r\n          return;\r\n        }\r\n        detail.id = $this.data.id;\r\n        $this.setData({posting: true});\r\n        core.post('member/address/submit', detail, function(result){\r\n            if(result.error!=0){\r\n                $this.setData({posting: false});\r\n                fui.toast($this, result.message);\r\n                return;\r\n            }\r\n            $this.setData({subtext: \"保存成功\"});\r\n            core.toast(\"保存成功\");\r\n            setTimeout(function () {\r\n              detail.id = result.addressid;              \r\n                \r\n                  if ($this.data.type == 'member'){\r\n                     wx.navigateBack();\r\n                  } if ($this.data.type == 'quickaddress') {\r\n                    app.setCache(\"orderAddress\", detail, 30);\r\n                    wx.navigateBack();\r\n                  }else{\r\n                     wx.redirectTo({\r\n                         url:'/pages/member/address/select'\r\n                  });\r\n                }\r\n            }, 1000);\r\n        });\r\n    },\r\n    onChange: function (event) {\r\n        var $this = this;\r\n        var vname = $this.data.detail;\r\n        var bindtype = event.currentTarget.dataset.type;\r\n        var value = $.trim(event.detail.value);\r\n        if(bindtype=='street'){\r\n            vname.streetdatavalue = $this.data.street[value].code\r\n            value = $this.data.street[value].name;\r\n        }\r\n        vname[bindtype]=value;\r\n        $this.setData({detail: vname});\r\n    },\r\n    getStreet: function (areas, val) {\r\n        if(!areas || !val){\r\n            return;\r\n        }\r\n        var $this = this;\r\n        if(!$this.data.detail.province||!$this.data.detail.city || !this.data.openstreet){\r\n            return;\r\n        }\r\n        var city = areas[val[0]].city[val[1]].code;\r\n        var area = areas[val[0]].city[val[1]].area[val[2]].code;\r\n        core.get('getstreet', {city: city, area: area}, function(result){\r\n            var street = result.street;\r\n            var data = {street: street};\r\n            if(street && $this.data.detail.streetdatavalue){\r\n                for(var i in street){\r\n                    if(street[i].code==$this.data.detail.streetdatavalue){\r\n                        data.streetIndex = i;\r\n                        $this.setData({'detail.street':street[i].name});\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    selectArea: function (e) {\r\n        var area = e.currentTarget.dataset.area;\r\n        var index = this.getIndex(area, this.data.areas);\r\n        this.setData({pval: index, pvalOld: index,showPicker: true})\r\n    },\r\n    bindChange: function(e) {\r\n        var oldValue = this.data.pvalOld;\r\n        var newValue = e.detail.value;\r\n        if(oldValue[0]!=newValue[0]){\r\n            newValue[1] = 0;\r\n        }\r\n        if(oldValue[1]!=newValue[1]){\r\n            newValue[2] = 0;\r\n        }\r\n        this.setData({pval: newValue, pvalOld: newValue});\r\n    },\r\n    onCancel: function (e) {\r\n        this.setData({showPicker: false});\r\n    },\r\n    onConfirm: function (e) {\r\n        var val = this.data.pval;\r\n        var areas = this.data.areas;\r\n        var detail = this.data.detail;\r\n        detail.province = areas[val[0]].name;\r\n        detail.city = areas[val[0]].city[val[1]].name;\r\n        detail.datavalue = areas[val[0]].code+\" \"+areas[val[0]].city[val[1]].code;\r\n        if(areas[val[0]].city[val[1]].area && areas[val[0]].city[val[1]].area.length>0){\r\n            detail.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n            detail.datavalue += \" \"+areas[val[0]].city[val[1]].area[val[2]].code;\r\n            this.getStreet(areas, val);\r\n        }else{\r\n            detail.area = \"\";\r\n        }\r\n        detail.street = '';\r\n        this.setData({detail: detail, streetIndex: 0, showPicker: false});\r\n    },\r\n    getIndex: function (str, areas) {\r\n        if($.trim(str)=='' || !$.isArray(areas)){\r\n            return [0,0,0];\r\n        }\r\n        var arr = str.split(\" \");\r\n        var index = [0,0,0];\r\n        for (var i in areas){\r\n            if(areas[i].name==arr[0]){\r\n                index[0] = Number(i);\r\n                for (var ii in areas[i].city){\r\n                    if(areas[i].city[ii].name==arr[1]){\r\n                        index[1] = Number(ii);\r\n                        for (var iii in areas[i].city[ii].area){\r\n                            if(areas[i].city[ii].area[iii].name==arr[2]){\r\n                                index[2] = Number(iii);\r\n                                break;\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n})","/**\r\n *\r\n * address\\select.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        loaded: false,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n    },\r\n    onShow: function () {\r\n        this.getList();\r\n        var isIpx = app.getCache('isIpx');\r\n        var $this = this;\r\n        if (isIpx) {\r\n          $this.setData({\r\n            isIpx: true,\r\n            iphonexnavbar: 'fui-iphonex-navbar',\r\n            paddingb: 'padding-b'\r\n          })\r\n        } else {\r\n          $this.setData({\r\n            isIpx: false,\r\n            iphonexnavbar: '',\r\n            paddingb: ''\r\n          })\r\n        }\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        core.get('member/address/get_list', {}, function (result) {\r\n            $this.setData({loaded: true, list: result.list,show:true});\r\n        });\r\n    },\r\n    select: function (event) {\r\n        var index = core.pdata(event).index;\r\n        app.setCache(\"orderAddress\", this.data.list[index], 30);\r\n        wx.navigateBack();\r\n    }\r\n});","/**\r\n *\r\n * member/cart/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        route:'cart',\r\n        icons: app.requirejs('icons'),\r\n        merch_list:false,\r\n        list:false,\r\n        edit_list:[],\r\n        \r\n        modelShow: false\r\n    },\r\n    onLoad: function (options) {\r\n      app.checkAuth();\r\n      var $this = this;\r\n      core.get('black', {}, function (res) {\r\n        if (res.isblack) {\r\n          wx.showModal({\r\n            title: '无法访问',\r\n            content: '您在商城的黑名单中，无权访问！',\r\n            success: function (res) {\r\n              if (res.confirm) {\r\n                $this.close()\r\n              }\r\n              if (res.cancel) {\r\n                $this.close()\r\n              }\r\n            }\r\n          })\r\n        }\r\n      });\r\n        app.url(options);\r\n    },\r\n    onShow:function () {\r\n        this.get_cart();\r\n        var $this = this;\r\n        $this.setData({\r\n          imgUrl: app.globalData.approot\r\n        });\r\n        wx.getSetting({\r\n    \t\tsuccess: function(res) {\r\n    \t\t\tvar limits = res.authSetting['scope.userInfo'];\r\n    \t\t\t$this.setData({limits: limits})\r\n    \t\t\tif(!limits) {\r\n    \t\t\t\t// $this.setData({modelShow: true})\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})\r\n    },\r\n    get_cart:function () {\r\n        var $this = this,setData;\r\n        core.get('member/cart/get_cart',{},function (data) {\r\n          \r\n            setData = {\r\n                show:true,\r\n                ismerch:false,\r\n                ischeckall:data.ischeckall,\r\n                total:data.total,\r\n                cartcount:data.total,\r\n                totalprice:data.totalprice,\r\n                empty:data.empty||false,\r\n                sysset: data.sysset\r\n            };\r\n            if (typeof data.merch_list == 'undefined'){\r\n                setData.list = data.list||[];\r\n                $this.setData(setData)\r\n            }else{\r\n                setData.merch_list = data.merch_list||[];\r\n                setData.ismerch = true;\r\n                $this.setData(setData)\r\n            }\r\n        });\r\n    },\r\n    edit: function (e) {\r\n        var $this = this;\r\n        if (!$this.data.limits) {\r\n          // $this.setData({ modelShow: true })\r\n          return;\r\n        }\r\n        var dataset = core.data(e),$this=this,ids;\r\n        switch (dataset.action){\r\n            case 'edit':\r\n                this.setData({edit: true});break;\r\n            case 'complete':\r\n                this.allgoods(false);\r\n                this.setData({edit: false});break;\r\n            case 'move':\r\n                ids = this.checked_allgoods().data;\r\n                if (!$.isEmptyObject(ids)){\r\n                    core.post('member/cart/tofavorite',{ids:ids},function (data) {\r\n                        $this.get_cart();\r\n                    });\r\n                }break;\r\n            case 'delete':\r\n                ids = this.checked_allgoods().data;\r\n                if (!$.isEmptyObject(ids)){\r\n                    core.confirm('是否确认删除该商品?',function () {\r\n                        core.post('member/cart/remove',{ids:ids},function (data) {\r\n                            $this.get_cart();\r\n                        });\r\n                    });\r\n                }break;\r\n            case 'pay':\r\n                if (this.data.total > 0){\r\n                  core.get('member/cart/submit', {}, function (ret) {\r\n\r\n                    if(ret.error == 0) {\r\n                      wx.navigateTo({\r\n                        url: '/pages/order/create/index'\r\n                      });\r\n                    } else {\r\n                      foxui.toast($this, ret.message );\r\n                      $this.get_cart();\r\n                      return\r\n                    }\r\n                  });\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    checkall:function (e) {\r\n        core.loading();\r\n        var $this=this,select = this.data.ischeckall ? 0 : 1;\r\n        core.post('member/cart/select',{id:'all',select:select},function (data) {\r\n            $this.get_cart();\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    update:function (e) {\r\n        var $this=this,select = this.data.ischeckall ? 0 : 1;\r\n        core.post('member/cart/select',{id:'all',select:select},function (data) {\r\n            $this.get_cart();\r\n        });\r\n    },\r\n    number: function (e) {\r\n        var $this=this,dataset = core.pdata(e),val = foxui.number(this,e),id = dataset.id,optionid=dataset.optionid;\r\n        if ((val == 1 && dataset.value == 1 && e.target.dataset.action=='minus') || (dataset.value == dataset.max && e.target.dataset.action=='plus')){\r\n            return;\r\n        }\r\n        core.post('member/cart/update',{id:id,optionid:optionid,total:val},function (data) {\r\n            $this.get_cart();\r\n        });\r\n    },\r\n    selected: function (e) {\r\n        core.loading();\r\n        var $this=this,dataset = core.pdata(e),id = dataset.id,select=dataset.select==1?0:1;\r\n        core.post('member/cart/select',{id:id,select:select},function (data) {\r\n            $this.get_cart();\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    allgoods:function (check) {\r\n        var edit_list = this.data.edit_list;\r\n        if (!$.isEmptyObject(edit_list) && typeof check =='undefined'){\r\n            return edit_list;\r\n        }\r\n        check = typeof check =='undefined' ? false : check;\r\n        if (this.data.ismerch){\r\n            for(var i in this.data.merch_list){\r\n                for(var ii in this.data.merch_list[i].list){\r\n                    edit_list[this.data.merch_list[i].list[ii].id] =check\r\n                }\r\n            }\r\n        }else{\r\n            for(var i in this.data.list){\r\n                edit_list[this.data.list[i].id] =check\r\n            }\r\n        }\r\n        return edit_list;\r\n    },\r\n    checked_allgoods:function () {\r\n        var allgoods = this.allgoods(),data=[],cartcount = 0;\r\n        for(var ii in allgoods){\r\n            if (allgoods[ii]){\r\n                data.push(ii);\r\n                cartcount++\r\n            }\r\n        }\r\n        return {data:data,cartcount:cartcount};\r\n    },\r\n    editcheckall:function (e) {\r\n        var check = core.pdata(e).check,edit_list=this.allgoods(!check);\r\n        this.setData({\r\n            edit_list:edit_list,\r\n            editcheckall:!check\r\n        });\r\n        this.editischecked();\r\n    },\r\n    editischecked:function () {\r\n        var editischecked = false,editcheckall=true,allgoods = this.allgoods();\r\n        for(var i in this.data.edit_list){\r\n            if (this.data.edit_list[i]){\r\n                editischecked=true;break;\r\n            }\r\n        }\r\n        for(var ii in allgoods){\r\n            if (!allgoods[ii]){\r\n                editcheckall=false;break;\r\n            }\r\n        }\r\n        this.setData({\r\n            editischecked:editischecked,\r\n            editcheckall:editcheckall\r\n        })\r\n    },\r\n    edit_list:function (e) {\r\n        var dataset = core.pdata(e),edit_list=this.data.edit_list;\r\n        if (typeof edit_list[dataset.id] != 'undefined' && edit_list[dataset.id] ==1){\r\n            edit_list[dataset.id] = false;\r\n        }else{\r\n            edit_list[dataset.id] = true;\r\n        }\r\n        this.setData({\r\n            edit_list:edit_list\r\n        });\r\n        this.editischecked();\r\n    },\r\n    url:function (e) {\r\n        var data = core.pdata(e);\r\n        wx.navigateTo({\r\n            url:data.url\r\n        });\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    },\r\n    \r\n    \r\n    /*用户授权-取消*/\r\n    cancelclick:  function(){\r\n   \t  this.setData({modelShow: false})\r\n   \t  wx.switchTab({\r\n  \t\t url: '/pages/index/index'\r\n  \t  })\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      this.setData({modelShow: false});\r\n      wx.openSetting({\r\n        success: function (res) { }\r\n      })\r\n    },\r\n    close: function () {\r\n      app.globalDataClose.flag = true;\r\n      wx.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n    // userinfo:function(e){\r\n    //   var $this = this;\r\n    //   app.getUserInfo(function(){\r\n    //     $this.onShow();\r\n    //   });\r\n    // }\r\n\r\n});","// pages/verifygoods/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery');\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n      list:[],\r\n      page:1,\r\n      cate: '',\r\n      loaded: false,\r\n      loading: true,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    $this.setData({ loading: true });\r\n    core.get('verifygoods/get_list', { page: $this.data.page, cate: $this.data.cate }, function (result) {\r\n      var data = { loading: false, total: result.total, show: true };\r\n      if (!result.list) {\r\n        result.list = [];\r\n      }\r\n      if (result.list.length > 0) {\r\n        data.page = $this.data.page + 1;\r\n        data.list = $this.data.list.concat(result.list);\r\n        if (result.list.length < result.pagesize) {\r\n          data.loaded = true\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  },\r\n  selected:function(e){\r\n    var $this = this;\r\n    var cate = e.currentTarget.dataset.cate;\r\n    $this.setData({ cate: cate, page: 1, list: [], loading: true});\r\n    this.get_list();\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.stopPullDownRefresh()\r\n  },\r\n  onReachBottom: function () {\r\n    if (this.data.loaded || this.data.list.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.getList();\r\n  }\r\n})","// pages/verifygoods/detail/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery');\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    verifygoods:[],\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    this.setData({\r\n      options: options\r\n    });\r\n    app.url(options);\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    this.get_detail();\r\n  },\r\n  get_detail: function () {\r\n    var $this = this;\r\n    core.get('verifygoods/get_detail', $this.data.options, function (result) {\r\n      if (result.error == 0) {\r\n      \r\n        $this.setData({ verifygoods: result.item,store:result.store,canverify:result.canverify,canverify_message:result.canverify_message, qrcode: result.qrcode, verifygoodlogs: result.verifygoodlogs, verifynum: result.verifynum, limitdatestr: result.limitdatestr, verifycode: result.verifycode })\r\n      } else {\r\n        if (result.error != 50000) {\r\n          core.toast(result.message, 'loading');\r\n        }\r\n        wx.redirectTo({\r\n          url: '/pages/verifygoods/index'\r\n        })\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","/**\r\n *\r\n * coupon\\index\\index.js\r\n *\r\n * @create 2017-02-03\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-04\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        cates: [],\r\n        cateid: 0,\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        list: [],\r\n        approot: app.globalData.approot\r\n    },\r\n    onLoad: function (options) {\r\n        if(options.cateid){\r\n            this.setData({cateid: options.cateid});\r\n        }\r\n        this.getCate();\r\n        this.getList();\r\n    },\r\n    getCate: function () {\r\n        var $this = this;\r\n        core.get('sale/coupon/getCouponCate', {}, function (ret) {\r\n            if(ret.list.length>0){\r\n                $this.setData({cates: ret.list});\r\n            }\r\n        });\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        core.loading();\r\n        this.setData({loading: true});\r\n        core.get('sale/coupon/getlist', {page: this.data.page, cateid:this.data.cateid}, function (ret) {\r\n            var data = {loading: false, total: ret.total, pagesize: ret.pagesize};\r\n            if (ret.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(ret.list);\r\n                if(ret.list.length<ret.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n                $this.setSpeed(ret.list);\r\n            }\r\n            $this.setData(data);\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    setSpeed:function (list) {\r\n        if (!list || list.length<1){\r\n            return\r\n        }\r\n        for(var i in list){\r\n            var item = list[i];\r\n            if(isNaN(item.lastratio)){\r\n                continue;\r\n            }\r\n            var angle = item.lastratio / 100 * 2.5;\r\n            var context = wx.createContext();\r\n            context.beginPath()\r\n            context.arc(34, 35, 30, 0.5 * Math.PI, 2.5 * Math.PI);\r\n            context.setFillStyle('rgba(0,0,0,0)');\r\n            context.setStrokeStyle('rgba(0,0,0,0.2)');\r\n            context.setLineWidth(4);\r\n            context.stroke();\r\n            context.beginPath()\r\n            context.arc(34, 35, 30, 0.5 * Math.PI, angle * Math.PI);\r\n            context.setFillStyle('rgba(0,0,0,0)');\r\n            context.setStrokeStyle('#ffffff');\r\n            context.setLineWidth(4);\r\n            context.setLineCap('round');\r\n            context.stroke();\r\n            var canvasId = 'coupon-'+item.id;\r\n            wx.drawCanvas({\r\n                canvasId: canvasId,\r\n                actions: context.getActions(),\r\n            })\r\n        }\r\n    },\r\n    bindTab: function (e) {\r\n        var cateid = core.pdata(e).cateid;\r\n        this.setData({cateid: cateid, page: 1, list:[]});\r\n        this.getList();\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    jump: function (e) {\r\n        var id = core.pdata(e).id;\r\n        if(id>0){\r\n            wx.navigateTo({url: '/pages/sale/coupon/detail/index?id=' + id});\r\n        }\r\n    }\r\n})","/**\r\n *\r\n * coupon\\index\\index.js\r\n *\r\n * @create 2017-02-04\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-06\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar fui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {\r\n        id: 0,\r\n        detail: {}\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({id: options.id});\r\n        this.getDetail();\r\n    },\r\n    getDetail: function () {\r\n        var $this = this;\r\n        core.get('sale/coupon/getdetail', {id: this.data.id}, function (ret) {\r\n            if(ret.error>0){\r\n                wx.navigateBack();\r\n            }else{\r\n                parser.wxParse('wxParseData','html', ret.detail.desc,$this,'5');\r\n                $this.setData({detail: ret.detail, show: true});\r\n            }\r\n        });\r\n    },\r\n    receive: function (e) {\r\n        var detail=this.data.detail,$this=this;\r\n        if(this.data.buying){\r\n            fui.toast($this, \"正在执行请稍后\");\r\n            return;\r\n        }\r\n        if(detail.canget!=1){\r\n            fui.toast($this, detail.getstr);\r\n            return;\r\n        }\r\n        var text = \"确认使用\";\r\n        if(detail.money>0){\r\n            text += detail.money+\"元\";\r\n            if(detail.credit>0){\r\n                text += \"+\";\r\n            }\r\n        }\r\n        if(detail.credit>0){\r\n            text += detail.credit+\"积分\";\r\n        }\r\n        text += detail.gettypestr+\"吗？\";\r\n\r\n        core.confirm(text, function () {\r\n            $this.setData({buying: true});\r\n            core.post('sale/coupon/pay', {id: $this.data.id}, function (ret) {\r\n                if(ret.error>0){\r\n                    fui.toast($this, ret.message);\r\n                    $this.setData({buying: false});\r\n                    return;\r\n                }\r\n                $this.setData({logid: ret.logid});\r\n                if(ret.wechat && ret.wechat.success){\r\n                    core.pay(ret.wechat.payinfo,function (res) {\r\n                        if (res.errMsg == \"requestPayment:ok\"){\r\n                            $this.payResult()\r\n                        }\r\n                    });\r\n                }else{\r\n                    $this.payResult();\r\n                }\r\n                $this.setData({buying: false});\r\n            });\r\n        });\r\n    },\r\n    payResult: function () {\r\n        var $this=this,text,url;\r\n        core.get('sale/coupon/payresult', {logid: this.data.logid}, function (ret) {\r\n            if(ret.error>0){\r\n                fui.toast($this, ret.message);\r\n                return;\r\n            }\r\n\r\n            if(ret.coupontype==0){\r\n                wx.redirectTo({url: \"/pages/sale/coupon/my/showcoupons2/index?id=\"+ret.dataid});\r\n                return;\r\n            }\r\n\r\n            var url = \"/pages/sale/coupon/my/index/index\";\r\n            if(ret.coupontype==1){\r\n                url = \"/pages/member/recharge/index\";\r\n            }\r\n\r\n            core.confirm(ret.confirm_text, function () {\r\n                wx.redirectTo({url: url});\r\n            }, function () {\r\n                wx.redirectTo({url: \"/pages/sale/coupon/my/index/index\"});\r\n            })\r\n        })\r\n    }\r\n})","/**\r\n *\r\n * coupon\\my\\index\\index.js\r\n *\r\n * @create 2017-02-07\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {},\r\n    onLoad: function (options) {\r\n        this.setData({id: options.id});\r\n        this.getDetail();\r\n    },\r\n    getDetail: function () {\r\n        var $this = this;\r\n        core.get('sale/coupon/my/getdetail', {id: this.data.id}, function (ret) {\r\n            if(ret.error>0){\r\n                wx.navigateBack();\r\n            }else{\r\n                parser.wxParse('wxParseData','html', ret.detail.desc,$this,'5');\r\n                $this.setData({detail: ret.detail, show: true});\r\n            }\r\n        });\r\n    },\r\n    receive: function (e) {\r\n        var detail = this.data.detail,url;\r\n        if(detail.coupontype==0){\r\n            wx.switchTab({\r\n                url: '/pages/index/index'\r\n            })\r\n            return;\r\n        }\r\n        else if(detail.coupontype==1){\r\n            url = \"/pages/member/recharge/index\";\r\n        }\r\n        else if(detail.coupontype==2){\r\n            url = \"/pages/sale/coupon/my/index\";\r\n        }\r\n        wx.redirectTo({url: url});\r\n    }\r\n})","/**\r\n *\r\n * coupon\\my\\index\\index.js\r\n *\r\n * @create 2017-02-07\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        cate: '',\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        list: [],\r\n        approot: app.globalData.approot\r\n    },\r\n    onLoad: function (options) {\r\n        this.getList();\r\n    },\r\n    myTab: function (e) {\r\n        var $this = this;\r\n        var cate = core.pdata(e).cate;\r\n        $this.setData({cate: cate, page: 1, list: []});\r\n        $this.getList();\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        core.loading();\r\n        this.setData({loading: true});\r\n        core.get('sale/coupon/my/getlist', {page:this.data.page, cate:this.data.cate}, function (ret) {\r\n            var data = {loading: false, total: ret.total, pagesize: ret.pagesize, closecenter:ret.closecenter};\r\n            if (ret.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(ret.list);\r\n                if(ret.list.length<ret.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    jump: function (e) {\r\n        var id = core.pdata(e).id;\r\n        if(id>0){\r\n            wx.navigateTo({url: '/pages/sale/coupon/my/detail/index?id=' + id});\r\n        }\r\n    }\r\n})","/**\r\n *\r\n * coupon\\my\\index\\index.js\r\n *\r\n * @create 2017-02-07\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {\r\n        approot: app.globalData.approot\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({id: options.id});\r\n        this.getDetail();\r\n    },\r\n    getDetail: function (e) {\r\n        var $this = this;\r\n        core.get('sale/coupon/my/showcoupon2', {id: this.data.id}, function (ret) {\r\n            if(ret.error>0){\r\n                wx.redirectTo({\r\n                    url: '/pages/sale/coupon/my/index/index'\r\n                })\r\n            }else{\r\n                parser.wxParse('wxParseData','html', ret.detail.desc,$this,'5');\r\n                $this.setData({detail: ret.detail, goods: ret.goods, show: true});\r\n            }\r\n        });\r\n    }\r\n})","/**\r\n *\r\n * plugin/coupon/index.js\r\n *\r\n * @create 2017-1-19\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-19\r\n *\r\n */\r\nvar app=getApp(),core=app.requirejs('core'),$ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        type: 0,\r\n        merchs: [],\r\n        goodslist: [],\r\n        goodsid: 0,\r\n        money: 0,\r\n        list: [],\r\n        loading: true\r\n    },\r\n    onLoad: function (options) {\r\n        if(!Number(options.type)){\r\n            var goodsinfo = app.getCache('goodsInfo');\r\n            this.setData({goodslist: goodsinfo.goodslist, merchs: goodsinfo.merchs});\r\n        }else{\r\n            this.setData({money:options.money});\r\n        }\r\n        this.setData({type:options.type});\r\n        this.getList();\r\n    },\r\n    getList: function () {\r\n        var $this=this,data=this.data;\r\n        for (var i=0; i < data.goodslist.length;i++){\r\n          delete data.goodslist[i]['title'];\r\n          delete data.goodslist[i]['optiontitle'];\r\n          delete data.goodslist[i]['thumb'];\r\n        }\r\n        if(data.type<2){    // 充值、购物\r\n            core.get('sale/coupon/query', {type: data.type, money: data.money, goods: data.goodslist, merchs: data.merchs}, function (result) {\r\n                $this.setData({list: result.list, loading: false});\r\n            });\r\n        }else{\r\n            // 商品详情显示\r\n        }\r\n    },\r\n    search: function (e) {\r\n        var val = e.detail.value,old_list=this.data.old_list,list=this.data.list,new_list=[];\r\n        if ($.isEmptyObject(old_list)){\r\n            old_list = list;\r\n        }\r\n        if (!$.isEmptyObject(old_list)){\r\n            $.each(old_list,function (index,item) {\r\n                if (item.couponname.indexOf(val)!=-1){\r\n                    new_list.push(item);\r\n                }\r\n            })\r\n        }\r\n        this.setData({list:new_list,old_list:old_list});\r\n    },\r\n    bindBtn: function (e) {\r\n        var $this=this,data=this.data,dataset=e.currentTarget.dataset;\r\n        if(data.type<2){\r\n            app.setCache(\"coupon\", dataset, 20);\r\n            wx.navigateBack();\r\n        }else{\r\n            // 商品详情 (请求领取)\r\n        }\r\n    }\r\n})","var app = getApp();\r\nvar core = require('./../../../utils/core.js')\r\n\r\nPage({\r\n  data: {\r\n    close:0,\r\n    text:'',\r\n    imgUrl: ''\r\n   },\r\n    onLoad: function (options) {\r\n      this.setData({ \r\n        close: options.close, \r\n        text: options.text, \r\n        imgUrl: app.globalData.approot\r\n        });\r\n    },\r\n    onShow: function () {\r\n        var name = app.getCache('sysset').shopname;\r\n        wx.setNavigationBarTitle({title: name||'提示'});\r\n    },\r\n\r\n    bind: function(){\r\n      var $this = this;\r\n      var timer =  setInterval(function () {\r\n        wx.getSetting({\r\n          success: function (res) {\r\n            var userInfo = res.authSetting['scope.userInfo'];\r\n            if (userInfo){\r\n              wx.reLaunch({\r\n                url: '/pages/index/index'\r\n              })\r\n              clearInterval(timer)\r\n            \r\n              $this.setData({ userInfo: userInfo})\r\n            }else{\r\n\r\n            }\r\n          }\r\n        })\r\n      }, 1000);\r\n  },\r\n\r\n  // 点击open-type=\"getUserInfo\"时候的回调函数\r\n  bindGetUserInfo: function (res) {\r\n    const routeData = app.getCache('routeData');\r\n    let { url, params } = routeData;\r\n    // 拼接重新跳转的url\r\n    let ret = '';\r\n    Object.keys(params).forEach(key => {\r\n      ret += key + '=' + params[key] + '&'\r\n    })\r\n    params = ret.substring(0, ret.length - 1)\r\n    var redirectUrl = '/' + url + '?' + params;\r\n    \r\n\r\n    wx.login({\r\n      success: function (ret) {\r\n        core.post('wxapp/login', { code: ret.code }, function (login_res) {\r\n          if (login_res.error) {\r\n            core.alert('获取用户登录态失败:' + login_res.message);\r\n            return;\r\n           }\r\n          core.get('wxapp/auth', {\r\n            data: res.detail.encryptedData,\r\n            iv: res.detail.iv,\r\n            sessionKey: login_res.session_key\r\n          }, function (auth_res) {\r\n            if (auth_res.isblack == 1) {\r\n              wx.showModal({\r\n                title: '无法访问',\r\n                content: '您在商城的黑名单中，无权访问！',\r\n                success: function (res) {\r\n                  if (res.confirm) {\r\n                    app.close();\r\n                  }\r\n                  if (res.cancel) {\r\n                    app.close();\r\n                  }\r\n                }\r\n              })\r\n            }\r\n            res.detail.userInfo.openid = auth_res.openId\r\n            res.detail.userInfo.id = auth_res.id\r\n            res.detail.userInfo.uniacid = auth_res.uniacid\r\n            app.setCache('userinfo', res.detail.userInfo);\r\n            app.setCache('userinfo_openid', res.detail.userInfo.openid);\r\n            app.setCache('userinfo_id', auth_res.id);\r\n            app.getSet();\r\n            wx.reLaunch({\r\n              url: redirectUrl\r\n            })\r\n          })\r\n        })\r\n      },\r\n      fail: function () {\r\n        core.alert('获取用户信息失败!');\r\n      }\r\n    })\r\n  }\r\n})","/*\r\n * \r\n * @create 2017-11-10\r\n * @author Ma \r\n * \r\n */\r\nPage({\r\n  data: {\r\n  \turl: ''\r\n  },\r\n  onLoad: function (options) {\r\n    if (options.module == 'sign'){\r\n      var url = options.domain + '?' + decodeURIComponent(options.params) + '&uid=' + options.mid;\r\n    }else{\r\n      var url = decodeURIComponent(options.url);\r\n    }\r\n  \r\n   \tvar $this = this;\r\n    $this.setData({\r\n      url: url\r\n    })\r\n  }\r\n})","/*\r\n * \r\n * *\r\n * @create 2017-1-12\r\n * @author AHa\r\n * \r\n * \r\n */\r\nvar app = getApp(),core=app.requirejs('core')\r\nPage({\r\n  data: {\r\n      lng: 0,\r\n      lat: 0,\r\n      scale:13,\r\n      name:'未填写',\r\n      address:'地址：未填写',\r\n      tel1:'',\r\n      tel2: '',\r\n      logo:'/static/images/noface.png',\r\n    markers: [{\r\n      iconPath: \"/static/images/location.png\",\r\n      id: 0,\r\n      longitude: 0,\r\n      latitude: 0,\r\n      width: 30,\r\n      height: 30,\r\n      label: {\r\n        content:'未填写',\r\n      \tcolor: '#666666',\r\n      \tfontSize: 12,\r\n      \tborderRadius: 10,\r\n      \tbgColor: '#ffffff',\r\n      \tpadding: 5,\r\n        display: 'ALWAYS',\r\n        textAlign:'center',\r\n        x:-20,\r\n        y:-60,\r\n      \t\r\n      }\r\n    }],\r\n    circles: [{\r\n        longitude: 0,\r\n        latitude: 0,\r\n    \t  color: '#4e73f1DD',\r\n        fillColor: '#4e73f1AA',\r\n        radius: 15,\r\n        strokeWidth: 1\r\n    }]\r\n  },\r\n  get_list: function () {\r\n        \r\n    },\r\n  regionchange(e) {\r\n    \r\n  },\r\n  markertap(e) {\r\n  \r\n  },\r\n  controltap(e) {\r\n    \r\n  },\r\n\tonLoad: function(options){\r\n\t\tvar $this = this;\r\n\r\n        core.get('shop.cityexpress.map',{},function (res) {\r\n         \r\n            $this.setData({\r\n              lng:res.cityexpress.lng,\r\n              lat:res.cityexpress.lat,\r\n              scale: res.cityexpress.zoom,\r\n              name: res.cityexpress.name,\r\n              address:res.cityexpress.address,\r\n              tel1: res.cityexpress.tel1,\r\n              tel2: res.cityexpress.tel2,\r\n              logo:res.cityexpress.logo,\r\n              'markers[0].longitude':res.cityexpress.lng,\r\n              'markers[0].latitude':res.cityexpress.lat,\r\n              'markers[0].label.content':res.cityexpress.name,\r\n              'circles[0].longitude': res.cityexpress.lng,\r\n              'circles[0].latitude': res.cityexpress.lat,\r\n              'circles[0].radius': parseInt(res.cityexpress.range),\r\n            })\r\n        });\r\n\r\n\t},\r\n\t\r\n\t\t//打开电话列表\r\n\t\tcall: function() {\r\n\t\t\tvar $this = this;\r\n      if ($this.data.tel1=='' || $this.data.tel2==''){\r\n        if ($this.data.tel1!=''){\r\n          wx.makePhoneCall({\r\n            phoneNumber: $this.data.tel1\r\n          })\r\n        }\r\n        if ($this.data.tel2!='') {\r\n          wx.makePhoneCall({\r\n            phoneNumber: $this.data.tel2\r\n          })\r\n        }\r\n      }else{\r\n        $this.setData({\r\n          listout: 'out',\r\n          listin: 'in'\r\n        })\r\n      }\r\n\t\t},\r\n\r\n\t\t//关闭电话列表\r\n\t\tcalldown: function() {\r\n\t\t\tvar $this = this;\r\n\t\t\t$this.setData({\r\n\t\t\t\tlistout: '',\r\n\t\t\t\tlistin: ''\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t//拨打电话\r\n\t\tcallup: function(e) {\r\n    wx.makePhoneCall({\r\n      phoneNumber: e.target.dataset.tel\r\n    })\r\n  }\r\n})","var app = getApp();\r\nPage({\r\n\r\n  \r\n  data: {\r\n    paperplane: false\r\n  },\r\n\r\n  onLoad: function (options) {\r\n    this.setData({ imgUrl: app.globalData.approot })\r\n  },\r\n\r\n  transmit: function(){\r\n    this.setData({paperplane: true})\r\n  },\r\n\r\n  hidepaperplane: function(){\r\n    this.setData({ paperplane: false })\r\n  }\r\n})","// pages/order/pay/coupons/coupons.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    status: 0,\r\n    showcode: false,\r\n    list:{},\r\n    page:1,\r\n    total:0,\r\n    more:true,\r\n    load:true,\r\n    notgoods:true,\r\n\r\n  },\r\n\r\n  onLoad: function (options) {\r\n        var $this = this;\r\n        $this.get_list();\r\n  },\r\n\r\n  // tab切换\r\n  tab: function(e){\r\n      var status = e.currentTarget.dataset.type;\r\n      this.setData({ status: status });\r\n      this.setData({page:1});\r\n      this.get_list();\r\n  },\r\n  finish: function (e) {\r\n    var $this = this;\r\n    var logid = e.currentTarget.dataset.logid;\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: '确认已收到货了吗？',\r\n      success: function (sm) {\r\n        if (sm.confirm) {\r\n          core.get('creditshop/log/finish', { id: logid }, function (res) {\r\n            if (res.error == 0) {\r\n              foxui.toast($this, \"确认收货\");\r\n              $this.onShow();\r\n            }else{\r\n              foxui.toast($this, res.message);\r\n              return;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    })\r\n  },\r\n\r\n  //拉取列表\r\n  get_list: function (onpage){\r\n    var $this = this;\r\n    core.post('creditshop/log/getlist', { page: $this.data.page, status: $this.data.status},function(msg){\r\n      if( msg.error == 0 ){\r\n\r\n        if (!onpage) {\r\n          $this.setData({ list: msg.list });\r\n        } else {\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.list.concat(msg.list);\r\n          $this.setData({ list: msg.list });\r\n        }\r\n\r\n        $this.setData({ total: msg.total });\r\n      }\r\n      \r\n      if( msg.pagesize >= msg.next_page) {\r\n        $this.setData({more:false});\r\n      }\r\n\r\n      if (msg.total == 0 ){\r\n        $this.setData({ more: true });\r\n      }\r\n\r\n      if( !onpage ){\r\n          $this.setData({ datas: msg.list });\r\n        }else{\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.datas.concat(msg.list );\r\n          $this.setData({ datas: msg.list });\r\n        }\r\n\r\n\r\n      if ($this.data.total <= 0) {\r\n\r\n        $this.setData({ notgoods: false });\r\n      } else {\r\n        $this.setData({ notgoods: true });\r\n      }\r\n    });\r\n\r\n\r\n    \r\n  },\r\n\r\n  onReachBottom: function (e) {\r\n    this.setData({ page: this.data.page + 1, load: false });\r\n    this.get_list(true);\r\n    this.setData({ load: true });\r\n  },\r\n  /*\r\n  exchange:function(e){\r\n    var url = '/pages/creditshop/verify/index?id='+e.currentTarget.dataset.id;\r\n    \r\n    wx.navigateTo({\r\n      url: url\r\n    });\r\n  }\r\n  */\r\n\r\n\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\n// pages/integral/order/detail/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    options:[],\r\n    log:[],\r\n    logid:0,\r\n    store:[],\r\n    stores:[],\r\n    goods:[],\r\n    verifynum:0,\r\n    replyset: [],\r\n    ordercredit: 0,\r\n    ordermoney: 0,\r\n    address: [],\r\n    carrier: [],\r\n    shop: [],\r\n    allmoney: [],\r\n    togglestore:'',\r\n    togglecode:'',\r\n    verify:[],\r\n    iswechat:true,\r\n    paymentmodal:false,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({ options: options ,logid:options.id});\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.getDetail();\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  getDetail:function(){\r\n    var $this = this;\r\n    var options = $this.data.options;\r\n    core.get('creditshop/log/detail', options, function (result) {\r\n      if (result.error == 0) {\r\n        var allmoney = parseFloat(result.ordermoney) + parseFloat(result.log.dispatch);\r\n        $this.setData({\r\n          log: result.log,\r\n          store: result.store,\r\n          stores: result.stores,\r\n          goods: result.goods,\r\n          verifynum: result.verifynum,\r\n          log: result.log,\r\n          replyset:result.set,\r\n          ordercredit: result.ordercredit,\r\n          ordermoney: result.ordermoney,\r\n          address: result.address,\r\n          carrier: result.carrier,\r\n          shop: result.shop,\r\n          allmoney: allmoney,\r\n          verify: result.verify,\r\n        });\r\n        var allprice = 0;\r\n        if (result.goods.isverify == 0 && result.address.lenght > 0) {\r\n          core.get('creditshop/dispatch', { goodsid: result.goods.id, optionid: options.id }, function (res) {\r\n            allprice = res.dispatch;\r\n            $this.setData({ dispatchprice: allprice });\r\n          });\r\n        }\r\n        allprice = parseFloat(allprice) + parseFloat(result.goods.money);\r\n        $this.setData({ allprice: allprice });\r\n      }\r\n\r\n    });\r\n  },\r\n  toggle: function (e) {\r\n    var $this = this;\r\n    var togglestore = $this.data.togglestore;\r\n    if (togglestore == '') {\r\n      $this.setData({ togglestore: 'toggleSend-group' });\r\n    } else {\r\n      $this.setData({ togglestore: '' });\r\n    }\r\n  },\r\n  togglecode: function (e) {\r\n    var $this = this;\r\n    var togglecode = $this.data.togglecode;\r\n    if (togglecode == '') {\r\n      $this.setData({ togglecode: 'toggleSend-group' });\r\n    } else {\r\n      $this.setData({ togglecode: '' });\r\n    }\r\n  },\r\n  finish:function(){\r\n    var $this = this;\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: '确认已收到货了吗？',\r\n      success: function (sm) {\r\n        if (sm.confirm) {\r\n          var logid = $this.data.log.id;\r\n          core.get('creditshop/log/finish', { id: logid}, function (res) {\r\n            if (res.error == 0) {\r\n              foxui.toast($this, \"确认收货\");\r\n              $this.onShow();\r\n            }else{\r\n              foxui.toast($this, res.message);\r\n              return;\r\n            }\r\n          });\r\n        } \r\n      }\r\n    })\r\n  },\r\n  paydispatch:function(e){\r\n    var $this = this;\r\n    var dispatchtype = e.currentTarget.dataset.paytype;\r\n    var content = '';\r\n    if (dispatchtype =='dispatch'){\r\n      content = \"确认兑换并支付运费吗\";\r\n    }else{\r\n      content = \"确认兑换吗\";\r\n    }\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: content,\r\n      success: function (sm) {\r\n        if (sm.confirm) {\r\n          var logid = $this.data.log.id;\r\n          var dispatchprice = $this.data.goods.dispatch;          \r\n          core.get('creditshop/log/paydispatch', { id: logid,addressid:$this.data.address.id,dispatchprice:dispatchprice}, function (res) {\r\n            if (res.error > 0) {\r\n              fui.toast($this, res.message);\r\n              return;\r\n            }\r\n            if (res.wechat && res.wechat.success) {\r\n              core.pay(res.wechat.payinfo, function (res) {\r\n                if (res.errMsg == \"requestPayment:ok\") {\r\n                  $this.payResult()\r\n                }\r\n              });\r\n            } \r\n          });          \r\n        }\r\n      }\r\n    })\r\n  },\r\n  payResult:function(){\r\n    var $this = this;\r\n    core.get('creditshop/log/paydispatchresult', { id: $this.data.log.id}, function (res) {\r\n      if (res.error > 0) {\r\n        fui.toast($this, res.message);\r\n        return;\r\n      }\r\n      $this.onShow();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n      page:1,\r\n      datas:{},\r\n      more:true,\r\n      load:true,\r\n      notgoods:true,\r\n      keywords:'',\r\n      cate:''\r\n  },\r\n\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    if ( options.cate ){\r\n      $this.setData({ cate: options.cate});\r\n    }\r\n    if(options.keywords){\r\n      $this.setData({ keywords: options.keywords} );\r\n    }\r\n    $this.get_list(  );\r\n  },\r\n  //下拉刷新\r\n  onPullDownRefresh: function (e) {\r\n    wx.showNavigationBarLoading();\r\n    this.get_list();\r\n    wx.stopPullDownRefresh();\r\n    wx.hideNavigationBarLoading();\r\n  },\r\n  //上拉翻页\r\n  onReachBottom:function(e){\r\n    this.setData({ page: this.data.page + 1, load:false});\r\n    this.get_list( '' , true );\r\n    this.setData({load: true });\r\n  },\r\n\r\n  focus: function () {\r\n    this.setData({ showbtn: 'in' })\r\n  },\r\n\r\n  get_list: function ( keywords , onpage ) {\r\n    var $this = this;\r\n    core.post('creditshop/lists/getlist', { page: $this.data.page, keywords: $this.data.keywords, cate: $this.data.cate}, function (msg) {\r\n      if( msg.error == 0 ){\r\n        if (msg.list.length == 0 ){\r\n          //如果没有数据则显示没有更多\r\n          if ($this.data.page == 1 ){\r\n            $this.setData({ notgoods: false });\r\n          }\r\n        }else{\r\n\r\n          $this.setData({ notgoods: true });\r\n          if (msg.next_page <= $this.data.page && $this.data.page != 1) {\r\n            $this.setData({ more: false });\r\n          }\r\n        }\r\n\r\n        if( !onpage ){\r\n          $this.setData({ datas: msg.list });\r\n        }else{\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.datas.concat(msg.list );\r\n          $this.setData({ datas: msg.list });\r\n        }\r\n        \r\n      }\r\n    });\r\n  },\r\n  search:function(){\r\n    this.setData({page:1});\r\n    this.get_list(  );\r\n  },\r\n  doinput:function(e){\r\n    this.setData({keywords:e.detail.value});\r\n  },\r\n  \r\n  \r\n  \r\n\r\n\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\n\r\n\r\n// pages/integral/my/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n      page:1,\r\n      list:{},\r\n      total:0,\r\n      load:true,\r\n      more:true,\r\n      notgoods:true\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n        var $this = this;\r\n        $this.get_list();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  },\r\n  get_list: function (onpage){\r\n    var $this = this;\r\n    core.post('creditshop/creditlog/getlist',{page:$this.data.page},function(msg){\r\n        $this.setData({total:msg.credit});\r\n        if( !onpage ){\r\n          $this.setData({ list: msg.list });\r\n        }else{\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.list.concat(msg.list );\r\n          $this.setData({ list: msg.list });\r\n        }\r\n\r\n        if( msg.total == 0 ){\r\n          $this.setData({ notgoods:false});\r\n        }else{\r\n          $this.setData({ notgoods: true });\r\n        }\r\n\r\n\r\n        if( msg.pagesize >= msg.next_page ){\r\n          $this.setData({ more: false });\r\n        }else{\r\n          $this.setData({ more: true });\r\n        }\r\n\r\n\r\n    });\r\n  },\r\n\r\n  onReachBottom: function (e) {\r\n    this.setData({ page: this.data.page + 1, load: false });\r\n    this.get_list(true);\r\n    this.setData({ load: true });\r\n  },\r\n\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-04\r\n * @author 咖啡\r\n *\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    paymentmodal:false,\r\n    showmodal:false,\r\n    successmodal: false,\r\n    member:[],\r\n    goods: [],\r\n    options:[],\r\n    carrierInfo:[],\r\n    stores:[],\r\n    is_openmerch:false,\r\n    isverify:false,\r\n    iswechat:true,\r\n    iscredit:true,\r\n    paytype:'',\r\n    togglestore:'',\r\n    addressid:0,\r\n    dispatchprice:0,\r\n    allprice:0,\r\n    logid:0,\r\n    successmessage:'',\r\n    successstatus:false,\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({ options: options });\r\n  },\r\n  /*页面加载*/\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n    var address = app.getCache(\"orderAddress\"), \r\n    shop = app.getCache(\"orderShop\");\r\n    if (shop) {\r\n      $this.setData({\r\n        carrierInfo: shop\r\n      });\r\n    }\r\n    var addressid = $this.data.addressid;\r\n    if (address.id>0 ){\r\n      $this.addressid = address.id;\r\n      $this.setData({addressid:address.id});\r\n      $this.getDetail();\r\n    }\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    var member = $this.data.member;\r\n    if(member==''){\r\n      $this.getDetail();\r\n    }\r\n    \r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  /*核销人员信息*/\r\n  listChange: function (e) {\r\n    var member = this.data.member, id = e.target.id;\r\n    switch (id) {\r\n      case 'realname': member.realname = e.detail.value; break;\r\n      case 'mobile': member.mobile = e.detail.value; break;\r\n    }\r\n    this.setData({\r\n      member: member\r\n    })\r\n  },\r\n  /*订单详情*/\r\n  getDetail:function(){\r\n    var $this = this;\r\n    var options = $this.data.options;\r\n    core.get('creditshop/create', options, function (result) {\r\n      if(result.error==0){\r\n        result.goods.num = 1;\r\n        $this.setData({\r\n          goods: result.goods,\r\n          address: result.address,\r\n          shop: result.shop,\r\n          stores: result.stores,\r\n          isverify: result.goods.isverify,\r\n          member: result.member,\r\n          addressid:result.address.id\r\n        });\r\n        var allprice = 0;\r\n        if (result.goods.isverify == 0 && result.goods.type==0 && result.address.id>0) {\r\n          \r\n          core.get('creditshop/create/getaddress', { addressid: $this.addressid}, function (rest) {\r\n            if(rest.error ==0){\r\n              $this.setData({ address: rest.address});\r\n            }\r\n          })\r\n          $this.dispatch();\r\n        }else{\r\n          $this.setData({ allprice: result.goods.money });\r\n        }\r\n        \r\n      }\r\n      \r\n    });\r\n  },\r\n  dispatch:function(){\r\n    var $this = this;\r\n    core.get('creditshop/create/dispatch', { goodsid: $this.data.goods.id, optionid: $this.data.options.optionid }, function (res) {\r\n      var allprice = res.dispatch;\r\n      allprice = parseFloat(allprice) + parseFloat($this.data.goods.money);\r\n      $this.setData({ dispatchprice: res.dispatch, allprice: allprice });\r\n    });     \r\n  },\r\n  number: function (e) {\r\n    var $this = this,\r\n      goods = $this.data.goods,\r\n      options = $this.data.options;\r\n    var action = e.target.dataset.action;\r\n    if (action=='minus'){\r\n      goods.num = parseInt(goods.num) - 1;\r\n    } else if (action == 'plus') {\r\n      goods.num = parseInt(goods.num) + 1;\r\n    }\r\n    if (goods.num<1){\r\n      goods.num = 1;\r\n    }\r\n    var num = goods.num;\r\n    core.get('creditshop/create/number', { goodsid: goods.id, optionid: options.id, num: num}, function (res) {\r\n      if (res.goods.canbuy == false) {\r\n        if (goods.num>1){\r\n          goods.num = parseInt(goods.num)-1;\r\n        }\r\n        $this.setData({goods:goods});\r\n        foxui.toast($this, res.goods.buymsg);\r\n        return;\r\n      } else {\r\n        goods = res.goods;\r\n        goods.num = num;\r\n        var allprice = parseFloat(goods.money * num) + parseFloat(goods.dispatch);\r\n        $this.setData({ goods: goods, allprice: allprice});\r\n      }\r\n    });  \r\n  },\r\n  /*\r\n  inputNumber:function(e){\r\n    var $this = this;\r\n    var goods = $this.data.goods;\r\n    var options = $this.data.options;\r\n    goods.num = parseInt(e.detail.value);\r\n    var num = goods.num;\r\n    core.get('creditshop/create/number', { goodsid: goods.id, optionid: options.id, num: num }, function (res) {\r\n      if (res.goods.canbuy == false) {\r\n        if (goods.num > 1) {\r\n          goods.num = parseInt(goods.num) - 1;\r\n        }\r\n        $this.setData({ goods: goods });\r\n        foxui.toast($this, res.goods.buymsg);\r\n        return;\r\n      } else {\r\n        goods = res.goods;\r\n        var allprice = parseFloat(goods.money * num) + parseFloat(goods.dispatch);\r\n        $this.setData({ goods: goods, allprice: allprice });\r\n      }\r\n    });  \r\n  },*/\r\n  // 立即支付\r\n  pay: function(){\r\n    var $this = this;\r\n    var goods = $this.data.goods;\r\n    if (!goods.canbuy) {\r\n      foxui.toast($this, $this.data.goods.buymsg);\r\n      return;\r\n    }\r\n    /*核销商品提交订单*/\r\n    if (goods.isverify>0){\r\n      var member = $this.data.member;\r\n      if(member.realname==''){\r\n        foxui.toast($this, \"请填写真实姓名\");\r\n        return;\r\n      }\r\n      if(member.mobile==''){\r\n        foxui.toast($this, \"请填写联系电话\");\r\n        return;\r\n      }\r\n      var carrierInfo = $this.data.carrierInfo;\r\n      if (carrierInfo.length==0){\r\n        foxui.toast($this, \"请选择兑换门店\");\r\n        return;\r\n      }\r\n    }\r\n     \r\n    /*选择地址*/\r\n    if (goods.isverify == 0 && goods.goodstype == 0 && goods.type==0){\r\n      var addressid = $this.data.addressid;\r\n      if (addressid == 0 || addressid == undefined){\r\n        foxui.toast($this, \"请选择收货地址\");\r\n        return;\r\n      }\r\n    }\r\n    if (goods.type == 1){\r\n      $this.setData({ addressid: 0 });\r\n    }\r\n\r\n    $this.setData({ paymentmodal:true});\r\n  },\r\n  // 取消\r\n  cancel: function() {\r\n    var $this = this;\r\n    $this.setData({ paymentmodal: false, showmodal: false});\r\n  },\r\n  /*支付*/\r\n  payClick:function(e){\r\n    var $this = this;\r\n    var paytype = e.target.dataset.type;\r\n    $this.setData({ paymentmodal: false, showmodal: true, paytype: paytype});\r\n  },\r\n  // 确定\r\n  confirm: function() {\r\n    var $this = this;\r\n    var paytype = $this.data.paytype;\r\n    core.get('creditshop/detail/pay', { id: $this.data.goods.id, optionid: $this.data.optionid, num: $this.data.goods.num, paytype: $this.data.paytype, addressid: $this.data.addressid, storeid: $this.data.carrierInfo.id}, function (res) {\r\n      if(res.error>0){\r\n        foxui.toast($this, res.message);\r\n        return;\r\n      }\r\n      $this.setData({ logid: res.logid});\r\n      if (res.wechat && res.wechat.success) {\r\n        core.pay(res.wechat.payinfo, function (res) {\r\n          if (res.errMsg == \"requestPayment:ok\") {\r\n            $this.lottery()\r\n          }\r\n        });\r\n      } \r\n      if (paytype =='credit' && res.logid>0){\r\n        $this.lottery();\r\n      }\r\n      \r\n    });   \r\n  },\r\n  /*确认兑换成功*/\r\n  success:function(){\r\n    var $this = this;\r\n    var logid = $this.data.logid;\r\n    //$this.setData({ successmodal:false});\r\n    wx.redirectTo({\r\n      url: '/pages/creditshop/log/detail/index?id='+logid ,\r\n    });\r\n  },\r\n  lottery:function(){\r\n    var $this = this;\r\n    var gtype = $this.data.goods.type;\r\n    var successmessage = '';\r\n    if(gtype==0){\r\n      core.get('creditshop/detail/lottery', { id: $this.data.goods.id, logid:$this.data.logid}, function (res) {\r\n        if (res.error > 0) {\r\n          foxui.toast($this, res.message);\r\n          return;\r\n        }\r\n        if (res.status==2){\r\n          successmessage = \"恭喜您，商品兑换成功\";\r\n        }\r\n        if(res.status==3){\r\n          if (res.goodstype==1){\r\n            successmessage = \"恭喜您，优惠券兑换成功\";\r\n          } else if (res.goodstype == 2){\r\n            successmessage = \"恭喜您，余额兑换成功\";\r\n          } else if (res.goodstype == 3){\r\n            successmessage = \"恭喜您，红包兑换成功\";\r\n          }\r\n        }\r\n        $this.setData({ successmessage: successmessage,successstatus:true})\r\n      });   \r\n    }else{\r\n      successmessage = \"努力抽奖中，请稍后....\";\r\n      $this.setData({ successmessage: successmessage, successstatus: true })\r\n      setTimeout(function(){\r\n        core.get('creditshop/detail/lottery', { id: $this.data.goods.id, logid:$this.data.logid}, function (res) {\r\n          if (res.error > 0) {\r\n            foxui.toast($this, res.message);\r\n            return;\r\n          }\r\n          if (res.status==2){\r\n            successmessage = \"恭喜您，您中奖啦\";\r\n          }else if(res.status==3){\r\n            if (res.goodstype==1){\r\n              successmessage = \"恭喜您，优惠券已经发到您账户啦\";\r\n            } else if (res.goodstype == 2){\r\n              successmessage = \"恭喜您，余额已经发到您账户啦\";\r\n            } else if (res.goodstype == 3){\r\n              successmessage = \"恭喜您，红包兑换成功\";\r\n            }\r\n          }else{\r\n            successmessage = \"很遗憾，您没有中奖\";\r\n          }\r\n          $this.setData({ successmessage: successmessage,successstatus:true})\r\n        });   \r\n      },1000);\r\n\r\n    }\r\n    $this.setData({ successmodal: true });\r\n  },\r\n  toggle: function (e) {\r\n    var $this = this;\r\n    var togglestore = $this.data.togglestore;\r\n    if (togglestore==''){\r\n      $this.setData({ togglestore:'toggleSend-group'});\r\n    }else{\r\n      $this.setData({ togglestore: '' });\r\n    }\r\n    \r\n  },\r\n\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\n\r\n// pages/creditshop/verify/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n      eno:0,\r\n      qrcode:'',\r\n      logid:0,\r\n      options:[],\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({ options: options, logid:options.id});\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.getDetail();\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  getDetail:function(id){\r\n    var $this = this;\r\n    core.get('creditshop/exchange/qrcode', { id: $this.data.logid},function(msg){\r\n      $this.setData({eno:msg.eno,qrcode:msg.qrcode});\r\n    })\r\n  }\r\n})","\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    swiperCurrent:0,\r\n    indicatorDots:true,\r\n    autoplay:true,\r\n    interval:3000,\r\n    duration:800,\r\n    circular:true,\r\n    //轮播图url\r\n    imgUrls:[],\r\n    //轮播图链接\r\n    links:[],\r\n    //参数\r\n    params:{},\r\n    //积分抽奖\r\n    lotterydraws:[],\r\n    //积分兑换\r\n    exchanges:[],\r\n    //优惠券\r\n    coupons:[],\r\n    //余额兑换\r\n    balances:[],\r\n    //红包兑换\r\n    //redbags:[],\r\n    category:[],\r\n    hidden:false,\r\n    keywords:''\r\n  },\r\n\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n  },\r\n  doinput: function (e) {\r\n    this.setData({ keywords: e.detail.value });\r\n  },\r\n  search: function () {\r\n    var url = '/pages/creditshop/lists/index?keywords='+this.data.keywords;\r\n    wx.navigateTo({\r\n      url: url\r\n    });\r\n  },\r\n\r\n  focus: function(){\r\n    this.setData({showbtn: 'in'})\r\n  },\r\n\r\n  onReady:function(){\r\n    var $this = this;\r\n    $this.get_index();\r\n  },\r\n\r\n  changeTo:function( e ){\r\n    var url = e.currentTarget.dataset.url+'?id='+e.currentTarget.dataset.gid\r\n    wx.navigateTo({\r\n      url:url\r\n    });\r\n  },\r\n\r\n  get_index:function(){\r\n    var $this = this;\r\n    core.post('creditshop/index', $this.data.params,function(msg){\r\n      if( msg.error == 0 ){\r\n        $this.setData({ \r\n          imgUrls: msg.data.advs, \r\n          category: msg.data.category,\r\n          lotterydraws: msg.data.lotterydraws,\r\n          exchanges: msg.data.exchanges,\r\n          coupons: msg.data.coupons,\r\n          balances: msg.data.balances,\r\n          redbags: msg.data.redbags,\r\n          sysset: msg.sysset\r\n        });\r\n      }\r\n      $this.setData({ hidden: true });\r\n    });\r\n  \r\n  \r\n  },\r\n  \r\n})","var app = getApp(), core = app.requirejs('core'),$ = app.requirejs('jquery');\r\nvar selectdate = app.requirejs('biz/selectdate'), foxui = app.requirejs('foxui');\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    status: '0',\r\n    currentDate: \"\",\r\n    dayList: '',\r\n    currentDayList: '',\r\n    currentObj: '',\r\n    currentDay: '',\r\n    cycelData:{},\r\n    nowDate:'',\r\n    maxday:'',\r\n    cycelbuy_periodic:'',\r\n    period_index:1,\r\n    cycelid:'',\r\n    orderid:'',\r\n    refundstate:0,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this=this;\r\n    var isIpx = app.getCache('isIpx');\r\n    if (isIpx) {\r\n      this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n  \r\n    this.get_list();\r\n  },\r\n\r\n  show_cycelbuydate: function () {\r\n    var $this = this;\r\n    /*周期购时间选择器初始化*/\r\n    var currentObj = selectdate.getCurrentDayString(this, $this.data.nowDate);\r\n    var week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n    $this.setData({\r\n      currentObj: currentObj,\r\n      currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate() + '日 ' + week[currentObj.getDay()],\r\n      currentYear: currentObj.getFullYear(),\r\n      currentMonth: (currentObj.getMonth() + 1),\r\n      currentDay: currentObj.getDate(),\r\n      initDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      checkedDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      maxday: $this.data.maxday,//可选的天数\r\n      cycelbuy_periodic: $this.data.cycelbuy_periodic,//周期购数据   时间间隔，单位，期数\r\n      period_index: $this.data.period_index,//当前第几期\r\n    })\r\n  },\r\n\r\n  cycle:function(e){\r\n    var index = e.currentTarget.dataset.status;\r\n    var period_index = index + 1;\r\n    this.setData({ status: e.currentTarget.dataset.status, cycelid: e.currentTarget.dataset.id, period_index: period_index})\r\n  },\r\n\r\n    // 取消时间选择时间\r\n    syclecancle: function () {\r\n        this.setData({\r\n            cycledate: false\r\n        });\r\n    },\r\n    //确定选择时间\r\n    sycleconfirm: function () {\r\n      var $this = this;\r\n      var cycelid = $this.data.cycelid;\r\n      var newDate = $this.data.checkedDate / 1000; \r\n      var orderid = $this.data.orderid;\r\n      var isall = $this.data.isdelay;\r\n      core.get('order/do_deferred', { cycelid: cycelid, time: newDate, orderid: orderid,is_all:isall},function(res){\r\n        \r\n        if(res.error == 0){\r\n          foxui.toast($this,'修改成功');\r\n        }\r\n      });\r\n      this.setData({\r\n          cycledate: false\r\n      });\r\n    },\r\n    // 周期购 修改送达时间\r\n    editdate: function (e) {\r\n        var $this = this;\r\n        var isdelay=e.currentTarget.dataset.isdelay;\r\n        var cycelid = e.currentTarget.dataset.id;\r\n        core.get('order/getCycelbuyDate', { cycelid: cycelid}, function (res) {\r\n          $this.setData({ nowDate: res.receipttime});\r\n          $this.show_cycelbuydate();\r\n          selectdate.setSchedule($this);\r\n        })\r\n        \r\n        this.setData({\r\n            isdelay: isdelay\r\n        });\r\n        \r\n        this.setData({\r\n            cycledate: true\r\n        });\r\n    },\r\n\r\n    //时间选择器 前后月份选择\r\n    doDay: function (e) {\r\n        selectdate.doDay(e,this);\r\n    },\r\n    //周期购选择时间\r\n    selectDay: function (e) {\r\n        selectdate.selectDay(e,this);\r\n        selectdate.setSchedule(this);  \r\n    },\r\n\r\n  //获取周期购数据\r\n  get_list:function(){\r\n    var $this = this;\r\n    core.get('order/cycelbuy_list', $this.options,function(res){\r\n     \r\n      if(res.error > 0){\r\n        if (list.error != 50000) {\r\n          core.toast(list.message, 'loading');\r\n        }\r\n      }\r\n \r\n      if (res.notStart == false){\r\n        $.each(res.list,function(index,data){\r\n          if(data.status == 1){\r\n            $this.setData({\r\n              status:index\r\n            })\r\n          }else{\r\n            $this.setData({\r\n              status: res.period_index,\r\n            })\r\n          }\r\n        })\r\n      }\r\n      $this.setData({cycelid:res.list[0]['id'],orderid:res.orderid});\r\n      $this.setData(res);\r\n\r\n    })\r\n  },\r\n  confirm_receipt:function(e){\r\n    var $this = this;\r\n    var id = e.currentTarget.dataset.id;\r\n    var orderid = $this.data.orderid;\r\n    core.get('order/confirm_receipt', { id:id,orderid:orderid }, function (res) {\r\n\r\n      if (res.error == 0) {\r\n        foxui.toast($this, '修改成功');\r\n        $this.onLoad();\r\n      }\r\n    });\r\n  }\r\n  \r\n})","/**\r\n *\r\n * address\\post.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-18\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar fui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    id: null,\r\n    posting: false,\r\n    subtext: \"保存地址\",\r\n    detail: {\r\n      realname: '',\r\n      mobile: '',\r\n      areas: '',\r\n      street: '',\r\n      address: ''\r\n    },\r\n    showPicker: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],  // 原始数据\r\n    street: [],\r\n    streetIndex: 0,\r\n    noArea: false,\r\n    cycelid:''\r\n  },\r\n  onLoad: function (options) {\r\n    this.setData({ id: Number(options.orderid), cycelid: Number(options.cycelid), applyid: Number(options.applyid) });\r\n    app.url(options);\r\n    this.getDetail();\r\n    if (!options.id) {\r\n      wx.setNavigationBarTitle({ title: '添加收货地址' })\r\n    }\r\n    this.setData({ areas: app.getCache(\"cacheset\").areas, type: options.type });\r\n  },\r\n  getDetail: function () {\r\n    var $this = this;\r\n    var id = $this.data.id;\r\n    core.get('order/address', { id: id, applyid: $this.data.applyid, cycelid: $this.data.cycelid}, function (result) {\r\n      var data = { openstreet: result.openstreet, show: true };\r\n      if (!$.isEmptyObject(result.detail)) {\r\n        wx.setNavigationBarTitle({ title: '编辑收货地址' });\r\n        var area = result.detail.province + \" \" + result.detail.city + \" \" + result.detail.area;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        data.pval = index;\r\n        data.pvalOld = index;\r\n        data.detail = result.detail;\r\n      }\r\n      $this.setData(data);\r\n      if (result.openstreet && index) {\r\n        $this.getStreet($this.data.areas, index);\r\n      }\r\n    });\r\n  },\r\n  submit: function () {\r\n    var $this = this;\r\n    var detail = $this.data.detail;\r\n    if ($this.data.posting) {\r\n      return;\r\n    }\r\n    if (detail.realname == '' || !detail.realname) {\r\n      fui.toast($this, \"请填写收件人\");\r\n      return;\r\n    } if (detail.mobile == '' || !detail.mobile) {\r\n      fui.toast($this, \"请填写联系电话\");\r\n      return;\r\n    }\r\n    if (detail.city == '' || !detail.city) {\r\n      fui.toast($this, \"请选择所在地区\");\r\n      return;\r\n    }\r\n    if ($this.data.street.length > 0 && (detail.street == '' || !detail.street)) {\r\n      fui.toast($this, \"请选择所在街道\");\r\n      return;\r\n    }\r\n    if (detail.address == '' || !detail.address) {\r\n      fui.toast($this, \"请填写详细地址\");\r\n      return;\r\n    }\r\n\r\n    if (!detail.datavalue) {\r\n      fui.toast($this, \"地址数据出错，请重新选择\");\r\n      return;\r\n    }\r\n\r\n    detail.orderid = $this.data.id;\r\n    detail.cycelid = $this.data.cycelid;\r\n    $this.setData({ posting: true });\r\n    core.post('order/addressSubmit', detail, function (result) {\r\n      \r\n      if (result.error != 0) {\r\n        $this.setData({ posting: false });\r\n        fui.toast($this, result.message);\r\n        return;\r\n      }\r\n      $this.setData({ subtext: \"提交成功\" });\r\n      core.toast(\"提交成功\");\r\n      // setTimeout(function () {\r\n      //   wx.navigateBack();\r\n      // }, 1000);\r\n    });\r\n  },\r\n  onChange: function (event) {\r\n    var $this = this;\r\n    var vname = $this.data.detail;\r\n    var bindtype = event.currentTarget.dataset.type;\r\n    var value = $.trim(event.detail.value);\r\n    if (bindtype == 'street') {\r\n      vname.streetdatavalue = $this.data.street[value].code\r\n      value = $this.data.street[value].name;\r\n    }\r\n    vname[bindtype] = value;\r\n    $this.setData({ detail: vname });\r\n  },\r\n  getStreet: function (areas, val) {\r\n    if (!areas || !val) {\r\n      return;\r\n    }\r\n    var $this = this;\r\n    if (!$this.data.detail.province || !$this.data.detail.city || !this.data.openstreet) {\r\n      return;\r\n    }\r\n    var city = areas[val[0]].city[val[1]].code;\r\n    var area = areas[val[0]].city[val[1]].area[val[2]].code;\r\n    core.get('getstreet', { city: city, area: area }, function (result) {\r\n      var street = result.street;\r\n      var data = { street: street };\r\n      if (street && $this.data.detail.streetdatavalue) {\r\n        for (var i in street) {\r\n          if (street[i].code == $this.data.detail.streetdatavalue) {\r\n            data.streetIndex = i;\r\n            $this.setData({ 'detail.street': street[i].name });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  },\r\n  selectArea: function (e) {\r\n    var area = e.currentTarget.dataset.area;\r\n    var index = this.getIndex(area, this.data.areas);\r\n    this.setData({ pval: index, pvalOld: index, showPicker: true })\r\n  },\r\n  bindChange: function (e) {\r\n    var oldValue = this.data.pvalOld;\r\n    var newValue = e.detail.value;\r\n    if (oldValue[0] != newValue[0]) {\r\n      newValue[1] = 0;\r\n    }\r\n    if (oldValue[1] != newValue[1]) {\r\n      newValue[2] = 0;\r\n    }\r\n    this.setData({ pval: newValue, pvalOld: newValue });\r\n  },\r\n  onCancel: function (e) {\r\n    this.setData({ showPicker: false });\r\n  },\r\n  onConfirm: function (e) {\r\n    var val = this.data.pval;\r\n    var areas = this.data.areas;\r\n    var detail = this.data.detail;\r\n    detail.province = areas[val[0]].name;\r\n    detail.city = areas[val[0]].city[val[1]].name;\r\n    detail.datavalue = areas[val[0]].code + \" \" + areas[val[0]].city[val[1]].code;\r\n    if (areas[val[0]].city[val[1]].area && areas[val[0]].city[val[1]].area.length > 0) {\r\n      detail.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n      detail.datavalue += \" \" + areas[val[0]].city[val[1]].area[val[2]].code;\r\n      this.getStreet(areas, val);\r\n    } else {\r\n      detail.area = \"\";\r\n    }\r\n    detail.street = '';\r\n    this.setData({ detail: detail, streetIndex: 0, showPicker: false });\r\n  },\r\n  getIndex: function (str, areas) {\r\n    if ($.trim(str) == '' || !$.isArray(areas)) {\r\n      return [0, 0, 0];\r\n    }\r\n    var arr = str.split(\" \");\r\n    var index = [0, 0, 0];\r\n    for (var i in areas) {\r\n      if (areas[i].name == arr[0]) {\r\n        index[0] = Number(i);\r\n        for (var ii in areas[i].city) {\r\n          if (areas[i].city[ii].name == arr[1]) {\r\n            index[1] = Number(ii);\r\n            for (var iii in areas[i].city[ii].area) {\r\n              if (areas[i].city[ii].area[iii].name == arr[2]) {\r\n                index[2] = Number(iii);\r\n                break;\r\n              }\r\n            }\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n    return index;\r\n  },\r\n  updateAll:function(e){\r\n   \r\n  }\r\n})","/**\r\n *\r\n * order/index.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-02-04\r\n *\r\n */\r\nvar app = getApp(),\r\n  core = app.requirejs('core'),\r\n  order = app.requirejs('biz/order');\r\nPage({\r\n  data: {\r\n    icons: app.requirejs('icons'),\r\n    status: '',\r\n    list: [],\r\n    page: 1,\r\n    code: false,\r\n    cancel: order.cancelArray,\r\n    cancelindex: 0\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    this.setData({\r\n      options: options,\r\n      status: options.status || ''\r\n    });\r\n    app.url(options);\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    $this.setData({ loading: true });\r\n    core.get('order/cycel_orderList', { page: $this.data.page, status: $this.data.status, merchid: 0 }, function (list) {\r\n      if (list.error == 0) {\r\n        $this.setData({ loading: false, show: true, total: list.total, empty: true });\r\n        if (list.list.length > 0) {\r\n          $this.setData({\r\n            page: $this.data.page + 1,\r\n            list: $this.data.list.concat(list.list)\r\n          });\r\n        }\r\n        if (list.list.length < list.pagesize) {\r\n          $this.setData({\r\n            loaded: true\r\n          });\r\n        }\r\n      } else {\r\n        core.toast(list.message, 'loading')\r\n      }\r\n    }, this.data.show);\r\n  },\r\n  selected: function (e) {\r\n    var status = core.data(e).type;\r\n    this.setData({\r\n      list: [],\r\n      page: 1,\r\n      status: status,\r\n      empty: false\r\n    });\r\n    this.get_list();\r\n  },\r\n  onReachBottom: function () {\r\n    if (this.data.loaded || this.data.list.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.get_list();\r\n  },\r\n  code: function (e) {\r\n    var $this = this, orderid = core.data(e).orderid;\r\n    core.post('verify/qrcode', { id: orderid }, function (json) {\r\n      if (json.error == 0) {\r\n        $this.setData({\r\n          code: true,\r\n          qrcode: json.url\r\n        })\r\n      } else {\r\n        core.alert(json.message);\r\n      }\r\n    }, true);\r\n  },\r\n  close: function () {\r\n    this.setData({\r\n      code: false\r\n    })\r\n  },\r\n  cancel: function (e) {\r\n    var orderid = core.data(e).orderid;\r\n    order.cancel(orderid, e.detail.value, '/pages/order/index?status=' + this.data.status);\r\n  },\r\n  delete: function (e) {\r\n    var type = core.data(e).type, orderid = core.data(e).orderid;\r\n    order.delete(orderid, type, '/pages/order/index', this);\r\n  },\r\n  finish: function (e) {\r\n    var type = core.data(e).type, orderid = core.data(e).orderid;;\r\n    order.finish(orderid, '/pages/order/index');\r\n  },\r\n  onShareAppMessage: function () {\r\n    return core.onShareAppMessage();\r\n  }\r\n});","/**\r\n *\r\n * order/express/number.js\r\n *\r\n * @create 2018-5-7\r\n * @author Liugt\r\n *\r\n *\r\n */\r\nvar app = getApp(), core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    express:'',\r\n    expresscom:'',\r\n    express_number:'',\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    this.setData({\r\n      options: options\r\n    });\r\n    app.url(options);\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    if(typeof($this.data.options.singlerefund)=='undefined'){\r\n        core.get('order/express_number', $this.data.options, function (list) {\r\n             \r\n              if (list.error == 0) {\r\n                list.show = true;\r\n                $this.setData(list);\r\n              } else {\r\n                core.toast(list.message, 'loading')\r\n              }\r\n            });\r\n    }else{\r\n        core.get('order/single_express_number', $this.data.options, function (list) {\r\n         \r\n            if (list.error == 0) {\r\n                list.show = true;\r\n                $this.setData(list);\r\n            } else {\r\n                core.toast(list.message, 'loading')\r\n            }\r\n        });\r\n    }\r\n  },\r\n  inputPrickChange: function(e){\r\n    var $this = this;\r\n    var express_list = $this.data.express_list;\r\n    var index = e.detail.value;\r\n    var expresscom = express_list[index].name;\r\n    var express = express_list[index].express;\r\n    $this.setData({ expresscom: expresscom,express:express,index:index });\r\n  },\r\n  inputChange:function(e){\r\n    var express_number = e.detail.value;\r\n    this.setData({express_number:express_number});\r\n  },\r\n  back:function(){\r\n    wx.navigateBack();\r\n  },\r\n  submit:function(e){\r\n    var $this = this;\r\n    var refundid = e.currentTarget.dataset.refund;\r\n    var express_number = $this.data.express_number;\r\n    var refundid = $this.data.options.refundid;\r\n    var orderid = $this.data.options.id;\r\n    if(express_number==\"\"){\r\n      foxui.toast($this, \"请填写快递单号\");\r\n      return;\r\n    }\r\n\r\n    var express = $this.data.express;\r\n    var expresscom = $this.data.expresscom;\r\n\r\n    if(typeof($this.data.options.singlerefund)=='undefined'){\r\n      core.get('order/express_number', { submit:1,refundid: refundid, orderid: orderid, express_number: express_number, express: express, expresscom: expresscom},function(result){\r\n        if(result.error == 0){\r\n          wx.navigateTo({\r\n            url: '/pages/order/detail/index?id='+orderid,\r\n          })\r\n        }\r\n      });\r\n    }else{\r\n        core.get('order/single_express_number', { submit:1,refundid: refundid, orderid: orderid, express_number: express_number, express: express, expresscom: expresscom},function(result){\r\n            if(result.error == 0){\r\n                wx.navigateTo({\r\n                    url: '/pages/order/detail/index?id='+orderid,\r\n                })\r\n            }\r\n        });\r\n    }\r\n  }\r\n});","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    page: 1,\r\n    cate: 'all',\r\n    list:[]\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    $this.setData({options: options,cate: options.cate || ''})\r\n    if (options.hasmembercard == 'true') {\r\n      $this.setData({ cate: 'my' })\r\n    }\r\n    $this.get_list()\r\n  },\r\n\r\n  tab: function(e){\r\n    var $this = this;\r\n    $this.setData({ cate: e.currentTarget.dataset.cate,list: [],page: 1})\r\n    $this.get_list()\r\n  },\r\n  onReachBottom: function () {\r\n    \r\n    if (this.data.loaded || this.data.list.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    $this.setData({ loading: true });\r\n    core.get('membercard.getlist', { page: $this.data.page, cate: $this.data.cate}, function (res) {\r\n      if (res.error == 0) {\r\n        $this.setData({ loading: false, total: res.total, empty: true, all_total: res.all_total, my_total: res.my_total});\r\n        if (res.list.length > 0) {\r\n          $this.setData({\r\n            page: $this.data.page + 1,\r\n            list: $this.data.list.concat(res.list)\r\n          });\r\n        }\r\n        if (res.list.length > res.pagesize) {\r\n          $this.setData({\r\n            loaded: true\r\n          });\r\n        }\r\n      } else {\r\n        core.toast(res.message, 'loading')\r\n      }\r\n    }, this.data.show);\r\n  },\r\n  // 立即开通\r\n  // 购买\r\n  submit: function (e) {\r\n    var data = e.currentTarget.dataset,$this = this;\r\n    if (data.startbuy == -1){\r\n      return\r\n    }\r\n    if (data.stock == '0') {\r\n      foxui.toast($this, '库存不足');\r\n      return\r\n    }\r\n    core.post('membercard.order.create_order', { id: data.id }, function (res) {\r\n      if (res.error != 0) {\r\n        foxui.toast($this, res.message);\r\n        return;\r\n      }\r\n      wx.navigateTo({\r\n        url: '/pages/member/membercard/pay/index?order_id=' + res.order.order_id\r\n      })\r\n    })\r\n  },\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    list: [\r\n      \r\n    ],\r\n    indicatorDots: false,\r\n    autoplay: false,\r\n    current: 0,\r\n    \r\n    modal: false,\r\n  },\r\n\r\n  onLoad: function(options){\r\n    var $this = this, args = {cate: options.cate};\r\n    var isIpx = app.getCache('isIpx');\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.setData({ options: options })\r\n    if(options.id){\r\n      args.id = options.id;\r\n      args.page = options.page;\r\n      $this.setData({id: options.id})\r\n    }\r\n    $this.getlist(args)\r\n  },\r\n\r\n  // submit: function(){\r\n  //   this.setData({ modal: false})\r\n  // },\r\n\r\n  swiperchange: function(e){\r\n    this.setData({ current: e.detail.current})\r\n  },\r\n  getlist: function(args){\r\n    var $this = this;\r\n    core.get('membercard.detail', args, function(res){\r\n      if(res.error == 0){\r\n        if (args.id){\r\n          for(var i in res.list){\r\n            if (args.id == res.list[i].id){\r\n              $this.setData({ current: i})\r\n            }\r\n          }\r\n        }\r\n        $this.setData({list: res.list})\r\n      }\r\n    })\r\n  },\r\n\r\n  // 购买\r\n  submit: function(e){\r\n    var data = e.currentTarget.dataset,$this = this;\r\n    console.error(data)\r\n    if (data.startbuy == -1) {\r\n      return\r\n    }\r\n    if (data.stock == '0') {\r\n      foxui.toast($this, '库存不足');\r\n      return\r\n    }\r\n    core.post('membercard.order.create_order', { id: data.id }, function(res){\r\n      if (res.error != 0) {\r\n        foxui.toast($this, res.message);\r\n        return;\r\n      }\r\n      wx.navigateTo({\r\n        url: '/pages/member/membercard/pay/index?order_id=' + res.order.order_id\r\n      })\r\n    }) \r\n  },\r\n\r\n  // 领取每月优惠券\r\n  coupon: function(e){\r\n    var $this = this, data = e.currentTarget.dataset, current = $this.data.current, list = $this.data.list, options = $this.data.options, arg = { cate: options.cate };\r\n    var args = { id: data.id, couponid: data.couponid }\r\n    if (data.issend){\r\n      return\r\n    }\r\n    if (options.id) {\r\n      arg.id = options.id;\r\n    }\r\n\r\n    core.post('membercard.get_month_coupon', args, function(res){\r\n      if(res.error == 0){\r\n        foxui.toast($this, '领取成功')\r\n        for (var i in list[current].month_coupon) {\r\n          if (data.couponid == list[current].month_coupon[i].id) {\r\n            list[current].month_coupon[i].isget_month_coupon = true\r\n            $this.setData({list: list})\r\n          }\r\n        }\r\n      }else{\r\n        foxui.toast($this, res.message)\r\n      }\r\n    })\r\n  },\r\n\r\n  // 领取每月积分\r\n  credit: function (e) {\r\n    var $this = this, data = e.currentTarget.dataset, list = $this.data.list, current = $this.data.current,options = $this.data.options, arg = { cate: options.cate };\r\n    var args = { id: data.id }\r\n    if (data.iscredit) {\r\n      return\r\n    }\r\n    core.post('membercard.get_month_point', args, function (res) {\r\n      if (res.error == 0) {\r\n        foxui.toast($this, '领取成功')\r\n        list[current].isget_month_point = 1;\r\n        $this.setData({list: list})\r\n      } else {\r\n        foxui.toast($this, res.message)\r\n      }\r\n    })\r\n  }\r\n})","/**\r\n *\r\n * order/pay/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data: {\r\n        icons:app.requirejs('icons'),\r\n        success:false,\r\n        successData:{},\r\n\r\n        coupon: false,\r\n        show: true\r\n    },\r\n    onLoad: function (options) {\r\n        var $this = this;\r\n        this.setData({\r\n            options: options\r\n        });\r\n    },\r\n    onShow:function () {\r\n        this.get_list();\r\n    },\r\n    get_list:function () {\r\n        var $this=this;\r\n        this.setData({ order_id: $this.data.options.order_id});\r\n        core.post('membercard.order.pay', { order_id: $this.data.options.order_id}, function (res) {\r\n            console.error(res)\r\n            \r\n            if( res.error == 1 ){\r\n              core.alert(res.message);\r\n            }\r\n            $this.setData({ wechat: res.wechat, credit: res.credit, order: res.order, show: true })\r\n            return\r\n        });\r\n    },\r\n    pay: function (e) {\r\n        var type = core.pdata(e).type,$this=this,wechat = this.data.wechat;\r\n        if (type == 'wechat') {\r\n          core.pay(wechat.payinfo,function (res) {\r\n                if (res.errMsg == \"requestPayment:ok\"){\r\n                    $this.complete(type)\r\n                }\r\n            });\r\n        } else if (type == 'credit') {\r\n            core.confirm('确认要支付吗?', function () {\r\n                $this.complete(type)\r\n            }, function () {\r\n            })\r\n        } else {\r\n            $this.complete(type)\r\n        }\r\n    },\r\n    complete: function (type) {\r\n        var $this = this;\r\n        core.post('membercard/order/complete', {id: $this.data.order.id, type: type}, function (ret) {\r\n          if(ret.error != 0){\r\n            foxui.toast($this, ret.message)\r\n            return\r\n          }\r\n          if (ret.error == 0) {\r\n                wx.setNavigationBarTitle({title: '支付成功'});\r\n                $this.setData({\r\n                    success: true,\r\n                    pay_type: ret.type,\r\n                    pay_fee: ret.fee,\r\n                    orderno: ret.orderno,\r\n                    pay_msg: ret.msg\r\n                });\r\n            }\r\n            foxui.toast($this, ret.msg)\r\n            setTimeout(function(){\r\n              wx.reLaunch({\r\n                url: '/pages/member/membercard/index?cate=my',\r\n              })\r\n            },500)\r\n        }, true, true)\r\n    }\r\n});","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this =this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300);\r\n    console.log('wwwwww')\r\n    wx.reLaunch({\r\n      url: '../../../groups/index/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this = this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300)\r\n    wx.reLaunch({\r\n      url: '/bargain/index/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this = this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300)\r\n    wx.reLaunch({\r\n      url: '/seckill/pages/index/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","// pages/mall_index/mall_index.js\r\nvar app = getApp()\r\nvar core = app.requirejs('core');\r\nvar goodspicker = app.requirejs('biz/goodspicker'), foxui = app.requirejs('foxui'), diyform = app.requirejs('biz/diyform');\r\n\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    arrLabel: [],\r\n    num: [],  // 购物车商品数量\r\n    clickCar: false, // 点击出现购物车列表\r\n    num: 0,\r\n    change: false,\r\n    div: false,\r\n    numtotal: {},\r\n    clearcart: true,\r\n    canBuy: '',\r\n    // 购物车\r\n    specs: [],\r\n    options: [],\r\n    diyform: {},\r\n    specsTitle: '',\r\n    total: 1,\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    buyType: '',\r\n    areas: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n    closespecs: false,\r\n    buyType: 'cart',\r\n    quickbuy: true,\r\n    formdataval: {},\r\n    showPicker: false\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    wx.showLoading({\r\n      title: '加载中...',\r\n    })\r\n    var pageid = options.id;\r\n\r\n    if (pageid==undefined){\r\n        var pages = getCurrentPages(); //获取页面栈\r\n        var url_arr = pages[pages.length - 1].route.split(\"/\");//当前页面路径/分割后的数组\r\n        pageid = url_arr[url_arr.length - 1];\r\n    }\r\n\r\n\r\n\r\n    var that = this;\r\n    let systemInfo = wx.getStorageSync('systemInfo');\r\n\r\n    this.busPos = {};\r\n    this.busPos['x'] = 45;//购物车的位置\r\n    this.busPos['y'] = app.globalData.hh - 80;\r\n\r\n    this.setData({\r\n      goodsH: systemInfo.windowHeight - 245 - 48,\r\n      pageid: pageid\r\n    });\r\n    // 左边选项卡切换控制数组\r\n    var arrLab = [1];\r\n    for (var i = 1; i < that.data.arrLabel.length; i++) {\r\n      arrLab.push(0);\r\n    }\r\n    that.setData({\r\n      arrLab: arrLab,\r\n    })\r\n\r\n\r\n    core.get('quick/index/main', { id: this.data.pageid }, function (ret) {\r\n     \r\n      var arr = []; // 商品在购物车中的数量 \r\n\r\n      var style = ''; // 样式\r\n      style = ret.style.shopstyle == 1 ? 'changeCss2' : (ret.style.shopstyle == 2 ? 'changeCss3' : '')\r\n\r\n      style += ' ' + ret.style.logostyle\r\n\r\n      that.setData({\r\n        main: ret,\r\n        group: ret.group,\r\n        goodsArr: ret.goodsArr,\r\n        arrCart: arr,\r\n        style: style\r\n      })\r\n\r\n\r\n\r\n\r\n\r\n\r\n      var id = that.data.main.cartdata == 1 ? that.data.pageid : '';\r\n      var numtotal = {};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      // 计算高度\r\n      if (that.data.main.advs) {\r\n        if (that.data.main.advs.length > 0) {\r\n          var arr = [198];\r\n          var goodslength = 198;\r\n        }\r\n      } else {\r\n        var arr = [18];\r\n        var goodslength = 18;\r\n      }\r\n   \r\n      for (var i = 0; i < that.data.main.group.length; i++) {\r\n        if (that.data.main.goodsArr[that.data.main.group[i].type]) {\r\n          var templength = that.data.main.goodsArr[that.data.main.group[i].type].length ? that.data.main.goodsArr[that.data.main.group[i].type].length : 0.6;\r\n          goodslength = goodslength + templength * 106 + 66;\r\n          arr.push(goodslength)\r\n          that.setData({\r\n            arrscroll: arr\r\n          })\r\n\r\n        }\r\n\r\n   \r\n      }\r\n\r\n\r\n\r\n      var id = that.data.main.cartdata == 1 ? that.data.pageid : '';\r\n      core.get('quick/index/getCart', { quickid: id }, function (ret) {\r\n      \r\n        var numtotal = {};\r\n        for (var i in ret.simple_list) {\r\n         \r\n          numtotal[i] = ret.simple_list[i];\r\n        }\r\n        that.setData({\r\n          numtotal: numtotal\r\n        })\r\n      })\r\n\r\n      wx.hideLoading();\r\n      wx.setNavigationBarTitle({\r\n        title: ret.pagetitle\r\n      })\r\n    })\r\n  },\r\n\r\n  // 导航菜单跳转\r\n  menunavigage: function (e) {\r\n      const url = e.currentTarget.dataset.url\r\n      wx.navigateTo({\r\n          url: url,\r\n          fail: function () {\r\n              wx.switchTab({\r\n                  url: url,\r\n              })\r\n          }\r\n      })\r\n  },\r\n\r\n  // 幻灯片跳转\r\n  gobigimg: function (e) {\r\n    wx.navigateTo({\r\n      url: e.currentTarget.dataset.link,\r\n    })\r\n  },\r\n\r\n  // 左边选项卡切换方法\r\n  clickLab: function (e) {\r\n    var id = e.currentTarget.dataset.id; //左侧点击跳转id\r\n  \r\n    var arr = this.data.arrLab;\r\n    for (var i = 0; i < arr.length; i++) {\r\n      arr[i] = 0;\r\n    }\r\n    arr[id] = 1;\r\n\r\n    this.setData({\r\n      arrLab: arr,\r\n      id: e.currentTarget.dataset.id\r\n    })\r\n  },\r\n  // 查看购物车列表\r\n  shopCarList: function () {\r\n    var that = this;\r\n    this.setData({\r\n      clickCar: true,\r\n      cartcartArr: [],\r\n      showPicker: true\r\n    })\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n \r\n    core.get('quick/index/getCart', { quickid: id }, function (ret) {\r\n    \r\n      var main = that.data.main;\r\n      main.cartList = ret\r\n      that.setData({\r\n        main: main\r\n      })\r\n\r\n      var tempcartid = [];\r\n      for (var i = 0; i < ret.list.length; i++) {\r\n        tempcartid[i] = ret.list[i].goodsid;\r\n      }\r\n      that.setData({\r\n        tempcartid: tempcartid\r\n      })\r\n    \r\n    })\r\n  },\r\n  shopCarHid: function () {\r\n    this.setData({\r\n      clickCar: false,\r\n      showPicker: false\r\n    })\r\n  },\r\n\r\n\r\n\r\n\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    var $this = this;\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        if (limits) {\r\n          var goodslist = 'goodslist';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          $this.setData({\r\n            cover: '',\r\n            showvideo: false\r\n          });\r\n        } else {\r\n          $this.setData({ modelShow: true })\r\n          return\r\n        }\r\n      }\r\n    })\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', specsTitle: '', showPicker: false\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this)\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this\r\n    goodspicker.select($this)\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n\r\n  closespecs: function () {\r\n    this.setData({\r\n      closespecs: false\r\n    })\r\n  },\r\n\r\n\r\n  /**\r\n   * 生命周期函数--监听页面滚动\r\n   */\r\n  onPageScroll: function (e) {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n\r\n  },\r\n\r\n  // 弹窗picker点击确定按钮或单规格商品加入购物车\r\n  addCartquick: function (a, b) {\r\n    var that = this;\r\n\r\n    var numbers = that.data.numtotal;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n\r\n\r\n    // 加入购物车\r\n    core.get('quick/index/update', {\r\n      quickid: id,\r\n      goodsid: that.data.goodsid,\r\n      optionid: a ? a : '',\r\n      update: '',\r\n      total: '',\r\n      type: that.data.addtype,\r\n      typevalue: b ? b : '',\r\n      diyformdata: that.data.formdataval ? that.data.formdataval : ''\r\n    }, function (ret) {\r\n    \r\n\r\n\r\n      // 如果达到最大购买数量或者超出库存，提示错误信息\r\n      if (ret.error != 0) {\r\n        that.setData({\r\n          cantclick: true\r\n        })\r\n        foxui.toast(that, ret.message);\r\n        that.setData({\r\n          active: '', slider: 'out', isSelected: true, tempname: '', showPicker: false\r\n        })\r\n      } else {\r\n        // 修改底部购物车的数据\r\n        var main = that.data.main;\r\n        main.cartList.total = ret.total;\r\n        main.cartList.totalprice = ret.totalprice;\r\n        main.cartList.list = [1];\r\n\r\n        numbers[that.data.goodsid] = ret.goodstotal;\r\n    \r\n        that.setData({\r\n          numtotal: numbers,\r\n          main: main,\r\n          clearcart: true,\r\n          active: '', slider: 'out', isSelected: true, tempname: '', showPicker: false,\r\n          formdataval: {}\r\n        })\r\n        if (that.data.addtype == 'value') {\r\n          // that.animate(that.data.mouse)\r\n        }\r\n      }\r\n\r\n\r\n      // $this.setData({  });\r\n\r\n\r\n    })\r\n  },\r\n\r\n  //添加商品到购物车\r\n  addGoodToCartFn: function (e) {\r\n    app.checkAuth();\r\n    var that = this;\r\n    var modeltakeout = this.data.main.cartdata == 1 ? 'takeoutmodel' : 'shopmodel';\r\n    if (!e.currentTarget.dataset.canadd) {\r\n      modeltakeout = 'cantaddcart'\r\n    }\r\n  \r\n    that.setData({\r\n      morechose: e.currentTarget.dataset.more\r\n    })\r\n    // if(e.currentTarget.dataset.color!='#ccc') {\r\n    that.setData({\r\n      addtype: e.currentTarget.dataset.add,\r\n      goodsid: e.currentTarget.dataset.id,\r\n      mouse: e\r\n    })\r\n    if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n      that.setData({\r\n        addtype: 'delete'\r\n      })\r\n    }\r\n    // 如果有多规格减号\r\n    if (e.currentTarget.dataset.more == '1' && that.data.addtype == 'reduce') {\r\n      //如果点击减号且为多规格，提示在购物车中修改数量\r\n      foxui.toast(that, \"请在购物车中修改多规格商品\");\r\n    }\r\n    else if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n      foxui.toast(that, \"不能少于\" + e.currentTarget.dataset.min + \"件商品\");\r\n    }\r\n    // 如果是多规格或有自定义表单 加号\r\n    else if (e.currentTarget.dataset.more == '1' || e.currentTarget.dataset.diyformtype != '0' || !e.currentTarget.dataset.canadd) {\r\n      if (that.data.addtype != 'reduce' && that.data.addtype != 'delete') {\r\n        var goodslist = 'quickbuy';\r\n        that.setData({\r\n          showPicker: true,\r\n          cycledate: false\r\n        })\r\n        goodspicker.selectpicker(e, that, goodslist, modeltakeout);\r\n       \r\n\r\n      } else {\r\n        that.setData({\r\n          storenum: e.currentTarget.dataset.store,\r\n          maxnum: e.currentTarget.dataset.maxnum\r\n        })\r\n        that.addCartquick('', 1);\r\n      }\r\n    }\r\n\r\n    // 如果是单规格\r\n    if (e.currentTarget.dataset.more != '1' && e.currentTarget.dataset.diyformtype == '0' && e.currentTarget.dataset.canadd) {\r\n      that.setData({\r\n        storenum: e.currentTarget.dataset.store,\r\n        maxnum: e.currentTarget.dataset.maxnum\r\n      })\r\n      // 减号且不能再少\r\n      if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n        foxui.toast(that, \"不能少于\" + e.currentTarget.dataset.min + \"件商品\");\r\n      } else {\r\n        that.addCartquick('', 1);\r\n      }\r\n\r\n    }\r\n    // }\r\n  },\r\n\r\n  // 加购物车动画\r\n  animate: function (e) {\r\n    var that = this;\r\n\r\n    that.finger = {}; var topPoint = {};\r\n    that.finger['x'] = e.touches[\"0\"].clientX;//点击的位置\r\n    that.finger['y'] = e.touches[\"0\"].clientY;\r\n\r\n    if (that.finger['y'] < that.busPos['y']) {\r\n      topPoint['y'] = that.finger['y'] - 150;\r\n    } else {\r\n      topPoint['y'] = that.busPos['y'] - 150;\r\n    }\r\n    topPoint['x'] = Math.abs(that.finger['x'] - that.busPos['x']) / 2;\r\n\r\n    if (that.finger['x'] > that.busPos['x']) {\r\n      topPoint['x'] = (that.finger['x'] - that.busPos['x']) / 2 + that.busPos['x'];\r\n    } else {//\r\n      topPoint['x'] = (that.busPos['x'] - that.finger['x']) / 2 + that.finger['x'];\r\n    }\r\n\r\n    //topPoint['x'] = that.busPos['x'] + 80\r\n    //that.linePos = app.bezier([that.finger, topPoint, that.busPos], 30);\r\n    that.linePos = that.bezier([that.busPos, topPoint, that.finger], 30);\r\n    that.startAnimation(e);\r\n  },\r\n  bezier: function (pots, amount) {\r\n    var pot;\r\n    var lines;\r\n    var ret = [];\r\n    var points;\r\n    for (var i = 0; i <= amount; i++) {\r\n      points = pots.slice(0);\r\n      lines = [];\r\n      while (pot = points.shift()) {\r\n        if (points.length) {\r\n          lines.push(pointLine([pot, points[0]], i / amount));\r\n        } else if (lines.length > 1) {\r\n          points = lines;\r\n          lines = [];\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      ret.push(lines[0]);\r\n    }\r\n    function pointLine(points, rate) {\r\n      var pointA, pointB, pointDistance, xDistance, yDistance, tan, radian, tmpPointDistance;\r\n      var ret = [];\r\n      pointA = points[0];//点击\r\n      pointB = points[1];//中间\r\n      xDistance = pointB.x - pointA.x;\r\n      yDistance = pointB.y - pointA.y;\r\n      pointDistance = Math.pow(Math.pow(xDistance, 2) + Math.pow(yDistance, 2), 1 / 2);\r\n      tan = yDistance / xDistance;\r\n      radian = Math.atan(tan);\r\n      tmpPointDistance = pointDistance * rate;\r\n      ret = {\r\n        x: pointA.x + tmpPointDistance * Math.cos(radian),\r\n        y: pointA.y + tmpPointDistance * Math.sin(radian)\r\n      };\r\n      return ret;\r\n    }\r\n    return {\r\n      'bezier_points': ret\r\n    };\r\n  },\r\n  startAnimation: function (e) {\r\n    var index = 0, that = this,\r\n      bezier_points = that.linePos['bezier_points'];\r\n\r\n    this.setData({\r\n      hide_good_box: false,\r\n      bus_x: that.finger['x'],\r\n      bus_y: that.finger['y']\r\n    })\r\n    var len = bezier_points.length;\r\n    index = len\r\n    this.timer = setInterval(function () {\r\n      index--;\r\n      that.setData({\r\n        bus_x: bezier_points[index]['x'],\r\n        bus_y: bezier_points[index]['y']\r\n      })\r\n      if (index < 1) {\r\n        clearInterval(that.timer);\r\n        // that.addGoodToCartFn(e);\r\n        that.setData({\r\n          hide_good_box: true\r\n        })\r\n      }\r\n    }, 13);\r\n  },\r\n\r\n  //清空购物车\r\n  clearShopCartFn: function (e) {\r\n    var that = this;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    core.get('quick/index/clearCart', { quickid: id }, function (ret) {\r\n     \r\n      var main = that.data.main;\r\n      main.cartList = {\r\n        list: [],\r\n        total: 0,\r\n        totalprice: 0\r\n      };\r\n      var tempcartid = that.data.tempcartid\r\n      var arr = [];\r\n      // 这里有bug，清空购物车的时候遍历id数组，比当前有的id大的商品不在数组里所以要找到最大的id值将数组置为0\r\n      for (var i = 0; i < tempcartid.length; i++) {\r\n      \r\n        arr[Number(tempcartid[i])] = -1\r\n      \r\n      }\r\n      that.setData({\r\n        main: main,\r\n        clickCar: false,\r\n        numtotal: arr,\r\n        clearcart: false,\r\n        showPicker: false\r\n      })\r\n      \r\n    })\r\n  },\r\n\r\n  // 关闭多规格弹窗\r\n  closemulti: function () {\r\n    this.setData({\r\n      showPicker: false,\r\n      clickCar: false,\r\n      cycledate: true\r\n    })\r\n  },\r\n\r\n  // 结算\r\n  gopay: function () {\r\n    \r\n    var fromquick = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    if (!this.data.main.cartList.list.length) {\r\n      // 如果购物车中没有商品\r\n      foxui.toast(this, \"请先添加商品到购物车\");\r\n    } else {\r\n      wx.navigateTo({\r\n        url: '/pages/order/create/index?fromquick=' + fromquick\r\n      })\r\n    }\r\n  },\r\n  // 跳转到购物车\r\n  gotocart: function () {\r\n    const url = '/pages/member/cart/index'\r\n    wx.navigateTo({\r\n        url: url,\r\n        fail: function () {\r\n            wx.switchTab({\r\n              url: url,\r\n            })\r\n        }\r\n    })\r\n  },\r\n\r\n  // 购物车弹层加减商品\r\n  cartaddcart: function (e) {\r\n    var that = this;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    var opid = e.currentTarget.dataset.id == '0' ? e.currentTarget.dataset.goodsid : e.currentTarget.dataset.id;\r\n\r\n    var carttype = e.currentTarget.dataset.add;\r\n    var value = 1;\r\n    if (e.currentTarget.dataset.min == e.currentTarget.dataset.num && carttype == 'reduce') {\r\n      carttype = 'delete'\r\n    }\r\n\r\n    // 加入购物车\r\n    core.get('quick/index/update', {\r\n      quickid: id,\r\n      goodsid: e.currentTarget.dataset.goodsid,\r\n      optionid: e.currentTarget.dataset.id == '0' ? '' : e.currentTarget.dataset.id,\r\n      update: '',\r\n      total: '',\r\n      type: carttype,\r\n      typevalue: value,\r\n      // diyformdata: ''\r\n    }, function (ret) {\r\n      \r\n      if (ret.error == 0) {\r\n        var arr = that.data.cartcartArr;\r\n        arr[opid] = ret.goodsOptionTotal || ret.goodsOptionTotal == 0 ? ret.goodsOptionTotal : ret.goodstotal;\r\n\r\n        var main = that.data.main;\r\n        main.cartList.total = ret.total;\r\n        main.cartList.totalprice = ret.totalprice;\r\n\r\n        var numbers = that.data.numtotal;\r\n        numbers[e.currentTarget.dataset.goodsid] = ret.goodstotal;\r\n\r\n        that.setData({\r\n          cartcartArr: arr,\r\n          main: main,\r\n          numtotal: numbers\r\n        })\r\n      } else {\r\n        foxui.toast(that, ret.message);\r\n      }\r\n    })\r\n  },\r\n\r\n  // 右侧主体滚动事件\r\n  scrollfn: function (e) {\r\n  \r\n    var that = this;\r\n    var arrtemp = this.data.arrLab;\r\n    for (var i = 0; i < that.data.arrscroll.length; i++) {\r\n      arrtemp[i] = 0;\r\n      if (Math.abs(e.detail.scrollTop - that.data.arrscroll[i]) < 26) {\r\n\r\n        arrtemp[i] = 1;\r\n        this.setData({\r\n          arrLab: arrtemp\r\n        })\r\n        break;\r\n      }\r\n\r\n    }\r\n  },\r\n  onShareAppMessage: function (res) {\r\n\r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('/core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    activity_setting: {},\r\n    shareid: '',\r\n    id: '',\r\n    share_id: '',\r\n    time: ['00', '00', '00', '00'],\r\n    listlength: false,\r\n    pindex: 6,\r\n    \r\n  },\r\n\r\n  onLoad: function (options) {\r\n    app.url(options);\r\n    var $this = this;\r\n    if(options.share_id){\r\n      $this.setData({ share_id: options.share_id});\r\n    }\r\n    if (options.id) {\r\n      $this.setData({ id: options.id });\r\n    }\r\n    $this.getList();\r\n  },\r\n\r\n  // onShow: function() {\r\n  //   var $this = this;\r\n  //   $this.getList();\r\n  // },\r\n\r\n  // 领取优惠券\r\n  getCoupon: function(e){\r\n    var $this = this;\r\n    if($this.data.isGet){\r\n      return;\r\n    }\r\n    var args = { id: $this.data.id, share_id: $this.data.share_id, form_id: e.detail.formId};\r\n    if (!$this.data.isLogin) {\r\n      app.checkAuth();\r\n      return;\r\n    }\r\n    $this.setData({ isGet: true})\r\n    core.get('friendcoupon/receive', args , function (ret) {\r\n      if(ret.error == 0){\r\n        foxui.toast($this, '领取成功');\r\n        $this.getList();\r\n        $this.setData({ isGet: false })\r\n      }else{\r\n        $this.setData({\r\n          invalidMessage: ret.message.replace('<br>', \"\\n\"),\r\n          isGet: false \r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n  // 参与瓜分  \r\n  carve: function (e) {\r\n    var $this = this;\r\n    var args = { id: $this.data.id, share_id: $this.data.share_id, form_id: e.detail.formId };\r\n    if (!$this.data.isLogin){\r\n      app.checkAuth();\r\n      return;\r\n    }\r\n    core.get('friendcoupon/divide', args , function (ret) {\r\n        if(ret.error == 0){\r\n          foxui.toast($this, ret.message);\r\n          $this.getList();\r\n        } else {\r\n          foxui.toast($this, ret.message);\r\n          $this.getList();\r\n        }\r\n    })\r\n  },\r\n\r\n  // 查看我的\r\n  mycoupon: function() {\r\n    this.setData({\r\n      id: this.data.data.currentActivityInfo.activity_id,\r\n      share_id: this.data.data.currentActivityInfo.headerid\r\n    })\r\n    this.getList();\r\n  },\r\n\r\n  // 分享\r\n  onShareAppMessage(res) {\r\n    var $this = this;\r\n    var title = $this.data.data.activitySetting.title\r\n    var url = '/friendcoupon/index?share_id=' + $this.data.shareid + '&id=' + $this.data.id\r\n    return core.onShareAppMessage(url, title);\r\n  },\r\n  // 查看更多\r\n  more: function(){\r\n    var $this = this;\r\n    var activityList = $this.data.activityList;\r\n    core.get('friendcoupon/more', {\r\n      id: $this.data.id,\r\n      share_id: $this.data.shareid,\r\n      pindex: $this.data.pindex\r\n    }, function (ret) {\r\n      if (ret.result.list.length === 0) {\r\n        foxui.toast($this, \"没有更多了\")\r\n      } else {\r\n        $this.setData({ activityList: activityList.concat(ret.result.list), pindex: $this.data.pindex + 10});\r\n      }\r\n    })\r\n    // core.get('friendcoupon/more', {id: $this.data.id, share_id: $this.data.share_id, pindex: $this.data.data.activityData.length}, function (ret) {\r\n    //     console.log(ret)\r\n    // })\r\n\r\n  },\r\n\r\n  // 获取数据\r\n  getList() {\r\n    var $this = this;\r\n    core.get('friendcoupon', { id: $this.data.id, share_id: $this.data.share_id}, function (ret) {\r\n      if(ret.error == 0){\r\n        if (ret.currentActivityInfo){\r\n          ret.currentActivityInfo.enough = Number(ret.currentActivityInfo.enough);\r\n        }\r\n        if (typeof (ret.activitySetting.desc) == 'string'){\r\n          $this.setData({ isArray: true })\r\n        }\r\n\r\n        //接口里activityData字段返回了所有数据，超过五条时我只需要显示五条，所以赋值给另一数组来显示\r\n\r\n        $this.setData({ \r\n          activityData: ret.activityData,\r\n          activityList: ret.activityData.length > 5 ? ret.activityData.slice(0,5) : ret.activityData,\r\n          data: ret,\r\n          isLogin: ret.isLogin,\r\n          mylink: ret.mylink,\r\n          invalidMessage: ret.invalidMessage,\r\n          shareid: ret.currentActivityInfo ? ret.currentActivityInfo.headerid : '',\r\n        })\r\n\r\n\r\n\r\n        // 活动还没有结束的时候显示倒计时\r\n        if (+ret.overTime + 3 > Math.round(+new Date / 1000)){\r\n          let timer = setInterval(function () {\r\n            $this.setData({\r\n              time: core.countDown(+ret.overTime + 3)\r\n            })\r\n            if (!$this.data.time) {\r\n              clearInterval(timer);\r\n                $this.getList();\r\n            }\r\n          }, 1000);\r\n        }\r\n      }else{\r\n        foxui.toast($this, ret.message);\r\n      }\r\n    })\r\n  }\r\n})","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this = this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300)\r\n    wx.reLaunch({\r\n      url: '/commission/pages/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","var app = getApp();\r\nvar core = require('../../utils/core.js')\r\n\r\n// pages/auth/auth.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    shop_logo: '',\r\n    shop_name: ''\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    \r\n    core.get('wxAppSetting', {}, (response) => {\r\n      var sysSet = response.sysset\r\n      \r\n      this.setData({\r\n        shop_logo: sysSet.shoplogo,\r\n        shop_name: sysSet.shopname\r\n      })\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  },\r\n  bindGetUserInfo: function (res) {\r\n    wx.login({\r\n      success: function (ret) {\r\n        core.post('wxapp/login', { code: ret.code }, function (login_res) {\r\n          if (login_res.error) {\r\n            core.alert('获取用户登录态失败:' + login_res.message);\r\n            return;\r\n          }\r\n          core.get('wxapp/auth', {\r\n            data: res.detail.encryptedData,\r\n            iv: res.detail.iv,\r\n            sessionKey: login_res.session_key\r\n          }, function (auth_res) {\r\n            if (auth_res.isblack == 1) {\r\n              wx.showModal({\r\n                title: '无法访问',\r\n                content: '您在商城的黑名单中，无权访问！',\r\n                success: function (res) {\r\n                  if (res.confirm) {\r\n                    app.close();\r\n                  }\r\n                  if (res.cancel) {\r\n                    app.close();\r\n                  }\r\n                }\r\n              })\r\n            }\r\n            res.detail.userInfo.openid = auth_res.openId\r\n            res.detail.userInfo.id = auth_res.id\r\n            res.detail.userInfo.uniacid = auth_res.uniacid\r\n            app.setCache('userinfo', res.detail.userInfo);\r\n            app.setCache('userinfo_openid', res.detail.userInfo.openid);\r\n            app.setCache('userinfo_id', auth_res.id);\r\n            app.getSet();\r\n            wx.reLaunch({\r\n              url: '/pages/index/index'\r\n            })\r\n          })\r\n        })\r\n      },\r\n      fail: function () {\r\n        core.alert('获取用户信息失败!');\r\n      }\r\n    })\r\n  },\r\n  close () {\r\n    wx.navigateBack({\r\n\r\n      delta: 0\r\n\r\n    })\r\n  }\r\n})"]}